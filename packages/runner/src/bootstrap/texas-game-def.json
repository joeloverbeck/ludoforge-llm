{
  "metadata": {
    "id": "texas-holdem-nlhe-tournament",
    "players": {
      "min": 2,
      "max": 10
    },
    "maxTriggerDepth": 5,
    "name": "Texas Hold'em",
    "description": "No-limit Texas Hold'em poker tournament"
  },
  "constants": {},
  "globalVars": [
    {
      "name": "pot",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 10000000
    },
    {
      "name": "currentBet",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 1000000
    },
    {
      "name": "lastRaiseSize",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 1000000
    },
    {
      "name": "dealerSeat",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 9
    },
    {
      "name": "smallBlind",
      "type": "int",
      "init": 10,
      "min": 1,
      "max": 1000000
    },
    {
      "name": "bigBlind",
      "type": "int",
      "init": 20,
      "min": 1,
      "max": 1000000
    },
    {
      "name": "ante",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 1000000
    },
    {
      "name": "blindLevel",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 100
    },
    {
      "name": "handsPlayed",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 100000
    },
    {
      "name": "handPhase",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 4
    },
    {
      "name": "activePlayers",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 10
    },
    {
      "name": "actingPosition",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 9
    },
    {
      "name": "bettingClosed",
      "type": "boolean",
      "init": false
    },
    {
      "name": "preflopBigBlindSeat",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 9
    },
    {
      "name": "preflopBigBlindOptionOpen",
      "type": "boolean",
      "init": false
    },
    {
      "name": "oddChipRemainder",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 1000000
    }
  ],
  "perPlayerVars": [
    {
      "name": "chipStack",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 1000000
    },
    {
      "name": "streetBet",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 1000000
    },
    {
      "name": "totalBet",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 1000000
    },
    {
      "name": "handActive",
      "type": "boolean",
      "init": true
    },
    {
      "name": "allIn",
      "type": "boolean",
      "init": false
    },
    {
      "name": "actedSinceLastFullRaise",
      "type": "boolean",
      "init": false
    },
    {
      "name": "eliminated",
      "type": "boolean",
      "init": false
    },
    {
      "name": "seatIndex",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 9
    },
    {
      "name": "showdownScore",
      "type": "int",
      "init": 0,
      "min": 0,
      "max": 999999999999
    }
  ],
  "zones": [
    {
      "id": "deck:none",
      "zoneKind": "aux",
      "owner": "none",
      "visibility": "hidden",
      "ordering": "stack"
    },
    {
      "id": "burn:none",
      "zoneKind": "aux",
      "owner": "none",
      "visibility": "hidden",
      "ordering": "set"
    },
    {
      "id": "community:none",
      "zoneKind": "aux",
      "owner": "none",
      "visibility": "public",
      "ordering": "queue"
    },
    {
      "id": "hand:0",
      "zoneKind": "aux",
      "owner": "player",
      "ownerPlayerIndex": 0,
      "visibility": "owner",
      "ordering": "set"
    },
    {
      "id": "hand:1",
      "zoneKind": "aux",
      "owner": "player",
      "ownerPlayerIndex": 1,
      "visibility": "owner",
      "ordering": "set"
    },
    {
      "id": "hand:2",
      "zoneKind": "aux",
      "owner": "player",
      "ownerPlayerIndex": 2,
      "visibility": "owner",
      "ordering": "set"
    },
    {
      "id": "hand:3",
      "zoneKind": "aux",
      "owner": "player",
      "ownerPlayerIndex": 3,
      "visibility": "owner",
      "ordering": "set"
    },
    {
      "id": "hand:4",
      "zoneKind": "aux",
      "owner": "player",
      "ownerPlayerIndex": 4,
      "visibility": "owner",
      "ordering": "set"
    },
    {
      "id": "hand:5",
      "zoneKind": "aux",
      "owner": "player",
      "ownerPlayerIndex": 5,
      "visibility": "owner",
      "ordering": "set"
    },
    {
      "id": "hand:6",
      "zoneKind": "aux",
      "owner": "player",
      "ownerPlayerIndex": 6,
      "visibility": "owner",
      "ordering": "set"
    },
    {
      "id": "hand:7",
      "zoneKind": "aux",
      "owner": "player",
      "ownerPlayerIndex": 7,
      "visibility": "owner",
      "ordering": "set"
    },
    {
      "id": "hand:8",
      "zoneKind": "aux",
      "owner": "player",
      "ownerPlayerIndex": 8,
      "visibility": "owner",
      "ordering": "set"
    },
    {
      "id": "hand:9",
      "zoneKind": "aux",
      "owner": "player",
      "ownerPlayerIndex": 9,
      "visibility": "owner",
      "ordering": "set"
    },
    {
      "id": "muck:none",
      "zoneKind": "aux",
      "owner": "none",
      "visibility": "hidden",
      "ordering": "set"
    }
  ],
  "factions": [
    {
      "id": "neutral"
    }
  ],
  "globalMarkerLattices": [],
  "runtimeDataAssets": [
    {
      "id": "standard-52-deck",
      "kind": "pieceCatalog",
      "payload": {
        "factions": [
          {
            "id": "neutral"
          }
        ],
        "pieceTypes": [
          {
            "id": "card-2S",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 2,
              "suit": 0,
              "rankName": 2,
              "suitName": "Spades"
            }
          },
          {
            "id": "card-3S",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 3,
              "suit": 0,
              "rankName": 3,
              "suitName": "Spades"
            }
          },
          {
            "id": "card-4S",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 4,
              "suit": 0,
              "rankName": 4,
              "suitName": "Spades"
            }
          },
          {
            "id": "card-5S",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 5,
              "suit": 0,
              "rankName": 5,
              "suitName": "Spades"
            }
          },
          {
            "id": "card-6S",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 6,
              "suit": 0,
              "rankName": 6,
              "suitName": "Spades"
            }
          },
          {
            "id": "card-7S",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 7,
              "suit": 0,
              "rankName": 7,
              "suitName": "Spades"
            }
          },
          {
            "id": "card-8S",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 8,
              "suit": 0,
              "rankName": 8,
              "suitName": "Spades"
            }
          },
          {
            "id": "card-9S",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 9,
              "suit": 0,
              "rankName": 9,
              "suitName": "Spades"
            }
          },
          {
            "id": "card-TS",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 10,
              "suit": 0,
              "rankName": "Ten",
              "suitName": "Spades"
            }
          },
          {
            "id": "card-JS",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 11,
              "suit": 0,
              "rankName": "Jack",
              "suitName": "Spades"
            }
          },
          {
            "id": "card-QS",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 12,
              "suit": 0,
              "rankName": "Queen",
              "suitName": "Spades"
            }
          },
          {
            "id": "card-KS",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 13,
              "suit": 0,
              "rankName": "King",
              "suitName": "Spades"
            }
          },
          {
            "id": "card-AS",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 14,
              "suit": 0,
              "rankName": "Ace",
              "suitName": "Spades"
            }
          },
          {
            "id": "card-2H",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 2,
              "suit": 1,
              "rankName": 2,
              "suitName": "Hearts"
            }
          },
          {
            "id": "card-3H",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 3,
              "suit": 1,
              "rankName": 3,
              "suitName": "Hearts"
            }
          },
          {
            "id": "card-4H",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 4,
              "suit": 1,
              "rankName": 4,
              "suitName": "Hearts"
            }
          },
          {
            "id": "card-5H",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 5,
              "suit": 1,
              "rankName": 5,
              "suitName": "Hearts"
            }
          },
          {
            "id": "card-6H",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 6,
              "suit": 1,
              "rankName": 6,
              "suitName": "Hearts"
            }
          },
          {
            "id": "card-7H",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 7,
              "suit": 1,
              "rankName": 7,
              "suitName": "Hearts"
            }
          },
          {
            "id": "card-8H",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 8,
              "suit": 1,
              "rankName": 8,
              "suitName": "Hearts"
            }
          },
          {
            "id": "card-9H",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 9,
              "suit": 1,
              "rankName": 9,
              "suitName": "Hearts"
            }
          },
          {
            "id": "card-TH",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 10,
              "suit": 1,
              "rankName": "Ten",
              "suitName": "Hearts"
            }
          },
          {
            "id": "card-JH",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 11,
              "suit": 1,
              "rankName": "Jack",
              "suitName": "Hearts"
            }
          },
          {
            "id": "card-QH",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 12,
              "suit": 1,
              "rankName": "Queen",
              "suitName": "Hearts"
            }
          },
          {
            "id": "card-KH",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 13,
              "suit": 1,
              "rankName": "King",
              "suitName": "Hearts"
            }
          },
          {
            "id": "card-AH",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 14,
              "suit": 1,
              "rankName": "Ace",
              "suitName": "Hearts"
            }
          },
          {
            "id": "card-2D",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 2,
              "suit": 2,
              "rankName": 2,
              "suitName": "Diamonds"
            }
          },
          {
            "id": "card-3D",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 3,
              "suit": 2,
              "rankName": 3,
              "suitName": "Diamonds"
            }
          },
          {
            "id": "card-4D",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 4,
              "suit": 2,
              "rankName": 4,
              "suitName": "Diamonds"
            }
          },
          {
            "id": "card-5D",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 5,
              "suit": 2,
              "rankName": 5,
              "suitName": "Diamonds"
            }
          },
          {
            "id": "card-6D",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 6,
              "suit": 2,
              "rankName": 6,
              "suitName": "Diamonds"
            }
          },
          {
            "id": "card-7D",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 7,
              "suit": 2,
              "rankName": 7,
              "suitName": "Diamonds"
            }
          },
          {
            "id": "card-8D",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 8,
              "suit": 2,
              "rankName": 8,
              "suitName": "Diamonds"
            }
          },
          {
            "id": "card-9D",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 9,
              "suit": 2,
              "rankName": 9,
              "suitName": "Diamonds"
            }
          },
          {
            "id": "card-TD",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 10,
              "suit": 2,
              "rankName": "Ten",
              "suitName": "Diamonds"
            }
          },
          {
            "id": "card-JD",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 11,
              "suit": 2,
              "rankName": "Jack",
              "suitName": "Diamonds"
            }
          },
          {
            "id": "card-QD",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 12,
              "suit": 2,
              "rankName": "Queen",
              "suitName": "Diamonds"
            }
          },
          {
            "id": "card-KD",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 13,
              "suit": 2,
              "rankName": "King",
              "suitName": "Diamonds"
            }
          },
          {
            "id": "card-AD",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 14,
              "suit": 2,
              "rankName": "Ace",
              "suitName": "Diamonds"
            }
          },
          {
            "id": "card-2C",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 2,
              "suit": 3,
              "rankName": 2,
              "suitName": "Clubs"
            }
          },
          {
            "id": "card-3C",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 3,
              "suit": 3,
              "rankName": 3,
              "suitName": "Clubs"
            }
          },
          {
            "id": "card-4C",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 4,
              "suit": 3,
              "rankName": 4,
              "suitName": "Clubs"
            }
          },
          {
            "id": "card-5C",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 5,
              "suit": 3,
              "rankName": 5,
              "suitName": "Clubs"
            }
          },
          {
            "id": "card-6C",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 6,
              "suit": 3,
              "rankName": 6,
              "suitName": "Clubs"
            }
          },
          {
            "id": "card-7C",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 7,
              "suit": 3,
              "rankName": 7,
              "suitName": "Clubs"
            }
          },
          {
            "id": "card-8C",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 8,
              "suit": 3,
              "rankName": 8,
              "suitName": "Clubs"
            }
          },
          {
            "id": "card-9C",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 9,
              "suit": 3,
              "rankName": 9,
              "suitName": "Clubs"
            }
          },
          {
            "id": "card-TC",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 10,
              "suit": 3,
              "rankName": "Ten",
              "suitName": "Clubs"
            }
          },
          {
            "id": "card-JC",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 11,
              "suit": 3,
              "rankName": "Jack",
              "suitName": "Clubs"
            }
          },
          {
            "id": "card-QC",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 12,
              "suit": 3,
              "rankName": "Queen",
              "suitName": "Clubs"
            }
          },
          {
            "id": "card-KC",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 13,
              "suit": 3,
              "rankName": "King",
              "suitName": "Clubs"
            }
          },
          {
            "id": "card-AC",
            "faction": "neutral",
            "statusDimensions": [],
            "transitions": [],
            "runtimeProps": {
              "rank": 14,
              "suit": 3,
              "rankName": "Ace",
              "suitName": "Clubs"
            }
          }
        ],
        "inventory": [
          {
            "pieceTypeId": "card-2S",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-3S",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-4S",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-5S",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-6S",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-7S",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-8S",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-9S",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-TS",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-JS",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-QS",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-KS",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-AS",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-2H",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-3H",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-4H",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-5H",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-6H",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-7H",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-8H",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-9H",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-TH",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-JH",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-QH",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-KH",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-AH",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-2D",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-3D",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-4D",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-5D",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-6D",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-7D",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-8D",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-9D",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-TD",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-JD",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-QD",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-KD",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-AD",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-2C",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-3C",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-4C",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-5C",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-6C",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-7C",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-8C",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-9C",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-TC",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-JC",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-QC",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-KC",
            "faction": "neutral",
            "total": 1
          },
          {
            "pieceTypeId": "card-AC",
            "faction": "neutral",
            "total": 1
          }
        ]
      }
    },
    {
      "id": "tournament-standard",
      "kind": "scenario",
      "payload": {
        "pieceCatalogAssetId": "standard-52-deck",
        "factionPools": [
          {
            "faction": "neutral",
            "availableZoneId": "deck:none",
            "outOfPlayZoneId": "muck:none"
          }
        ],
        "scenarioName": "Standard NLHE Tournament",
        "yearRange": "timeless",
        "settings": {
          "startingChips": 1000,
          "blindSchedule": [
            {
              "level": 0,
              "sb": 10,
              "bb": 20,
              "ante": 0,
              "handsUntilNext": 10
            },
            {
              "level": 1,
              "sb": 15,
              "bb": 30,
              "ante": 0,
              "handsUntilNext": 10
            },
            {
              "level": 2,
              "sb": 25,
              "bb": 50,
              "ante": 5,
              "handsUntilNext": 10
            },
            {
              "level": 3,
              "sb": 50,
              "bb": 100,
              "ante": 10,
              "handsUntilNext": 8
            },
            {
              "level": 4,
              "sb": 75,
              "bb": 150,
              "ante": 15,
              "handsUntilNext": 8
            },
            {
              "level": 5,
              "sb": 100,
              "bb": 200,
              "ante": 25,
              "handsUntilNext": 6
            },
            {
              "level": 6,
              "sb": 150,
              "bb": 300,
              "ante": 50,
              "handsUntilNext": 6
            },
            {
              "level": 7,
              "sb": 200,
              "bb": 400,
              "ante": 50,
              "handsUntilNext": 5
            },
            {
              "level": 8,
              "sb": 300,
              "bb": 600,
              "ante": 75,
              "handsUntilNext": 5
            },
            {
              "level": 9,
              "sb": 500,
              "bb": 1000,
              "ante": 100,
              "handsUntilNext": 5
            }
          ]
        }
      }
    }
  ],
  "tableContracts": [
    {
      "id": "standard-52-deck::factions",
      "assetId": "standard-52-deck",
      "tablePath": "factions",
      "fields": [
        {
          "field": "id",
          "type": "string"
        }
      ],
      "uniqueBy": [
        [
          "id"
        ]
      ]
    },
    {
      "id": "standard-52-deck::inventory",
      "assetId": "standard-52-deck",
      "tablePath": "inventory",
      "fields": [
        {
          "field": "faction",
          "type": "string"
        },
        {
          "field": "pieceTypeId",
          "type": "string"
        },
        {
          "field": "total",
          "type": "int"
        }
      ],
      "uniqueBy": [
        [
          "pieceTypeId"
        ]
      ]
    },
    {
      "id": "tournament-standard::factionPools",
      "assetId": "tournament-standard",
      "tablePath": "factionPools",
      "fields": [
        {
          "field": "availableZoneId",
          "type": "string"
        },
        {
          "field": "faction",
          "type": "string"
        },
        {
          "field": "outOfPlayZoneId",
          "type": "string"
        }
      ],
      "uniqueBy": [
        [
          "availableZoneId"
        ],
        [
          "faction"
        ],
        [
          "outOfPlayZoneId"
        ]
      ]
    },
    {
      "id": "tournament-standard::settings.blindSchedule",
      "assetId": "tournament-standard",
      "tablePath": "settings.blindSchedule",
      "fields": [
        {
          "field": "ante",
          "type": "int"
        },
        {
          "field": "bb",
          "type": "int"
        },
        {
          "field": "handsUntilNext",
          "type": "int"
        },
        {
          "field": "level",
          "type": "int"
        },
        {
          "field": "sb",
          "type": "int"
        }
      ],
      "uniqueBy": [
        [
          "level"
        ]
      ],
      "constraints": [
        {
          "kind": "monotonic",
          "field": "level",
          "direction": "asc"
        },
        {
          "kind": "contiguousInt",
          "field": "level",
          "start": 0,
          "step": 1
        },
        {
          "kind": "numericRange",
          "field": "handsUntilNext",
          "min": 1
        }
      ]
    }
  ],
  "tokenTypes": [
    {
      "id": "card-2S",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-3S",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-4S",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-5S",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-6S",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-7S",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-8S",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-9S",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-TS",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-JS",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-QS",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-KS",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-AS",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-2H",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-3H",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-4H",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-5H",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-6H",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-7H",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-8H",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-9H",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-TH",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-JH",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-QH",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-KH",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-AH",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-2D",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-3D",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-4D",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-5D",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-6D",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-7D",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-8D",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-9D",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-TD",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-JD",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-QD",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-KD",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-AD",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-2C",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-3C",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-4C",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-5C",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-6C",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-7C",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-8C",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-9C",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "int",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-TC",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-JC",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-QC",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-KC",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    },
    {
      "id": "card-AC",
      "props": {
        "rank": "int",
        "suit": "int",
        "rankName": "string",
        "suitName": "string"
      },
      "faction": "neutral"
    }
  ],
  "setup": [
    {
      "createToken": {
        "type": "card-2S",
        "zone": "deck:none",
        "props": {
          "rank": 2,
          "suit": 0,
          "rankName": 2,
          "suitName": "Spades"
        }
      }
    },
    {
      "createToken": {
        "type": "card-3S",
        "zone": "deck:none",
        "props": {
          "rank": 3,
          "suit": 0,
          "rankName": 3,
          "suitName": "Spades"
        }
      }
    },
    {
      "createToken": {
        "type": "card-4S",
        "zone": "deck:none",
        "props": {
          "rank": 4,
          "suit": 0,
          "rankName": 4,
          "suitName": "Spades"
        }
      }
    },
    {
      "createToken": {
        "type": "card-5S",
        "zone": "deck:none",
        "props": {
          "rank": 5,
          "suit": 0,
          "rankName": 5,
          "suitName": "Spades"
        }
      }
    },
    {
      "createToken": {
        "type": "card-6S",
        "zone": "deck:none",
        "props": {
          "rank": 6,
          "suit": 0,
          "rankName": 6,
          "suitName": "Spades"
        }
      }
    },
    {
      "createToken": {
        "type": "card-7S",
        "zone": "deck:none",
        "props": {
          "rank": 7,
          "suit": 0,
          "rankName": 7,
          "suitName": "Spades"
        }
      }
    },
    {
      "createToken": {
        "type": "card-8S",
        "zone": "deck:none",
        "props": {
          "rank": 8,
          "suit": 0,
          "rankName": 8,
          "suitName": "Spades"
        }
      }
    },
    {
      "createToken": {
        "type": "card-9S",
        "zone": "deck:none",
        "props": {
          "rank": 9,
          "suit": 0,
          "rankName": 9,
          "suitName": "Spades"
        }
      }
    },
    {
      "createToken": {
        "type": "card-TS",
        "zone": "deck:none",
        "props": {
          "rank": 10,
          "suit": 0,
          "rankName": "Ten",
          "suitName": "Spades"
        }
      }
    },
    {
      "createToken": {
        "type": "card-JS",
        "zone": "deck:none",
        "props": {
          "rank": 11,
          "suit": 0,
          "rankName": "Jack",
          "suitName": "Spades"
        }
      }
    },
    {
      "createToken": {
        "type": "card-QS",
        "zone": "deck:none",
        "props": {
          "rank": 12,
          "suit": 0,
          "rankName": "Queen",
          "suitName": "Spades"
        }
      }
    },
    {
      "createToken": {
        "type": "card-KS",
        "zone": "deck:none",
        "props": {
          "rank": 13,
          "suit": 0,
          "rankName": "King",
          "suitName": "Spades"
        }
      }
    },
    {
      "createToken": {
        "type": "card-AS",
        "zone": "deck:none",
        "props": {
          "rank": 14,
          "suit": 0,
          "rankName": "Ace",
          "suitName": "Spades"
        }
      }
    },
    {
      "createToken": {
        "type": "card-2H",
        "zone": "deck:none",
        "props": {
          "rank": 2,
          "suit": 1,
          "rankName": 2,
          "suitName": "Hearts"
        }
      }
    },
    {
      "createToken": {
        "type": "card-3H",
        "zone": "deck:none",
        "props": {
          "rank": 3,
          "suit": 1,
          "rankName": 3,
          "suitName": "Hearts"
        }
      }
    },
    {
      "createToken": {
        "type": "card-4H",
        "zone": "deck:none",
        "props": {
          "rank": 4,
          "suit": 1,
          "rankName": 4,
          "suitName": "Hearts"
        }
      }
    },
    {
      "createToken": {
        "type": "card-5H",
        "zone": "deck:none",
        "props": {
          "rank": 5,
          "suit": 1,
          "rankName": 5,
          "suitName": "Hearts"
        }
      }
    },
    {
      "createToken": {
        "type": "card-6H",
        "zone": "deck:none",
        "props": {
          "rank": 6,
          "suit": 1,
          "rankName": 6,
          "suitName": "Hearts"
        }
      }
    },
    {
      "createToken": {
        "type": "card-7H",
        "zone": "deck:none",
        "props": {
          "rank": 7,
          "suit": 1,
          "rankName": 7,
          "suitName": "Hearts"
        }
      }
    },
    {
      "createToken": {
        "type": "card-8H",
        "zone": "deck:none",
        "props": {
          "rank": 8,
          "suit": 1,
          "rankName": 8,
          "suitName": "Hearts"
        }
      }
    },
    {
      "createToken": {
        "type": "card-9H",
        "zone": "deck:none",
        "props": {
          "rank": 9,
          "suit": 1,
          "rankName": 9,
          "suitName": "Hearts"
        }
      }
    },
    {
      "createToken": {
        "type": "card-TH",
        "zone": "deck:none",
        "props": {
          "rank": 10,
          "suit": 1,
          "rankName": "Ten",
          "suitName": "Hearts"
        }
      }
    },
    {
      "createToken": {
        "type": "card-JH",
        "zone": "deck:none",
        "props": {
          "rank": 11,
          "suit": 1,
          "rankName": "Jack",
          "suitName": "Hearts"
        }
      }
    },
    {
      "createToken": {
        "type": "card-QH",
        "zone": "deck:none",
        "props": {
          "rank": 12,
          "suit": 1,
          "rankName": "Queen",
          "suitName": "Hearts"
        }
      }
    },
    {
      "createToken": {
        "type": "card-KH",
        "zone": "deck:none",
        "props": {
          "rank": 13,
          "suit": 1,
          "rankName": "King",
          "suitName": "Hearts"
        }
      }
    },
    {
      "createToken": {
        "type": "card-AH",
        "zone": "deck:none",
        "props": {
          "rank": 14,
          "suit": 1,
          "rankName": "Ace",
          "suitName": "Hearts"
        }
      }
    },
    {
      "createToken": {
        "type": "card-2D",
        "zone": "deck:none",
        "props": {
          "rank": 2,
          "suit": 2,
          "rankName": 2,
          "suitName": "Diamonds"
        }
      }
    },
    {
      "createToken": {
        "type": "card-3D",
        "zone": "deck:none",
        "props": {
          "rank": 3,
          "suit": 2,
          "rankName": 3,
          "suitName": "Diamonds"
        }
      }
    },
    {
      "createToken": {
        "type": "card-4D",
        "zone": "deck:none",
        "props": {
          "rank": 4,
          "suit": 2,
          "rankName": 4,
          "suitName": "Diamonds"
        }
      }
    },
    {
      "createToken": {
        "type": "card-5D",
        "zone": "deck:none",
        "props": {
          "rank": 5,
          "suit": 2,
          "rankName": 5,
          "suitName": "Diamonds"
        }
      }
    },
    {
      "createToken": {
        "type": "card-6D",
        "zone": "deck:none",
        "props": {
          "rank": 6,
          "suit": 2,
          "rankName": 6,
          "suitName": "Diamonds"
        }
      }
    },
    {
      "createToken": {
        "type": "card-7D",
        "zone": "deck:none",
        "props": {
          "rank": 7,
          "suit": 2,
          "rankName": 7,
          "suitName": "Diamonds"
        }
      }
    },
    {
      "createToken": {
        "type": "card-8D",
        "zone": "deck:none",
        "props": {
          "rank": 8,
          "suit": 2,
          "rankName": 8,
          "suitName": "Diamonds"
        }
      }
    },
    {
      "createToken": {
        "type": "card-9D",
        "zone": "deck:none",
        "props": {
          "rank": 9,
          "suit": 2,
          "rankName": 9,
          "suitName": "Diamonds"
        }
      }
    },
    {
      "createToken": {
        "type": "card-TD",
        "zone": "deck:none",
        "props": {
          "rank": 10,
          "suit": 2,
          "rankName": "Ten",
          "suitName": "Diamonds"
        }
      }
    },
    {
      "createToken": {
        "type": "card-JD",
        "zone": "deck:none",
        "props": {
          "rank": 11,
          "suit": 2,
          "rankName": "Jack",
          "suitName": "Diamonds"
        }
      }
    },
    {
      "createToken": {
        "type": "card-QD",
        "zone": "deck:none",
        "props": {
          "rank": 12,
          "suit": 2,
          "rankName": "Queen",
          "suitName": "Diamonds"
        }
      }
    },
    {
      "createToken": {
        "type": "card-KD",
        "zone": "deck:none",
        "props": {
          "rank": 13,
          "suit": 2,
          "rankName": "King",
          "suitName": "Diamonds"
        }
      }
    },
    {
      "createToken": {
        "type": "card-AD",
        "zone": "deck:none",
        "props": {
          "rank": 14,
          "suit": 2,
          "rankName": "Ace",
          "suitName": "Diamonds"
        }
      }
    },
    {
      "createToken": {
        "type": "card-2C",
        "zone": "deck:none",
        "props": {
          "rank": 2,
          "suit": 3,
          "rankName": 2,
          "suitName": "Clubs"
        }
      }
    },
    {
      "createToken": {
        "type": "card-3C",
        "zone": "deck:none",
        "props": {
          "rank": 3,
          "suit": 3,
          "rankName": 3,
          "suitName": "Clubs"
        }
      }
    },
    {
      "createToken": {
        "type": "card-4C",
        "zone": "deck:none",
        "props": {
          "rank": 4,
          "suit": 3,
          "rankName": 4,
          "suitName": "Clubs"
        }
      }
    },
    {
      "createToken": {
        "type": "card-5C",
        "zone": "deck:none",
        "props": {
          "rank": 5,
          "suit": 3,
          "rankName": 5,
          "suitName": "Clubs"
        }
      }
    },
    {
      "createToken": {
        "type": "card-6C",
        "zone": "deck:none",
        "props": {
          "rank": 6,
          "suit": 3,
          "rankName": 6,
          "suitName": "Clubs"
        }
      }
    },
    {
      "createToken": {
        "type": "card-7C",
        "zone": "deck:none",
        "props": {
          "rank": 7,
          "suit": 3,
          "rankName": 7,
          "suitName": "Clubs"
        }
      }
    },
    {
      "createToken": {
        "type": "card-8C",
        "zone": "deck:none",
        "props": {
          "rank": 8,
          "suit": 3,
          "rankName": 8,
          "suitName": "Clubs"
        }
      }
    },
    {
      "createToken": {
        "type": "card-9C",
        "zone": "deck:none",
        "props": {
          "rank": 9,
          "suit": 3,
          "rankName": 9,
          "suitName": "Clubs"
        }
      }
    },
    {
      "createToken": {
        "type": "card-TC",
        "zone": "deck:none",
        "props": {
          "rank": 10,
          "suit": 3,
          "rankName": "Ten",
          "suitName": "Clubs"
        }
      }
    },
    {
      "createToken": {
        "type": "card-JC",
        "zone": "deck:none",
        "props": {
          "rank": 11,
          "suit": 3,
          "rankName": "Jack",
          "suitName": "Clubs"
        }
      }
    },
    {
      "createToken": {
        "type": "card-QC",
        "zone": "deck:none",
        "props": {
          "rank": 12,
          "suit": 3,
          "rankName": "Queen",
          "suitName": "Clubs"
        }
      }
    },
    {
      "createToken": {
        "type": "card-KC",
        "zone": "deck:none",
        "props": {
          "rank": 13,
          "suit": 3,
          "rankName": "King",
          "suitName": "Clubs"
        }
      }
    },
    {
      "createToken": {
        "type": "card-AC",
        "zone": "deck:none",
        "props": {
          "rank": 14,
          "suit": 3,
          "rankName": "Ace",
          "suitName": "Clubs"
        }
      }
    },
    {
      "setVar": {
        "scope": "global",
        "var": "activePlayers",
        "value": {
          "aggregate": {
            "op": "count",
            "query": {
              "query": "players"
            }
          }
        }
      }
    },
    {
      "setVar": {
        "scope": "global",
        "var": "dealerSeat",
        "value": {
          "op": "-",
          "left": {
            "aggregate": {
              "op": "count",
              "query": {
                "query": "players"
              }
            }
          },
          "right": 1
        }
      }
    },
    {
      "setVar": {
        "scope": "global",
        "var": "actingPosition",
        "value": 0
      }
    },
    {
      "forEach": {
        "bind": "$player",
        "over": {
          "query": "players"
        },
        "effects": [
          {
            "setVar": {
              "scope": "pvar",
              "player": {
                "chosen": "$player"
              },
              "var": "seatIndex",
              "value": {
                "ref": "binding",
                "name": "$player"
              }
            }
          },
          {
            "setVar": {
              "scope": "pvar",
              "player": {
                "chosen": "$player"
              },
              "var": "chipStack",
              "value": 1000
            }
          },
          {
            "setVar": {
              "scope": "pvar",
              "player": {
                "chosen": "$player"
              },
              "var": "eliminated",
              "value": false
            }
          },
          {
            "setVar": {
              "scope": "pvar",
              "player": {
                "chosen": "$player"
              },
              "var": "handActive",
              "value": true
            }
          },
          {
            "setVar": {
              "scope": "pvar",
              "player": {
                "chosen": "$player"
              },
              "var": "allIn",
              "value": false
            }
          },
          {
            "setVar": {
              "scope": "pvar",
              "player": {
                "chosen": "$player"
              },
              "var": "actedSinceLastFullRaise",
              "value": false
            }
          }
        ]
      }
    }
  ],
  "turnStructure": {
    "phases": [
      {
        "id": "hand-setup",
        "onEnter": [
          {
            "forEach": {
              "bind": "$__macro_find_next_non_eliminated_turnStructure_phases_0__onEnter_0__nextSeat",
              "over": {
                "query": "nextInOrderByCondition",
                "source": {
                  "query": "players"
                },
                "from": {
                  "ref": "gvar",
                  "var": "dealerSeat"
                },
                "bind": "$seatCandidate",
                "where": {
                  "op": "==",
                  "left": {
                    "ref": "pvar",
                    "player": {
                      "chosen": "$seatCandidate"
                    },
                    "var": "eliminated"
                  },
                  "right": false
                }
              },
              "effects": [
                {
                  "setVar": {
                    "scope": "global",
                    "var": "dealerSeat",
                    "value": {
                      "ref": "binding",
                      "name": "$__macro_find_next_non_eliminated_turnStructure_phases_0__onEnter_0__nextSeat"
                    }
                  }
                }
              ]
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "oddChipRemainder",
              "value": 0
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "pot",
              "value": 0
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "currentBet",
              "value": 0
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "lastRaiseSize",
              "value": {
                "ref": "gvar",
                "var": "bigBlind"
              }
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "bettingClosed",
              "value": false
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "handPhase",
              "value": 0
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "preflopBigBlindSeat",
              "value": {
                "ref": "gvar",
                "var": "dealerSeat"
              }
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "preflopBigBlindOptionOpen",
              "value": false
            }
          },
          {
            "forEach": {
              "bind": "$player",
              "over": {
                "query": "players"
              },
              "effects": [
                {
                  "setVar": {
                    "scope": "pvar",
                    "player": {
                      "chosen": "$player"
                    },
                    "var": "streetBet",
                    "value": 0
                  }
                },
                {
                  "setVar": {
                    "scope": "pvar",
                    "player": {
                      "chosen": "$player"
                    },
                    "var": "totalBet",
                    "value": 0
                  }
                },
                {
                  "setVar": {
                    "scope": "pvar",
                    "player": {
                      "chosen": "$player"
                    },
                    "var": "showdownScore",
                    "value": 0
                  }
                },
                {
                  "if": {
                    "when": {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$player"
                        },
                        "var": "eliminated"
                      },
                      "right": false
                    },
                    "then": [
                      {
                        "setVar": {
                          "scope": "pvar",
                          "player": {
                            "chosen": "$player"
                          },
                          "var": "handActive",
                          "value": true
                        }
                      },
                      {
                        "setVar": {
                          "scope": "pvar",
                          "player": {
                            "chosen": "$player"
                          },
                          "var": "allIn",
                          "value": false
                        }
                      },
                      {
                        "setVar": {
                          "scope": "pvar",
                          "player": {
                            "chosen": "$player"
                          },
                          "var": "actedSinceLastFullRaise",
                          "value": false
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            "moveAll": {
              "from": "community:none",
              "to": "muck:none"
            }
          },
          {
            "moveAll": {
              "from": "burn:none",
              "to": "muck:none"
            }
          },
          {
            "forEach": {
              "bind": "$player",
              "over": {
                "query": "players"
              },
              "effects": [
                {
                  "moveAll": {
                    "from": {
                      "zoneExpr": {
                        "concat": [
                          "hand:",
                          {
                            "ref": "binding",
                            "name": "$player"
                          }
                        ]
                      }
                    },
                    "to": "muck:none"
                  }
                }
              ]
            }
          },
          {
            "shuffle": {
              "zone": "deck:none"
            }
          },
          {
            "forEach": {
              "bind": "$player",
              "over": {
                "query": "players"
              },
              "effects": [
                {
                  "if": {
                    "when": {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$player"
                        },
                        "var": "eliminated"
                      },
                      "right": false
                    },
                    "then": [
                      {
                        "draw": {
                          "from": "deck:none",
                          "to": {
                            "zoneExpr": {
                              "concat": [
                                "hand:",
                                {
                                  "ref": "binding",
                                  "name": "$player"
                                }
                              ]
                            }
                          },
                          "count": 2
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            "if": {
              "when": {
                "op": "==",
                "left": {
                  "ref": "gvar",
                  "var": "activePlayers"
                },
                "right": 2
              },
              "then": [
                {
                  "forEach": {
                    "bind": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__bbSeat",
                    "over": {
                      "query": "nextInOrderByCondition",
                      "source": {
                        "query": "players"
                      },
                      "from": {
                        "ref": "gvar",
                        "var": "dealerSeat"
                      },
                      "bind": "$seatCandidate",
                      "where": {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$seatCandidate"
                          },
                          "var": "eliminated"
                        },
                        "right": false
                      }
                    },
                    "effects": [
                      {
                        "let": {
                          "bind": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__dealerSeatBinding",
                          "value": {
                            "ref": "gvar",
                            "var": "dealerSeat"
                          },
                          "in": [
                            {
                              "if": {
                                "when": {
                                  "op": ">",
                                  "left": {
                                    "ref": "gvar",
                                    "var": "ante"
                                  },
                                  "right": 0
                                },
                                "then": [
                                  {
                                    "forEach": {
                                      "bind": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_then_0__forEach_effects_0__let_in_0__player",
                                      "over": {
                                        "query": "players"
                                      },
                                      "effects": [
                                        {
                                          "if": {
                                            "when": {
                                              "op": "==",
                                              "left": {
                                                "ref": "pvar",
                                                "player": {
                                                  "chosen": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_then_0__forEach_effects_0__let_in_0__player"
                                                },
                                                "var": "eliminated"
                                              },
                                              "right": false
                                            },
                                            "then": [
                                              {
                                                "transferVar": {
                                                  "from": {
                                                    "scope": "pvar",
                                                    "var": "chipStack",
                                                    "player": {
                                                      "chosen": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_then_0__forEach_effects_0__let_in_0__player"
                                                    }
                                                  },
                                                  "to": {
                                                    "scope": "global",
                                                    "var": "pot"
                                                  },
                                                  "amount": {
                                                    "ref": "gvar",
                                                    "var": "ante"
                                                  },
                                                  "actualBind": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_then_0__forEach_effects_0__let_in_0__antePaid"
                                                }
                                              },
                                              {
                                                "addVar": {
                                                  "scope": "pvar",
                                                  "player": {
                                                    "chosen": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_then_0__forEach_effects_0__let_in_0__player"
                                                  },
                                                  "var": "totalBet",
                                                  "delta": {
                                                    "ref": "binding",
                                                    "name": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_then_0__forEach_effects_0__let_in_0__antePaid"
                                                  }
                                                }
                                              },
                                              {
                                                "if": {
                                                  "when": {
                                                    "op": "==",
                                                    "left": {
                                                      "ref": "pvar",
                                                      "player": {
                                                        "chosen": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_then_0__forEach_effects_0__let_in_0__player"
                                                      },
                                                      "var": "chipStack"
                                                    },
                                                    "right": 0
                                                  },
                                                  "then": [
                                                    {
                                                      "setVar": {
                                                        "scope": "pvar",
                                                        "player": {
                                                          "chosen": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_then_0__forEach_effects_0__let_in_0__player"
                                                        },
                                                        "var": "allIn",
                                                        "value": true
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      ]
                                    }
                                  }
                                ]
                              }
                            },
                            {
                              "transferVar": {
                                "from": {
                                  "scope": "pvar",
                                  "var": "chipStack",
                                  "player": {
                                    "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__dealerSeatBinding"
                                  }
                                },
                                "to": {
                                  "scope": "global",
                                  "var": "pot"
                                },
                                "amount": {
                                  "ref": "gvar",
                                  "var": "smallBlind"
                                },
                                "actualBind": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_then_0__forEach_effects_0__let_in_0__sbPaid"
                              }
                            },
                            {
                              "addVar": {
                                "scope": "pvar",
                                "player": {
                                  "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__dealerSeatBinding"
                                },
                                "var": "streetBet",
                                "delta": {
                                  "ref": "binding",
                                  "name": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_then_0__forEach_effects_0__let_in_0__sbPaid"
                                }
                              }
                            },
                            {
                              "addVar": {
                                "scope": "pvar",
                                "player": {
                                  "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__dealerSeatBinding"
                                },
                                "var": "totalBet",
                                "delta": {
                                  "ref": "binding",
                                  "name": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_then_0__forEach_effects_0__let_in_0__sbPaid"
                                }
                              }
                            },
                            {
                              "if": {
                                "when": {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__dealerSeatBinding"
                                    },
                                    "var": "chipStack"
                                  },
                                  "right": 0
                                },
                                "then": [
                                  {
                                    "setVar": {
                                      "scope": "pvar",
                                      "player": {
                                        "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__dealerSeatBinding"
                                      },
                                      "var": "allIn",
                                      "value": true
                                    }
                                  }
                                ]
                              }
                            },
                            {
                              "transferVar": {
                                "from": {
                                  "scope": "pvar",
                                  "var": "chipStack",
                                  "player": {
                                    "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__bbSeat"
                                  }
                                },
                                "to": {
                                  "scope": "global",
                                  "var": "pot"
                                },
                                "amount": {
                                  "ref": "gvar",
                                  "var": "bigBlind"
                                },
                                "actualBind": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_then_0__forEach_effects_0__let_in_0__bbPaid"
                              }
                            },
                            {
                              "addVar": {
                                "scope": "pvar",
                                "player": {
                                  "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__bbSeat"
                                },
                                "var": "streetBet",
                                "delta": {
                                  "ref": "binding",
                                  "name": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_then_0__forEach_effects_0__let_in_0__bbPaid"
                                }
                              }
                            },
                            {
                              "addVar": {
                                "scope": "pvar",
                                "player": {
                                  "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__bbSeat"
                                },
                                "var": "totalBet",
                                "delta": {
                                  "ref": "binding",
                                  "name": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_then_0__forEach_effects_0__let_in_0__bbPaid"
                                }
                              }
                            },
                            {
                              "if": {
                                "when": {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__bbSeat"
                                    },
                                    "var": "chipStack"
                                  },
                                  "right": 0
                                },
                                "then": [
                                  {
                                    "setVar": {
                                      "scope": "pvar",
                                      "player": {
                                        "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__bbSeat"
                                      },
                                      "var": "allIn",
                                      "value": true
                                    }
                                  }
                                ]
                              }
                            },
                            {
                              "setVar": {
                                "scope": "global",
                                "var": "currentBet",
                                "value": {
                                  "ref": "gvar",
                                  "var": "bigBlind"
                                }
                              }
                            },
                            {
                              "setVar": {
                                "scope": "global",
                                "var": "lastRaiseSize",
                                "value": {
                                  "ref": "gvar",
                                  "var": "bigBlind"
                                }
                              }
                            },
                            {
                              "setVar": {
                                "scope": "global",
                                "var": "preflopBigBlindSeat",
                                "value": {
                                  "ref": "binding",
                                  "name": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__bbSeat"
                                }
                              }
                            },
                            {
                              "setVar": {
                                "scope": "global",
                                "var": "preflopBigBlindOptionOpen",
                                "value": true
                              }
                            },
                            {
                              "setVar": {
                                "scope": "global",
                                "var": "actingPosition",
                                "value": {
                                  "ref": "binding",
                                  "name": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__dealerSeatBinding"
                                }
                              }
                            },
                            {
                              "setActivePlayer": {
                                "player": {
                                  "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__dealerSeatBinding"
                                }
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ],
              "else": [
                {
                  "forEach": {
                    "bind": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__sbSeat",
                    "over": {
                      "query": "nextInOrderByCondition",
                      "source": {
                        "query": "players"
                      },
                      "from": {
                        "ref": "gvar",
                        "var": "dealerSeat"
                      },
                      "bind": "$seatCandidate",
                      "where": {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$seatCandidate"
                          },
                          "var": "eliminated"
                        },
                        "right": false
                      }
                    },
                    "effects": [
                      {
                        "forEach": {
                          "bind": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__bbSeat",
                          "over": {
                            "query": "nextInOrderByCondition",
                            "source": {
                              "query": "players"
                            },
                            "from": {
                              "ref": "binding",
                              "name": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__sbSeat"
                            },
                            "bind": "$seatCandidate",
                            "where": {
                              "op": "==",
                              "left": {
                                "ref": "pvar",
                                "player": {
                                  "chosen": "$seatCandidate"
                                },
                                "var": "eliminated"
                              },
                              "right": false
                            }
                          },
                          "effects": [
                            {
                              "forEach": {
                                "bind": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__utgSeat",
                                "over": {
                                  "query": "nextInOrderByCondition",
                                  "source": {
                                    "query": "players"
                                  },
                                  "from": {
                                    "ref": "binding",
                                    "name": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__bbSeat"
                                  },
                                  "bind": "$seatCandidate",
                                  "where": {
                                    "op": "==",
                                    "left": {
                                      "ref": "pvar",
                                      "player": {
                                        "chosen": "$seatCandidate"
                                      },
                                      "var": "eliminated"
                                    },
                                    "right": false
                                  }
                                },
                                "effects": [
                                  {
                                    "if": {
                                      "when": {
                                        "op": ">",
                                        "left": {
                                          "ref": "gvar",
                                          "var": "ante"
                                        },
                                        "right": 0
                                      },
                                      "then": [
                                        {
                                          "forEach": {
                                            "bind": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_else_0__forEach_effects_0__forEach_effects_0__forEach_effects_0__player",
                                            "over": {
                                              "query": "players"
                                            },
                                            "effects": [
                                              {
                                                "if": {
                                                  "when": {
                                                    "op": "==",
                                                    "left": {
                                                      "ref": "pvar",
                                                      "player": {
                                                        "chosen": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_else_0__forEach_effects_0__forEach_effects_0__forEach_effects_0__player"
                                                      },
                                                      "var": "eliminated"
                                                    },
                                                    "right": false
                                                  },
                                                  "then": [
                                                    {
                                                      "transferVar": {
                                                        "from": {
                                                          "scope": "pvar",
                                                          "var": "chipStack",
                                                          "player": {
                                                            "chosen": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_else_0__forEach_effects_0__forEach_effects_0__forEach_effects_0__player"
                                                          }
                                                        },
                                                        "to": {
                                                          "scope": "global",
                                                          "var": "pot"
                                                        },
                                                        "amount": {
                                                          "ref": "gvar",
                                                          "var": "ante"
                                                        },
                                                        "actualBind": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_else_0__forEach_effects_0__forEach_effects_0__forEach_effects_0__antePaid"
                                                      }
                                                    },
                                                    {
                                                      "addVar": {
                                                        "scope": "pvar",
                                                        "player": {
                                                          "chosen": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_else_0__forEach_effects_0__forEach_effects_0__forEach_effects_0__player"
                                                        },
                                                        "var": "totalBet",
                                                        "delta": {
                                                          "ref": "binding",
                                                          "name": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_else_0__forEach_effects_0__forEach_effects_0__forEach_effects_0__antePaid"
                                                        }
                                                      }
                                                    },
                                                    {
                                                      "if": {
                                                        "when": {
                                                          "op": "==",
                                                          "left": {
                                                            "ref": "pvar",
                                                            "player": {
                                                              "chosen": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_else_0__forEach_effects_0__forEach_effects_0__forEach_effects_0__player"
                                                            },
                                                            "var": "chipStack"
                                                          },
                                                          "right": 0
                                                        },
                                                        "then": [
                                                          {
                                                            "setVar": {
                                                              "scope": "pvar",
                                                              "player": {
                                                                "chosen": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_else_0__forEach_effects_0__forEach_effects_0__forEach_effects_0__player"
                                                              },
                                                              "var": "allIn",
                                                              "value": true
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  {
                                    "transferVar": {
                                      "from": {
                                        "scope": "pvar",
                                        "var": "chipStack",
                                        "player": {
                                          "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__sbSeat"
                                        }
                                      },
                                      "to": {
                                        "scope": "global",
                                        "var": "pot"
                                      },
                                      "amount": {
                                        "ref": "gvar",
                                        "var": "smallBlind"
                                      },
                                      "actualBind": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_else_0__forEach_effects_0__forEach_effects_0__forEach_effects_0__sbPaid"
                                    }
                                  },
                                  {
                                    "addVar": {
                                      "scope": "pvar",
                                      "player": {
                                        "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__sbSeat"
                                      },
                                      "var": "streetBet",
                                      "delta": {
                                        "ref": "binding",
                                        "name": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_else_0__forEach_effects_0__forEach_effects_0__forEach_effects_0__sbPaid"
                                      }
                                    }
                                  },
                                  {
                                    "addVar": {
                                      "scope": "pvar",
                                      "player": {
                                        "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__sbSeat"
                                      },
                                      "var": "totalBet",
                                      "delta": {
                                        "ref": "binding",
                                        "name": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_else_0__forEach_effects_0__forEach_effects_0__forEach_effects_0__sbPaid"
                                      }
                                    }
                                  },
                                  {
                                    "if": {
                                      "when": {
                                        "op": "==",
                                        "left": {
                                          "ref": "pvar",
                                          "player": {
                                            "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__sbSeat"
                                          },
                                          "var": "chipStack"
                                        },
                                        "right": 0
                                      },
                                      "then": [
                                        {
                                          "setVar": {
                                            "scope": "pvar",
                                            "player": {
                                              "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__sbSeat"
                                            },
                                            "var": "allIn",
                                            "value": true
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  {
                                    "transferVar": {
                                      "from": {
                                        "scope": "pvar",
                                        "var": "chipStack",
                                        "player": {
                                          "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__bbSeat"
                                        }
                                      },
                                      "to": {
                                        "scope": "global",
                                        "var": "pot"
                                      },
                                      "amount": {
                                        "ref": "gvar",
                                        "var": "bigBlind"
                                      },
                                      "actualBind": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_else_0__forEach_effects_0__forEach_effects_0__forEach_effects_0__bbPaid"
                                    }
                                  },
                                  {
                                    "addVar": {
                                      "scope": "pvar",
                                      "player": {
                                        "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__bbSeat"
                                      },
                                      "var": "streetBet",
                                      "delta": {
                                        "ref": "binding",
                                        "name": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_else_0__forEach_effects_0__forEach_effects_0__forEach_effects_0__bbPaid"
                                      }
                                    }
                                  },
                                  {
                                    "addVar": {
                                      "scope": "pvar",
                                      "player": {
                                        "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__bbSeat"
                                      },
                                      "var": "totalBet",
                                      "delta": {
                                        "ref": "binding",
                                        "name": "$__macro_collect_forced_bets_turnStructure_phases_0__onEnter_15__macro_post_forced_bets_and_set_preflop_actor__0__if_else_0__forEach_effects_0__forEach_effects_0__forEach_effects_0__bbPaid"
                                      }
                                    }
                                  },
                                  {
                                    "if": {
                                      "when": {
                                        "op": "==",
                                        "left": {
                                          "ref": "pvar",
                                          "player": {
                                            "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__bbSeat"
                                          },
                                          "var": "chipStack"
                                        },
                                        "right": 0
                                      },
                                      "then": [
                                        {
                                          "setVar": {
                                            "scope": "pvar",
                                            "player": {
                                              "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__bbSeat"
                                            },
                                            "var": "allIn",
                                            "value": true
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  {
                                    "setVar": {
                                      "scope": "global",
                                      "var": "currentBet",
                                      "value": {
                                        "ref": "gvar",
                                        "var": "bigBlind"
                                      }
                                    }
                                  },
                                  {
                                    "setVar": {
                                      "scope": "global",
                                      "var": "lastRaiseSize",
                                      "value": {
                                        "ref": "gvar",
                                        "var": "bigBlind"
                                      }
                                    }
                                  },
                                  {
                                    "setVar": {
                                      "scope": "global",
                                      "var": "preflopBigBlindSeat",
                                      "value": {
                                        "ref": "binding",
                                        "name": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__bbSeat"
                                      }
                                    }
                                  },
                                  {
                                    "setVar": {
                                      "scope": "global",
                                      "var": "preflopBigBlindOptionOpen",
                                      "value": true
                                    }
                                  },
                                  {
                                    "setVar": {
                                      "scope": "global",
                                      "var": "actingPosition",
                                      "value": {
                                        "ref": "binding",
                                        "name": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__utgSeat"
                                      }
                                    }
                                  },
                                  {
                                    "setActivePlayer": {
                                      "player": {
                                        "chosen": "$__macro_post_forced_bets_and_set_preflop_actor_turnStructure_phases_0__onEnter_15__utgSeat"
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            "gotoPhaseExact": {
              "phase": "preflop"
            }
          }
        ]
      },
      {
        "id": "preflop",
        "onEnter": [
          {
            "setVar": {
              "scope": "global",
              "var": "handPhase",
              "value": 0
            }
          },
          {
            "if": {
              "when": {
                "op": "<=",
                "left": {
                  "aggregate": {
                    "op": "sum",
                    "query": {
                      "query": "players"
                    },
                    "bind": "$player",
                    "valueExpr": {
                      "if": {
                        "when": {
                          "op": "and",
                          "args": [
                            {
                              "op": "==",
                              "left": {
                                "ref": "pvar",
                                "player": {
                                  "chosen": "$player"
                                },
                                "var": "handActive"
                              },
                              "right": true
                            },
                            {
                              "op": "==",
                              "left": {
                                "ref": "pvar",
                                "player": {
                                  "chosen": "$player"
                                },
                                "var": "eliminated"
                              },
                              "right": false
                            }
                          ]
                        },
                        "then": 1,
                        "else": 0
                      }
                    }
                  }
                },
                "right": 1
              },
              "then": [
                {
                  "gotoPhaseExact": {
                    "phase": "showdown"
                  }
                }
              ]
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "bettingClosed",
              "value": true
            }
          },
          {
            "forEach": {
              "bind": "$__macro_find_next_to_act_turnStructure_phases_1__onEnter_2__nextSeat",
              "over": {
                "query": "nextInOrderByCondition",
                "source": {
                  "query": "players"
                },
                "from": {
                  "if": {
                    "when": {
                      "op": "==",
                      "left": {
                        "ref": "gvar",
                        "var": "actingPosition"
                      },
                      "right": 0
                    },
                    "then": {
                      "op": "-",
                      "left": {
                        "aggregate": {
                          "op": "count",
                          "query": {
                            "query": "players"
                          }
                        }
                      },
                      "right": 1
                    },
                    "else": {
                      "op": "-",
                      "left": {
                        "ref": "gvar",
                        "var": "actingPosition"
                      },
                      "right": 1
                    }
                  }
                },
                "bind": "$seatCandidate",
                "where": {
                  "op": "and",
                  "args": [
                    {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$seatCandidate"
                        },
                        "var": "eliminated"
                      },
                      "right": false
                    },
                    {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$seatCandidate"
                        },
                        "var": "handActive"
                      },
                      "right": true
                    },
                    {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$seatCandidate"
                        },
                        "var": "allIn"
                      },
                      "right": false
                    }
                  ]
                }
              },
              "effects": [
                {
                  "setVar": {
                    "scope": "global",
                    "var": "bettingClosed",
                    "value": false
                  }
                },
                {
                  "setVar": {
                    "scope": "global",
                    "var": "actingPosition",
                    "value": {
                      "ref": "binding",
                      "name": "$__macro_find_next_to_act_turnStructure_phases_1__onEnter_2__nextSeat"
                    }
                  }
                },
                {
                  "setActivePlayer": {
                    "player": {
                      "chosen": "$__macro_find_next_to_act_turnStructure_phases_1__onEnter_2__nextSeat"
                    }
                  }
                }
              ]
            }
          },
          {
            "if": {
              "when": {
                "op": "==",
                "left": {
                  "ref": "gvar",
                  "var": "bettingClosed"
                },
                "right": true
              },
              "then": [
                {
                  "if": {
                    "when": {
                      "op": "==",
                      "left": {
                        "ref": "gvar",
                        "var": "bettingClosed"
                      },
                      "right": false
                    },
                    "then": [
                      {
                        "setVar": {
                          "scope": "global",
                          "var": "bettingClosed",
                          "value": true
                        }
                      },
                      {
                        "forEach": {
                          "bind": "$__macro_find_next_to_act_turnStructure_phases_1__onEnter_3__if_then_0__macro_advance_after_betting__0__if_then_0__nextSeat",
                          "over": {
                            "query": "nextInOrderByCondition",
                            "source": {
                              "query": "players"
                            },
                            "from": {
                              "ref": "gvar",
                              "var": "actingPosition"
                            },
                            "bind": "$seatCandidate",
                            "where": {
                              "op": "and",
                              "args": [
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$seatCandidate"
                                    },
                                    "var": "eliminated"
                                  },
                                  "right": false
                                },
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$seatCandidate"
                                    },
                                    "var": "handActive"
                                  },
                                  "right": true
                                },
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$seatCandidate"
                                    },
                                    "var": "allIn"
                                  },
                                  "right": false
                                }
                              ]
                            }
                          },
                          "effects": [
                            {
                              "setVar": {
                                "scope": "global",
                                "var": "bettingClosed",
                                "value": false
                              }
                            },
                            {
                              "setVar": {
                                "scope": "global",
                                "var": "actingPosition",
                                "value": {
                                  "ref": "binding",
                                  "name": "$__macro_find_next_to_act_turnStructure_phases_1__onEnter_3__if_then_0__macro_advance_after_betting__0__if_then_0__nextSeat"
                                }
                              }
                            },
                            {
                              "setActivePlayer": {
                                "player": {
                                  "chosen": "$__macro_find_next_to_act_turnStructure_phases_1__onEnter_3__if_then_0__macro_advance_after_betting__0__if_then_0__nextSeat"
                                }
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                },
                {
                  "if": {
                    "when": {
                      "op": "<=",
                      "left": {
                        "aggregate": {
                          "op": "sum",
                          "query": {
                            "query": "players"
                          },
                          "bind": "$__macro_advance_after_betting_turnStructure_phases_1__onEnter_3__if_then_0__player",
                          "valueExpr": {
                            "if": {
                              "when": {
                                "op": "and",
                                "args": [
                                  {
                                    "op": "==",
                                    "left": {
                                      "ref": "pvar",
                                      "player": {
                                        "chosen": "$__macro_advance_after_betting_turnStructure_phases_1__onEnter_3__if_then_0__player"
                                      },
                                      "var": "handActive"
                                    },
                                    "right": true
                                  },
                                  {
                                    "op": "==",
                                    "left": {
                                      "ref": "pvar",
                                      "player": {
                                        "chosen": "$__macro_advance_after_betting_turnStructure_phases_1__onEnter_3__if_then_0__player"
                                      },
                                      "var": "eliminated"
                                    },
                                    "right": false
                                  }
                                ]
                              },
                              "then": 1,
                              "else": 0
                            }
                          }
                        }
                      },
                      "right": 1
                    },
                    "then": [
                      {
                        "gotoPhaseExact": {
                          "phase": "showdown"
                        }
                      }
                    ]
                  }
                },
                {
                  "if": {
                    "when": {
                      "op": "and",
                      "args": [
                        {
                          "op": "==",
                          "left": {
                            "ref": "gvar",
                            "var": "bettingClosed"
                          },
                          "right": true
                        },
                        {
                          "op": "not",
                          "arg": {
                            "op": "<=",
                            "left": {
                              "aggregate": {
                                "op": "sum",
                                "query": {
                                  "query": "players"
                                },
                                "bind": "$__macro_advance_after_betting_turnStructure_phases_1__onEnter_3__if_then_0__player",
                                "valueExpr": {
                                  "if": {
                                    "when": {
                                      "op": "and",
                                      "args": [
                                        {
                                          "op": "==",
                                          "left": {
                                            "ref": "pvar",
                                            "player": {
                                              "chosen": "$__macro_advance_after_betting_turnStructure_phases_1__onEnter_3__if_then_0__player"
                                            },
                                            "var": "handActive"
                                          },
                                          "right": true
                                        },
                                        {
                                          "op": "==",
                                          "left": {
                                            "ref": "pvar",
                                            "player": {
                                              "chosen": "$__macro_advance_after_betting_turnStructure_phases_1__onEnter_3__if_then_0__player"
                                            },
                                            "var": "eliminated"
                                          },
                                          "right": false
                                        }
                                      ]
                                    },
                                    "then": 1,
                                    "else": 0
                                  }
                                }
                              }
                            },
                            "right": 1
                          }
                        }
                      ]
                    },
                    "then": [
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 0
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "flop"
                              }
                            }
                          ]
                        }
                      },
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 1
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "turn"
                              }
                            }
                          ]
                        }
                      },
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 2
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "river"
                              }
                            }
                          ]
                        }
                      },
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 3
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "showdown"
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
      },
      {
        "id": "flop",
        "onEnter": [
          {
            "setVar": {
              "scope": "global",
              "var": "handPhase",
              "value": 1
            }
          },
          {
            "draw": {
              "from": "deck:none",
              "to": "burn:none",
              "count": 1
            }
          },
          {
            "draw": {
              "from": "deck:none",
              "to": "community:none",
              "count": 3
            }
          },
          {
            "forEach": {
              "bind": "$__macro_reset_reopen_state_for_live_seats_turnStructure_phases_2__onEnter_2__player",
              "over": {
                "query": "players"
              },
              "effects": [
                {
                  "if": {
                    "when": {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$__macro_reset_reopen_state_for_live_seats_turnStructure_phases_2__onEnter_2__player"
                        },
                        "var": "eliminated"
                      },
                      "right": false
                    },
                    "then": [
                      {
                        "setVar": {
                          "scope": "pvar",
                          "player": {
                            "chosen": "$__macro_reset_reopen_state_for_live_seats_turnStructure_phases_2__onEnter_2__player"
                          },
                          "var": "actedSinceLastFullRaise",
                          "value": false
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            "forEach": {
              "bind": "$player",
              "over": {
                "query": "players"
              },
              "effects": [
                {
                  "if": {
                    "when": {
                      "op": "and",
                      "args": [
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$player"
                            },
                            "var": "handActive"
                          },
                          "right": true
                        },
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$player"
                            },
                            "var": "allIn"
                          },
                          "right": false
                        }
                      ]
                    },
                    "then": [
                      {
                        "setVar": {
                          "scope": "pvar",
                          "player": {
                            "chosen": "$player"
                          },
                          "var": "streetBet",
                          "value": 0
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "currentBet",
              "value": 0
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "bettingClosed",
              "value": false
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "bettingClosed",
              "value": true
            }
          },
          {
            "forEach": {
              "bind": "$__macro_find_next_to_act_turnStructure_phases_2__onEnter_6__nextSeat",
              "over": {
                "query": "nextInOrderByCondition",
                "source": {
                  "query": "players"
                },
                "from": {
                  "ref": "gvar",
                  "var": "dealerSeat"
                },
                "bind": "$seatCandidate",
                "where": {
                  "op": "and",
                  "args": [
                    {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$seatCandidate"
                        },
                        "var": "eliminated"
                      },
                      "right": false
                    },
                    {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$seatCandidate"
                        },
                        "var": "handActive"
                      },
                      "right": true
                    },
                    {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$seatCandidate"
                        },
                        "var": "allIn"
                      },
                      "right": false
                    }
                  ]
                }
              },
              "effects": [
                {
                  "setVar": {
                    "scope": "global",
                    "var": "bettingClosed",
                    "value": false
                  }
                },
                {
                  "setVar": {
                    "scope": "global",
                    "var": "actingPosition",
                    "value": {
                      "ref": "binding",
                      "name": "$__macro_find_next_to_act_turnStructure_phases_2__onEnter_6__nextSeat"
                    }
                  }
                },
                {
                  "setActivePlayer": {
                    "player": {
                      "chosen": "$__macro_find_next_to_act_turnStructure_phases_2__onEnter_6__nextSeat"
                    }
                  }
                }
              ]
            }
          },
          {
            "if": {
              "when": {
                "op": "==",
                "left": {
                  "ref": "gvar",
                  "var": "bettingClosed"
                },
                "right": true
              },
              "then": [
                {
                  "if": {
                    "when": {
                      "op": "==",
                      "left": {
                        "ref": "gvar",
                        "var": "bettingClosed"
                      },
                      "right": false
                    },
                    "then": [
                      {
                        "setVar": {
                          "scope": "global",
                          "var": "bettingClosed",
                          "value": true
                        }
                      },
                      {
                        "forEach": {
                          "bind": "$__macro_find_next_to_act_turnStructure_phases_2__onEnter_7__if_then_0__macro_advance_after_betting__0__if_then_0__nextSeat",
                          "over": {
                            "query": "nextInOrderByCondition",
                            "source": {
                              "query": "players"
                            },
                            "from": {
                              "ref": "gvar",
                              "var": "actingPosition"
                            },
                            "bind": "$seatCandidate",
                            "where": {
                              "op": "and",
                              "args": [
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$seatCandidate"
                                    },
                                    "var": "eliminated"
                                  },
                                  "right": false
                                },
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$seatCandidate"
                                    },
                                    "var": "handActive"
                                  },
                                  "right": true
                                },
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$seatCandidate"
                                    },
                                    "var": "allIn"
                                  },
                                  "right": false
                                }
                              ]
                            }
                          },
                          "effects": [
                            {
                              "setVar": {
                                "scope": "global",
                                "var": "bettingClosed",
                                "value": false
                              }
                            },
                            {
                              "setVar": {
                                "scope": "global",
                                "var": "actingPosition",
                                "value": {
                                  "ref": "binding",
                                  "name": "$__macro_find_next_to_act_turnStructure_phases_2__onEnter_7__if_then_0__macro_advance_after_betting__0__if_then_0__nextSeat"
                                }
                              }
                            },
                            {
                              "setActivePlayer": {
                                "player": {
                                  "chosen": "$__macro_find_next_to_act_turnStructure_phases_2__onEnter_7__if_then_0__macro_advance_after_betting__0__if_then_0__nextSeat"
                                }
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                },
                {
                  "if": {
                    "when": {
                      "op": "<=",
                      "left": {
                        "aggregate": {
                          "op": "sum",
                          "query": {
                            "query": "players"
                          },
                          "bind": "$__macro_advance_after_betting_turnStructure_phases_2__onEnter_7__if_then_0__player",
                          "valueExpr": {
                            "if": {
                              "when": {
                                "op": "and",
                                "args": [
                                  {
                                    "op": "==",
                                    "left": {
                                      "ref": "pvar",
                                      "player": {
                                        "chosen": "$__macro_advance_after_betting_turnStructure_phases_2__onEnter_7__if_then_0__player"
                                      },
                                      "var": "handActive"
                                    },
                                    "right": true
                                  },
                                  {
                                    "op": "==",
                                    "left": {
                                      "ref": "pvar",
                                      "player": {
                                        "chosen": "$__macro_advance_after_betting_turnStructure_phases_2__onEnter_7__if_then_0__player"
                                      },
                                      "var": "eliminated"
                                    },
                                    "right": false
                                  }
                                ]
                              },
                              "then": 1,
                              "else": 0
                            }
                          }
                        }
                      },
                      "right": 1
                    },
                    "then": [
                      {
                        "gotoPhaseExact": {
                          "phase": "showdown"
                        }
                      }
                    ]
                  }
                },
                {
                  "if": {
                    "when": {
                      "op": "and",
                      "args": [
                        {
                          "op": "==",
                          "left": {
                            "ref": "gvar",
                            "var": "bettingClosed"
                          },
                          "right": true
                        },
                        {
                          "op": "not",
                          "arg": {
                            "op": "<=",
                            "left": {
                              "aggregate": {
                                "op": "sum",
                                "query": {
                                  "query": "players"
                                },
                                "bind": "$__macro_advance_after_betting_turnStructure_phases_2__onEnter_7__if_then_0__player",
                                "valueExpr": {
                                  "if": {
                                    "when": {
                                      "op": "and",
                                      "args": [
                                        {
                                          "op": "==",
                                          "left": {
                                            "ref": "pvar",
                                            "player": {
                                              "chosen": "$__macro_advance_after_betting_turnStructure_phases_2__onEnter_7__if_then_0__player"
                                            },
                                            "var": "handActive"
                                          },
                                          "right": true
                                        },
                                        {
                                          "op": "==",
                                          "left": {
                                            "ref": "pvar",
                                            "player": {
                                              "chosen": "$__macro_advance_after_betting_turnStructure_phases_2__onEnter_7__if_then_0__player"
                                            },
                                            "var": "eliminated"
                                          },
                                          "right": false
                                        }
                                      ]
                                    },
                                    "then": 1,
                                    "else": 0
                                  }
                                }
                              }
                            },
                            "right": 1
                          }
                        }
                      ]
                    },
                    "then": [
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 0
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "flop"
                              }
                            }
                          ]
                        }
                      },
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 1
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "turn"
                              }
                            }
                          ]
                        }
                      },
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 2
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "river"
                              }
                            }
                          ]
                        }
                      },
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 3
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "showdown"
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
      },
      {
        "id": "turn",
        "onEnter": [
          {
            "setVar": {
              "scope": "global",
              "var": "handPhase",
              "value": 2
            }
          },
          {
            "draw": {
              "from": "deck:none",
              "to": "burn:none",
              "count": 1
            }
          },
          {
            "draw": {
              "from": "deck:none",
              "to": "community:none",
              "count": 1
            }
          },
          {
            "forEach": {
              "bind": "$__macro_reset_reopen_state_for_live_seats_turnStructure_phases_3__onEnter_2__player",
              "over": {
                "query": "players"
              },
              "effects": [
                {
                  "if": {
                    "when": {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$__macro_reset_reopen_state_for_live_seats_turnStructure_phases_3__onEnter_2__player"
                        },
                        "var": "eliminated"
                      },
                      "right": false
                    },
                    "then": [
                      {
                        "setVar": {
                          "scope": "pvar",
                          "player": {
                            "chosen": "$__macro_reset_reopen_state_for_live_seats_turnStructure_phases_3__onEnter_2__player"
                          },
                          "var": "actedSinceLastFullRaise",
                          "value": false
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            "forEach": {
              "bind": "$player",
              "over": {
                "query": "players"
              },
              "effects": [
                {
                  "if": {
                    "when": {
                      "op": "and",
                      "args": [
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$player"
                            },
                            "var": "handActive"
                          },
                          "right": true
                        },
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$player"
                            },
                            "var": "allIn"
                          },
                          "right": false
                        }
                      ]
                    },
                    "then": [
                      {
                        "setVar": {
                          "scope": "pvar",
                          "player": {
                            "chosen": "$player"
                          },
                          "var": "streetBet",
                          "value": 0
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "currentBet",
              "value": 0
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "bettingClosed",
              "value": false
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "bettingClosed",
              "value": true
            }
          },
          {
            "forEach": {
              "bind": "$__macro_find_next_to_act_turnStructure_phases_3__onEnter_6__nextSeat",
              "over": {
                "query": "nextInOrderByCondition",
                "source": {
                  "query": "players"
                },
                "from": {
                  "ref": "gvar",
                  "var": "dealerSeat"
                },
                "bind": "$seatCandidate",
                "where": {
                  "op": "and",
                  "args": [
                    {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$seatCandidate"
                        },
                        "var": "eliminated"
                      },
                      "right": false
                    },
                    {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$seatCandidate"
                        },
                        "var": "handActive"
                      },
                      "right": true
                    },
                    {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$seatCandidate"
                        },
                        "var": "allIn"
                      },
                      "right": false
                    }
                  ]
                }
              },
              "effects": [
                {
                  "setVar": {
                    "scope": "global",
                    "var": "bettingClosed",
                    "value": false
                  }
                },
                {
                  "setVar": {
                    "scope": "global",
                    "var": "actingPosition",
                    "value": {
                      "ref": "binding",
                      "name": "$__macro_find_next_to_act_turnStructure_phases_3__onEnter_6__nextSeat"
                    }
                  }
                },
                {
                  "setActivePlayer": {
                    "player": {
                      "chosen": "$__macro_find_next_to_act_turnStructure_phases_3__onEnter_6__nextSeat"
                    }
                  }
                }
              ]
            }
          },
          {
            "if": {
              "when": {
                "op": "==",
                "left": {
                  "ref": "gvar",
                  "var": "bettingClosed"
                },
                "right": true
              },
              "then": [
                {
                  "if": {
                    "when": {
                      "op": "==",
                      "left": {
                        "ref": "gvar",
                        "var": "bettingClosed"
                      },
                      "right": false
                    },
                    "then": [
                      {
                        "setVar": {
                          "scope": "global",
                          "var": "bettingClosed",
                          "value": true
                        }
                      },
                      {
                        "forEach": {
                          "bind": "$__macro_find_next_to_act_turnStructure_phases_3__onEnter_7__if_then_0__macro_advance_after_betting__0__if_then_0__nextSeat",
                          "over": {
                            "query": "nextInOrderByCondition",
                            "source": {
                              "query": "players"
                            },
                            "from": {
                              "ref": "gvar",
                              "var": "actingPosition"
                            },
                            "bind": "$seatCandidate",
                            "where": {
                              "op": "and",
                              "args": [
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$seatCandidate"
                                    },
                                    "var": "eliminated"
                                  },
                                  "right": false
                                },
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$seatCandidate"
                                    },
                                    "var": "handActive"
                                  },
                                  "right": true
                                },
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$seatCandidate"
                                    },
                                    "var": "allIn"
                                  },
                                  "right": false
                                }
                              ]
                            }
                          },
                          "effects": [
                            {
                              "setVar": {
                                "scope": "global",
                                "var": "bettingClosed",
                                "value": false
                              }
                            },
                            {
                              "setVar": {
                                "scope": "global",
                                "var": "actingPosition",
                                "value": {
                                  "ref": "binding",
                                  "name": "$__macro_find_next_to_act_turnStructure_phases_3__onEnter_7__if_then_0__macro_advance_after_betting__0__if_then_0__nextSeat"
                                }
                              }
                            },
                            {
                              "setActivePlayer": {
                                "player": {
                                  "chosen": "$__macro_find_next_to_act_turnStructure_phases_3__onEnter_7__if_then_0__macro_advance_after_betting__0__if_then_0__nextSeat"
                                }
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                },
                {
                  "if": {
                    "when": {
                      "op": "<=",
                      "left": {
                        "aggregate": {
                          "op": "sum",
                          "query": {
                            "query": "players"
                          },
                          "bind": "$__macro_advance_after_betting_turnStructure_phases_3__onEnter_7__if_then_0__player",
                          "valueExpr": {
                            "if": {
                              "when": {
                                "op": "and",
                                "args": [
                                  {
                                    "op": "==",
                                    "left": {
                                      "ref": "pvar",
                                      "player": {
                                        "chosen": "$__macro_advance_after_betting_turnStructure_phases_3__onEnter_7__if_then_0__player"
                                      },
                                      "var": "handActive"
                                    },
                                    "right": true
                                  },
                                  {
                                    "op": "==",
                                    "left": {
                                      "ref": "pvar",
                                      "player": {
                                        "chosen": "$__macro_advance_after_betting_turnStructure_phases_3__onEnter_7__if_then_0__player"
                                      },
                                      "var": "eliminated"
                                    },
                                    "right": false
                                  }
                                ]
                              },
                              "then": 1,
                              "else": 0
                            }
                          }
                        }
                      },
                      "right": 1
                    },
                    "then": [
                      {
                        "gotoPhaseExact": {
                          "phase": "showdown"
                        }
                      }
                    ]
                  }
                },
                {
                  "if": {
                    "when": {
                      "op": "and",
                      "args": [
                        {
                          "op": "==",
                          "left": {
                            "ref": "gvar",
                            "var": "bettingClosed"
                          },
                          "right": true
                        },
                        {
                          "op": "not",
                          "arg": {
                            "op": "<=",
                            "left": {
                              "aggregate": {
                                "op": "sum",
                                "query": {
                                  "query": "players"
                                },
                                "bind": "$__macro_advance_after_betting_turnStructure_phases_3__onEnter_7__if_then_0__player",
                                "valueExpr": {
                                  "if": {
                                    "when": {
                                      "op": "and",
                                      "args": [
                                        {
                                          "op": "==",
                                          "left": {
                                            "ref": "pvar",
                                            "player": {
                                              "chosen": "$__macro_advance_after_betting_turnStructure_phases_3__onEnter_7__if_then_0__player"
                                            },
                                            "var": "handActive"
                                          },
                                          "right": true
                                        },
                                        {
                                          "op": "==",
                                          "left": {
                                            "ref": "pvar",
                                            "player": {
                                              "chosen": "$__macro_advance_after_betting_turnStructure_phases_3__onEnter_7__if_then_0__player"
                                            },
                                            "var": "eliminated"
                                          },
                                          "right": false
                                        }
                                      ]
                                    },
                                    "then": 1,
                                    "else": 0
                                  }
                                }
                              }
                            },
                            "right": 1
                          }
                        }
                      ]
                    },
                    "then": [
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 0
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "flop"
                              }
                            }
                          ]
                        }
                      },
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 1
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "turn"
                              }
                            }
                          ]
                        }
                      },
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 2
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "river"
                              }
                            }
                          ]
                        }
                      },
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 3
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "showdown"
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
      },
      {
        "id": "river",
        "onEnter": [
          {
            "setVar": {
              "scope": "global",
              "var": "handPhase",
              "value": 3
            }
          },
          {
            "draw": {
              "from": "deck:none",
              "to": "burn:none",
              "count": 1
            }
          },
          {
            "draw": {
              "from": "deck:none",
              "to": "community:none",
              "count": 1
            }
          },
          {
            "forEach": {
              "bind": "$__macro_reset_reopen_state_for_live_seats_turnStructure_phases_4__onEnter_2__player",
              "over": {
                "query": "players"
              },
              "effects": [
                {
                  "if": {
                    "when": {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$__macro_reset_reopen_state_for_live_seats_turnStructure_phases_4__onEnter_2__player"
                        },
                        "var": "eliminated"
                      },
                      "right": false
                    },
                    "then": [
                      {
                        "setVar": {
                          "scope": "pvar",
                          "player": {
                            "chosen": "$__macro_reset_reopen_state_for_live_seats_turnStructure_phases_4__onEnter_2__player"
                          },
                          "var": "actedSinceLastFullRaise",
                          "value": false
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            "forEach": {
              "bind": "$player",
              "over": {
                "query": "players"
              },
              "effects": [
                {
                  "if": {
                    "when": {
                      "op": "and",
                      "args": [
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$player"
                            },
                            "var": "handActive"
                          },
                          "right": true
                        },
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$player"
                            },
                            "var": "allIn"
                          },
                          "right": false
                        }
                      ]
                    },
                    "then": [
                      {
                        "setVar": {
                          "scope": "pvar",
                          "player": {
                            "chosen": "$player"
                          },
                          "var": "streetBet",
                          "value": 0
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "currentBet",
              "value": 0
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "bettingClosed",
              "value": false
            }
          },
          {
            "setVar": {
              "scope": "global",
              "var": "bettingClosed",
              "value": true
            }
          },
          {
            "forEach": {
              "bind": "$__macro_find_next_to_act_turnStructure_phases_4__onEnter_6__nextSeat",
              "over": {
                "query": "nextInOrderByCondition",
                "source": {
                  "query": "players"
                },
                "from": {
                  "ref": "gvar",
                  "var": "dealerSeat"
                },
                "bind": "$seatCandidate",
                "where": {
                  "op": "and",
                  "args": [
                    {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$seatCandidate"
                        },
                        "var": "eliminated"
                      },
                      "right": false
                    },
                    {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$seatCandidate"
                        },
                        "var": "handActive"
                      },
                      "right": true
                    },
                    {
                      "op": "==",
                      "left": {
                        "ref": "pvar",
                        "player": {
                          "chosen": "$seatCandidate"
                        },
                        "var": "allIn"
                      },
                      "right": false
                    }
                  ]
                }
              },
              "effects": [
                {
                  "setVar": {
                    "scope": "global",
                    "var": "bettingClosed",
                    "value": false
                  }
                },
                {
                  "setVar": {
                    "scope": "global",
                    "var": "actingPosition",
                    "value": {
                      "ref": "binding",
                      "name": "$__macro_find_next_to_act_turnStructure_phases_4__onEnter_6__nextSeat"
                    }
                  }
                },
                {
                  "setActivePlayer": {
                    "player": {
                      "chosen": "$__macro_find_next_to_act_turnStructure_phases_4__onEnter_6__nextSeat"
                    }
                  }
                }
              ]
            }
          },
          {
            "if": {
              "when": {
                "op": "==",
                "left": {
                  "ref": "gvar",
                  "var": "bettingClosed"
                },
                "right": true
              },
              "then": [
                {
                  "if": {
                    "when": {
                      "op": "==",
                      "left": {
                        "ref": "gvar",
                        "var": "bettingClosed"
                      },
                      "right": false
                    },
                    "then": [
                      {
                        "setVar": {
                          "scope": "global",
                          "var": "bettingClosed",
                          "value": true
                        }
                      },
                      {
                        "forEach": {
                          "bind": "$__macro_find_next_to_act_turnStructure_phases_4__onEnter_7__if_then_0__macro_advance_after_betting__0__if_then_0__nextSeat",
                          "over": {
                            "query": "nextInOrderByCondition",
                            "source": {
                              "query": "players"
                            },
                            "from": {
                              "ref": "gvar",
                              "var": "actingPosition"
                            },
                            "bind": "$seatCandidate",
                            "where": {
                              "op": "and",
                              "args": [
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$seatCandidate"
                                    },
                                    "var": "eliminated"
                                  },
                                  "right": false
                                },
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$seatCandidate"
                                    },
                                    "var": "handActive"
                                  },
                                  "right": true
                                },
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$seatCandidate"
                                    },
                                    "var": "allIn"
                                  },
                                  "right": false
                                }
                              ]
                            }
                          },
                          "effects": [
                            {
                              "setVar": {
                                "scope": "global",
                                "var": "bettingClosed",
                                "value": false
                              }
                            },
                            {
                              "setVar": {
                                "scope": "global",
                                "var": "actingPosition",
                                "value": {
                                  "ref": "binding",
                                  "name": "$__macro_find_next_to_act_turnStructure_phases_4__onEnter_7__if_then_0__macro_advance_after_betting__0__if_then_0__nextSeat"
                                }
                              }
                            },
                            {
                              "setActivePlayer": {
                                "player": {
                                  "chosen": "$__macro_find_next_to_act_turnStructure_phases_4__onEnter_7__if_then_0__macro_advance_after_betting__0__if_then_0__nextSeat"
                                }
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                },
                {
                  "if": {
                    "when": {
                      "op": "<=",
                      "left": {
                        "aggregate": {
                          "op": "sum",
                          "query": {
                            "query": "players"
                          },
                          "bind": "$__macro_advance_after_betting_turnStructure_phases_4__onEnter_7__if_then_0__player",
                          "valueExpr": {
                            "if": {
                              "when": {
                                "op": "and",
                                "args": [
                                  {
                                    "op": "==",
                                    "left": {
                                      "ref": "pvar",
                                      "player": {
                                        "chosen": "$__macro_advance_after_betting_turnStructure_phases_4__onEnter_7__if_then_0__player"
                                      },
                                      "var": "handActive"
                                    },
                                    "right": true
                                  },
                                  {
                                    "op": "==",
                                    "left": {
                                      "ref": "pvar",
                                      "player": {
                                        "chosen": "$__macro_advance_after_betting_turnStructure_phases_4__onEnter_7__if_then_0__player"
                                      },
                                      "var": "eliminated"
                                    },
                                    "right": false
                                  }
                                ]
                              },
                              "then": 1,
                              "else": 0
                            }
                          }
                        }
                      },
                      "right": 1
                    },
                    "then": [
                      {
                        "gotoPhaseExact": {
                          "phase": "showdown"
                        }
                      }
                    ]
                  }
                },
                {
                  "if": {
                    "when": {
                      "op": "and",
                      "args": [
                        {
                          "op": "==",
                          "left": {
                            "ref": "gvar",
                            "var": "bettingClosed"
                          },
                          "right": true
                        },
                        {
                          "op": "not",
                          "arg": {
                            "op": "<=",
                            "left": {
                              "aggregate": {
                                "op": "sum",
                                "query": {
                                  "query": "players"
                                },
                                "bind": "$__macro_advance_after_betting_turnStructure_phases_4__onEnter_7__if_then_0__player",
                                "valueExpr": {
                                  "if": {
                                    "when": {
                                      "op": "and",
                                      "args": [
                                        {
                                          "op": "==",
                                          "left": {
                                            "ref": "pvar",
                                            "player": {
                                              "chosen": "$__macro_advance_after_betting_turnStructure_phases_4__onEnter_7__if_then_0__player"
                                            },
                                            "var": "handActive"
                                          },
                                          "right": true
                                        },
                                        {
                                          "op": "==",
                                          "left": {
                                            "ref": "pvar",
                                            "player": {
                                              "chosen": "$__macro_advance_after_betting_turnStructure_phases_4__onEnter_7__if_then_0__player"
                                            },
                                            "var": "eliminated"
                                          },
                                          "right": false
                                        }
                                      ]
                                    },
                                    "then": 1,
                                    "else": 0
                                  }
                                }
                              }
                            },
                            "right": 1
                          }
                        }
                      ]
                    },
                    "then": [
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 0
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "flop"
                              }
                            }
                          ]
                        }
                      },
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 1
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "turn"
                              }
                            }
                          ]
                        }
                      },
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 2
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "river"
                              }
                            }
                          ]
                        }
                      },
                      {
                        "if": {
                          "when": {
                            "op": "==",
                            "left": {
                              "ref": "gvar",
                              "var": "handPhase"
                            },
                            "right": 3
                          },
                          "then": [
                            {
                              "gotoPhaseExact": {
                                "phase": "showdown"
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
      },
      {
        "id": "showdown",
        "onEnter": [
          {
            "setVar": {
              "scope": "global",
              "var": "handPhase",
              "value": 4
            }
          },
          {
            "forEach": {
              "bind": "$player",
              "over": {
                "query": "players"
              },
              "effects": [
                {
                  "if": {
                    "when": {
                      "op": "and",
                      "args": [
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$player"
                            },
                            "var": "handActive"
                          },
                          "right": true
                        },
                        {
                          "op": ">=",
                          "left": {
                            "aggregate": {
                              "op": "count",
                              "query": {
                                "query": "concat",
                                "sources": [
                                  {
                                    "query": "tokensInZone",
                                    "zone": {
                                      "zoneExpr": {
                                        "concat": [
                                          "hand:",
                                          {
                                            "ref": "binding",
                                            "name": "$player"
                                          }
                                        ]
                                      }
                                    }
                                  },
                                  {
                                    "query": "tokensInZone",
                                    "zone": "community:none"
                                  }
                                ]
                              }
                            }
                          },
                          "right": 5
                        }
                      ]
                    },
                    "then": [
                      {
                        "reveal": {
                          "zone": {
                            "zoneExpr": {
                              "concat": [
                                "hand:",
                                {
                                  "ref": "binding",
                                  "name": "$player"
                                }
                              ]
                            }
                          },
                          "to": "all"
                        }
                      },
                      {
                        "evaluateSubset": {
                          "source": {
                            "query": "concat",
                            "sources": [
                              {
                                "query": "tokensInZone",
                                "zone": {
                                  "zoneExpr": {
                                    "concat": [
                                      "hand:",
                                      {
                                        "ref": "binding",
                                        "name": "$player"
                                      }
                                    ]
                                  }
                                }
                              },
                              {
                                "query": "tokensInZone",
                                "zone": "community:none"
                              }
                            ]
                          },
                          "subsetSize": 5,
                          "subsetBind": "$subset",
                          "compute": [
                            {
                              "let": {
                                "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__maxSuitCount",
                                "value": {
                                  "aggregate": {
                                    "op": "max",
                                    "query": {
                                      "query": "intsInRange",
                                      "min": 0,
                                      "max": 3
                                    },
                                    "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__suit",
                                    "valueExpr": {
                                      "aggregate": {
                                        "op": "sum",
                                        "query": {
                                          "query": "binding",
                                          "name": "$subset"
                                        },
                                        "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                        "valueExpr": {
                                          "if": {
                                            "when": {
                                              "op": "==",
                                              "left": {
                                                "ref": "tokenProp",
                                                "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                "prop": "suit"
                                              },
                                              "right": {
                                                "ref": "binding",
                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__suit"
                                              }
                                            },
                                            "then": 1,
                                            "else": 0
                                          }
                                        }
                                      }
                                    }
                                  }
                                },
                                "in": [
                                  {
                                    "let": {
                                      "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__isFlush",
                                      "value": {
                                        "if": {
                                          "when": {
                                            "op": "==",
                                            "left": {
                                              "ref": "binding",
                                              "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__maxSuitCount"
                                            },
                                            "right": 5
                                          },
                                          "then": true,
                                          "else": false
                                        }
                                      },
                                      "in": [
                                        {
                                          "let": {
                                            "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__maxRankCount",
                                            "value": {
                                              "aggregate": {
                                                "op": "max",
                                                "query": {
                                                  "query": "intsInRange",
                                                  "min": 2,
                                                  "max": 14
                                                },
                                                "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank",
                                                "valueExpr": {
                                                  "aggregate": {
                                                    "op": "sum",
                                                    "query": {
                                                      "query": "binding",
                                                      "name": "$subset"
                                                    },
                                                    "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                    "valueExpr": {
                                                      "if": {
                                                        "when": {
                                                          "op": "==",
                                                          "left": {
                                                            "ref": "tokenProp",
                                                            "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                            "prop": "rank"
                                                          },
                                                          "right": {
                                                            "ref": "binding",
                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                          }
                                                        },
                                                        "then": 1,
                                                        "else": 0
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            },
                                            "in": [
                                              {
                                                "let": {
                                                  "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__pairCount",
                                                  "value": {
                                                    "aggregate": {
                                                      "op": "sum",
                                                      "query": {
                                                        "query": "intsInRange",
                                                        "min": 2,
                                                        "max": 14
                                                      },
                                                      "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank",
                                                      "valueExpr": {
                                                        "if": {
                                                          "when": {
                                                            "op": "==",
                                                            "left": {
                                                              "aggregate": {
                                                                "op": "sum",
                                                                "query": {
                                                                  "query": "binding",
                                                                  "name": "$subset"
                                                                },
                                                                "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                "valueExpr": {
                                                                  "if": {
                                                                    "when": {
                                                                      "op": "==",
                                                                      "left": {
                                                                        "ref": "tokenProp",
                                                                        "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                        "prop": "rank"
                                                                      },
                                                                      "right": {
                                                                        "ref": "binding",
                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                      }
                                                                    },
                                                                    "then": 1,
                                                                    "else": 0
                                                                  }
                                                                }
                                                              }
                                                            },
                                                            "right": 2
                                                          },
                                                          "then": 1,
                                                          "else": 0
                                                        }
                                                      }
                                                    }
                                                  },
                                                  "in": [
                                                    {
                                                      "let": {
                                                        "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__tripCount",
                                                        "value": {
                                                          "aggregate": {
                                                            "op": "sum",
                                                            "query": {
                                                              "query": "intsInRange",
                                                              "min": 2,
                                                              "max": 14
                                                            },
                                                            "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank",
                                                            "valueExpr": {
                                                              "if": {
                                                                "when": {
                                                                  "op": "==",
                                                                  "left": {
                                                                    "aggregate": {
                                                                      "op": "sum",
                                                                      "query": {
                                                                        "query": "binding",
                                                                        "name": "$subset"
                                                                      },
                                                                      "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                      "valueExpr": {
                                                                        "if": {
                                                                          "when": {
                                                                            "op": "==",
                                                                            "left": {
                                                                              "ref": "tokenProp",
                                                                              "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                              "prop": "rank"
                                                                            },
                                                                            "right": {
                                                                              "ref": "binding",
                                                                              "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                            }
                                                                          },
                                                                          "then": 1,
                                                                          "else": 0
                                                                        }
                                                                      }
                                                                    }
                                                                  },
                                                                  "right": 3
                                                                },
                                                                "then": 1,
                                                                "else": 0
                                                              }
                                                            }
                                                          }
                                                        },
                                                        "in": [
                                                          {
                                                            "let": {
                                                              "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__quadCount",
                                                              "value": {
                                                                "aggregate": {
                                                                  "op": "sum",
                                                                  "query": {
                                                                    "query": "intsInRange",
                                                                    "min": 2,
                                                                    "max": 14
                                                                  },
                                                                  "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank",
                                                                  "valueExpr": {
                                                                    "if": {
                                                                      "when": {
                                                                        "op": "==",
                                                                        "left": {
                                                                          "aggregate": {
                                                                            "op": "sum",
                                                                            "query": {
                                                                              "query": "binding",
                                                                              "name": "$subset"
                                                                            },
                                                                            "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                            "valueExpr": {
                                                                              "if": {
                                                                                "when": {
                                                                                  "op": "==",
                                                                                  "left": {
                                                                                    "ref": "tokenProp",
                                                                                    "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                    "prop": "rank"
                                                                                  },
                                                                                  "right": {
                                                                                    "ref": "binding",
                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                  }
                                                                                },
                                                                                "then": 1,
                                                                                "else": 0
                                                                              }
                                                                            }
                                                                          }
                                                                        },
                                                                        "right": 4
                                                                      },
                                                                      "then": 1,
                                                                      "else": 0
                                                                    }
                                                                  }
                                                                }
                                                              },
                                                              "in": [
                                                                {
                                                                  "reduce": {
                                                                    "itemBind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__high",
                                                                    "accBind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__bestHigh",
                                                                    "over": {
                                                                      "query": "intsInRange",
                                                                      "min": 5,
                                                                      "max": 14
                                                                    },
                                                                    "initial": 0,
                                                                    "next": {
                                                                      "if": {
                                                                        "when": {
                                                                          "op": "and",
                                                                          "args": [
                                                                            {
                                                                              "op": ">",
                                                                              "left": {
                                                                                "aggregate": {
                                                                                  "op": "sum",
                                                                                  "query": {
                                                                                    "query": "binding",
                                                                                    "name": "$subset"
                                                                                  },
                                                                                  "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                  "valueExpr": {
                                                                                    "if": {
                                                                                      "when": {
                                                                                        "op": "==",
                                                                                        "left": {
                                                                                          "ref": "tokenProp",
                                                                                          "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                          "prop": "rank"
                                                                                        },
                                                                                        "right": {
                                                                                          "ref": "binding",
                                                                                          "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__high"
                                                                                        }
                                                                                      },
                                                                                      "then": 1,
                                                                                      "else": 0
                                                                                    }
                                                                                  }
                                                                                }
                                                                              },
                                                                              "right": 0
                                                                            },
                                                                            {
                                                                              "op": ">",
                                                                              "left": {
                                                                                "aggregate": {
                                                                                  "op": "sum",
                                                                                  "query": {
                                                                                    "query": "binding",
                                                                                    "name": "$subset"
                                                                                  },
                                                                                  "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                  "valueExpr": {
                                                                                    "if": {
                                                                                      "when": {
                                                                                        "op": "==",
                                                                                        "left": {
                                                                                          "ref": "tokenProp",
                                                                                          "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                          "prop": "rank"
                                                                                        },
                                                                                        "right": {
                                                                                          "op": "-",
                                                                                          "left": {
                                                                                            "ref": "binding",
                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__high"
                                                                                          },
                                                                                          "right": 1
                                                                                        }
                                                                                      },
                                                                                      "then": 1,
                                                                                      "else": 0
                                                                                    }
                                                                                  }
                                                                                }
                                                                              },
                                                                              "right": 0
                                                                            },
                                                                            {
                                                                              "op": ">",
                                                                              "left": {
                                                                                "aggregate": {
                                                                                  "op": "sum",
                                                                                  "query": {
                                                                                    "query": "binding",
                                                                                    "name": "$subset"
                                                                                  },
                                                                                  "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                  "valueExpr": {
                                                                                    "if": {
                                                                                      "when": {
                                                                                        "op": "==",
                                                                                        "left": {
                                                                                          "ref": "tokenProp",
                                                                                          "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                          "prop": "rank"
                                                                                        },
                                                                                        "right": {
                                                                                          "op": "-",
                                                                                          "left": {
                                                                                            "ref": "binding",
                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__high"
                                                                                          },
                                                                                          "right": 2
                                                                                        }
                                                                                      },
                                                                                      "then": 1,
                                                                                      "else": 0
                                                                                    }
                                                                                  }
                                                                                }
                                                                              },
                                                                              "right": 0
                                                                            },
                                                                            {
                                                                              "op": ">",
                                                                              "left": {
                                                                                "aggregate": {
                                                                                  "op": "sum",
                                                                                  "query": {
                                                                                    "query": "binding",
                                                                                    "name": "$subset"
                                                                                  },
                                                                                  "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                  "valueExpr": {
                                                                                    "if": {
                                                                                      "when": {
                                                                                        "op": "==",
                                                                                        "left": {
                                                                                          "ref": "tokenProp",
                                                                                          "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                          "prop": "rank"
                                                                                        },
                                                                                        "right": {
                                                                                          "op": "-",
                                                                                          "left": {
                                                                                            "ref": "binding",
                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__high"
                                                                                          },
                                                                                          "right": 3
                                                                                        }
                                                                                      },
                                                                                      "then": 1,
                                                                                      "else": 0
                                                                                    }
                                                                                  }
                                                                                }
                                                                              },
                                                                              "right": 0
                                                                            },
                                                                            {
                                                                              "op": ">",
                                                                              "left": {
                                                                                "aggregate": {
                                                                                  "op": "sum",
                                                                                  "query": {
                                                                                    "query": "binding",
                                                                                    "name": "$subset"
                                                                                  },
                                                                                  "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                  "valueExpr": {
                                                                                    "if": {
                                                                                      "when": {
                                                                                        "op": "==",
                                                                                        "left": {
                                                                                          "ref": "tokenProp",
                                                                                          "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                          "prop": "rank"
                                                                                        },
                                                                                        "right": {
                                                                                          "op": "-",
                                                                                          "left": {
                                                                                            "ref": "binding",
                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__high"
                                                                                          },
                                                                                          "right": 4
                                                                                        }
                                                                                      },
                                                                                      "then": 1,
                                                                                      "else": 0
                                                                                    }
                                                                                  }
                                                                                }
                                                                              },
                                                                              "right": 0
                                                                            }
                                                                          ]
                                                                        },
                                                                        "then": {
                                                                          "if": {
                                                                            "when": {
                                                                              "op": ">",
                                                                              "left": {
                                                                                "ref": "binding",
                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__high"
                                                                              },
                                                                              "right": {
                                                                                "ref": "binding",
                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__bestHigh"
                                                                              }
                                                                            },
                                                                            "then": {
                                                                              "ref": "binding",
                                                                              "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__high"
                                                                            },
                                                                            "else": {
                                                                              "ref": "binding",
                                                                              "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__bestHigh"
                                                                            }
                                                                          }
                                                                        },
                                                                        "else": {
                                                                          "ref": "binding",
                                                                          "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__bestHigh"
                                                                        }
                                                                      }
                                                                    },
                                                                    "resultBind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__straightHigh",
                                                                    "in": [
                                                                      {
                                                                        "let": {
                                                                          "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__wheelStraight",
                                                                          "value": {
                                                                            "if": {
                                                                              "when": {
                                                                                "op": "and",
                                                                                "args": [
                                                                                  {
                                                                                    "op": ">",
                                                                                    "left": {
                                                                                      "aggregate": {
                                                                                        "op": "sum",
                                                                                        "query": {
                                                                                          "query": "binding",
                                                                                          "name": "$subset"
                                                                                        },
                                                                                        "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                        "valueExpr": {
                                                                                          "if": {
                                                                                            "when": {
                                                                                              "op": "==",
                                                                                              "left": {
                                                                                                "ref": "tokenProp",
                                                                                                "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                "prop": "rank"
                                                                                              },
                                                                                              "right": 14
                                                                                            },
                                                                                            "then": 1,
                                                                                            "else": 0
                                                                                          }
                                                                                        }
                                                                                      }
                                                                                    },
                                                                                    "right": 0
                                                                                  },
                                                                                  {
                                                                                    "op": ">",
                                                                                    "left": {
                                                                                      "aggregate": {
                                                                                        "op": "sum",
                                                                                        "query": {
                                                                                          "query": "binding",
                                                                                          "name": "$subset"
                                                                                        },
                                                                                        "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                        "valueExpr": {
                                                                                          "if": {
                                                                                            "when": {
                                                                                              "op": "==",
                                                                                              "left": {
                                                                                                "ref": "tokenProp",
                                                                                                "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                "prop": "rank"
                                                                                              },
                                                                                              "right": 5
                                                                                            },
                                                                                            "then": 1,
                                                                                            "else": 0
                                                                                          }
                                                                                        }
                                                                                      }
                                                                                    },
                                                                                    "right": 0
                                                                                  },
                                                                                  {
                                                                                    "op": ">",
                                                                                    "left": {
                                                                                      "aggregate": {
                                                                                        "op": "sum",
                                                                                        "query": {
                                                                                          "query": "binding",
                                                                                          "name": "$subset"
                                                                                        },
                                                                                        "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                        "valueExpr": {
                                                                                          "if": {
                                                                                            "when": {
                                                                                              "op": "==",
                                                                                              "left": {
                                                                                                "ref": "tokenProp",
                                                                                                "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                "prop": "rank"
                                                                                              },
                                                                                              "right": 4
                                                                                            },
                                                                                            "then": 1,
                                                                                            "else": 0
                                                                                          }
                                                                                        }
                                                                                      }
                                                                                    },
                                                                                    "right": 0
                                                                                  },
                                                                                  {
                                                                                    "op": ">",
                                                                                    "left": {
                                                                                      "aggregate": {
                                                                                        "op": "sum",
                                                                                        "query": {
                                                                                          "query": "binding",
                                                                                          "name": "$subset"
                                                                                        },
                                                                                        "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                        "valueExpr": {
                                                                                          "if": {
                                                                                            "when": {
                                                                                              "op": "==",
                                                                                              "left": {
                                                                                                "ref": "tokenProp",
                                                                                                "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                "prop": "rank"
                                                                                              },
                                                                                              "right": 3
                                                                                            },
                                                                                            "then": 1,
                                                                                            "else": 0
                                                                                          }
                                                                                        }
                                                                                      }
                                                                                    },
                                                                                    "right": 0
                                                                                  },
                                                                                  {
                                                                                    "op": ">",
                                                                                    "left": {
                                                                                      "aggregate": {
                                                                                        "op": "sum",
                                                                                        "query": {
                                                                                          "query": "binding",
                                                                                          "name": "$subset"
                                                                                        },
                                                                                        "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                        "valueExpr": {
                                                                                          "if": {
                                                                                            "when": {
                                                                                              "op": "==",
                                                                                              "left": {
                                                                                                "ref": "tokenProp",
                                                                                                "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                "prop": "rank"
                                                                                              },
                                                                                              "right": 2
                                                                                            },
                                                                                            "then": 1,
                                                                                            "else": 0
                                                                                          }
                                                                                        }
                                                                                      }
                                                                                    },
                                                                                    "right": 0
                                                                                  }
                                                                                ]
                                                                              },
                                                                              "then": true,
                                                                              "else": false
                                                                            }
                                                                          },
                                                                          "in": [
                                                                            {
                                                                              "let": {
                                                                                "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__straightHighAdj",
                                                                                "value": {
                                                                                  "if": {
                                                                                    "when": {
                                                                                      "op": "and",
                                                                                      "args": [
                                                                                        {
                                                                                          "op": "==",
                                                                                          "left": {
                                                                                            "ref": "binding",
                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__straightHigh"
                                                                                          },
                                                                                          "right": 0
                                                                                        },
                                                                                        {
                                                                                          "op": "==",
                                                                                          "left": {
                                                                                            "ref": "binding",
                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__wheelStraight"
                                                                                          },
                                                                                          "right": true
                                                                                        }
                                                                                      ]
                                                                                    },
                                                                                    "then": 5,
                                                                                    "else": {
                                                                                      "ref": "binding",
                                                                                      "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__straightHigh"
                                                                                    }
                                                                                  }
                                                                                },
                                                                                "in": [
                                                                                  {
                                                                                    "let": {
                                                                                      "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__quadRank",
                                                                                      "value": {
                                                                                        "aggregate": {
                                                                                          "op": "max",
                                                                                          "query": {
                                                                                            "query": "intsInRange",
                                                                                            "min": 2,
                                                                                            "max": 14
                                                                                          },
                                                                                          "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank",
                                                                                          "valueExpr": {
                                                                                            "if": {
                                                                                              "when": {
                                                                                                "op": "==",
                                                                                                "left": {
                                                                                                  "aggregate": {
                                                                                                    "op": "sum",
                                                                                                    "query": {
                                                                                                      "query": "binding",
                                                                                                      "name": "$subset"
                                                                                                    },
                                                                                                    "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                    "valueExpr": {
                                                                                                      "if": {
                                                                                                        "when": {
                                                                                                          "op": "==",
                                                                                                          "left": {
                                                                                                            "ref": "tokenProp",
                                                                                                            "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                            "prop": "rank"
                                                                                                          },
                                                                                                          "right": {
                                                                                                            "ref": "binding",
                                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                          }
                                                                                                        },
                                                                                                        "then": 1,
                                                                                                        "else": 0
                                                                                                      }
                                                                                                    }
                                                                                                  }
                                                                                                },
                                                                                                "right": 4
                                                                                              },
                                                                                              "then": {
                                                                                                "ref": "binding",
                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                              },
                                                                                              "else": 0
                                                                                            }
                                                                                          }
                                                                                        }
                                                                                      },
                                                                                      "in": [
                                                                                        {
                                                                                          "let": {
                                                                                            "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__tripRank",
                                                                                            "value": {
                                                                                              "aggregate": {
                                                                                                "op": "max",
                                                                                                "query": {
                                                                                                  "query": "intsInRange",
                                                                                                  "min": 2,
                                                                                                  "max": 14
                                                                                                },
                                                                                                "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank",
                                                                                                "valueExpr": {
                                                                                                  "if": {
                                                                                                    "when": {
                                                                                                      "op": "==",
                                                                                                      "left": {
                                                                                                        "aggregate": {
                                                                                                          "op": "sum",
                                                                                                          "query": {
                                                                                                            "query": "binding",
                                                                                                            "name": "$subset"
                                                                                                          },
                                                                                                          "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                          "valueExpr": {
                                                                                                            "if": {
                                                                                                              "when": {
                                                                                                                "op": "==",
                                                                                                                "left": {
                                                                                                                  "ref": "tokenProp",
                                                                                                                  "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                                  "prop": "rank"
                                                                                                                },
                                                                                                                "right": {
                                                                                                                  "ref": "binding",
                                                                                                                  "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                }
                                                                                                              },
                                                                                                              "then": 1,
                                                                                                              "else": 0
                                                                                                            }
                                                                                                          }
                                                                                                        }
                                                                                                      },
                                                                                                      "right": 3
                                                                                                    },
                                                                                                    "then": {
                                                                                                      "ref": "binding",
                                                                                                      "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                    },
                                                                                                    "else": 0
                                                                                                  }
                                                                                                }
                                                                                              }
                                                                                            },
                                                                                            "in": [
                                                                                              {
                                                                                                "let": {
                                                                                                  "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__pairHigh",
                                                                                                  "value": {
                                                                                                    "aggregate": {
                                                                                                      "op": "max",
                                                                                                      "query": {
                                                                                                        "query": "intsInRange",
                                                                                                        "min": 2,
                                                                                                        "max": 14
                                                                                                      },
                                                                                                      "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank",
                                                                                                      "valueExpr": {
                                                                                                        "if": {
                                                                                                          "when": {
                                                                                                            "op": "==",
                                                                                                            "left": {
                                                                                                              "aggregate": {
                                                                                                                "op": "sum",
                                                                                                                "query": {
                                                                                                                  "query": "binding",
                                                                                                                  "name": "$subset"
                                                                                                                },
                                                                                                                "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                                "valueExpr": {
                                                                                                                  "if": {
                                                                                                                    "when": {
                                                                                                                      "op": "==",
                                                                                                                      "left": {
                                                                                                                        "ref": "tokenProp",
                                                                                                                        "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                                        "prop": "rank"
                                                                                                                      },
                                                                                                                      "right": {
                                                                                                                        "ref": "binding",
                                                                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                      }
                                                                                                                    },
                                                                                                                    "then": 1,
                                                                                                                    "else": 0
                                                                                                                  }
                                                                                                                }
                                                                                                              }
                                                                                                            },
                                                                                                            "right": 2
                                                                                                          },
                                                                                                          "then": {
                                                                                                            "ref": "binding",
                                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                          },
                                                                                                          "else": 0
                                                                                                        }
                                                                                                      }
                                                                                                    }
                                                                                                  },
                                                                                                  "in": [
                                                                                                    {
                                                                                                      "let": {
                                                                                                        "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__pairLow",
                                                                                                        "value": {
                                                                                                          "aggregate": {
                                                                                                            "op": "max",
                                                                                                            "query": {
                                                                                                              "query": "intsInRange",
                                                                                                              "min": 2,
                                                                                                              "max": 14
                                                                                                            },
                                                                                                            "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank",
                                                                                                            "valueExpr": {
                                                                                                              "if": {
                                                                                                                "when": {
                                                                                                                  "op": "and",
                                                                                                                  "args": [
                                                                                                                    {
                                                                                                                      "op": "==",
                                                                                                                      "left": {
                                                                                                                        "aggregate": {
                                                                                                                          "op": "sum",
                                                                                                                          "query": {
                                                                                                                            "query": "binding",
                                                                                                                            "name": "$subset"
                                                                                                                          },
                                                                                                                          "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                                          "valueExpr": {
                                                                                                                            "if": {
                                                                                                                              "when": {
                                                                                                                                "op": "==",
                                                                                                                                "left": {
                                                                                                                                  "ref": "tokenProp",
                                                                                                                                  "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                                                  "prop": "rank"
                                                                                                                                },
                                                                                                                                "right": {
                                                                                                                                  "ref": "binding",
                                                                                                                                  "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                                }
                                                                                                                              },
                                                                                                                              "then": 1,
                                                                                                                              "else": 0
                                                                                                                            }
                                                                                                                          }
                                                                                                                        }
                                                                                                                      },
                                                                                                                      "right": 2
                                                                                                                    },
                                                                                                                    {
                                                                                                                      "op": "<",
                                                                                                                      "left": {
                                                                                                                        "ref": "binding",
                                                                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                      },
                                                                                                                      "right": {
                                                                                                                        "ref": "binding",
                                                                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__pairHigh"
                                                                                                                      }
                                                                                                                    }
                                                                                                                  ]
                                                                                                                },
                                                                                                                "then": {
                                                                                                                  "ref": "binding",
                                                                                                                  "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                },
                                                                                                                "else": 0
                                                                                                              }
                                                                                                            }
                                                                                                          }
                                                                                                        },
                                                                                                        "in": [
                                                                                                          {
                                                                                                            "let": {
                                                                                                              "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single1",
                                                                                                              "value": {
                                                                                                                "aggregate": {
                                                                                                                  "op": "max",
                                                                                                                  "query": {
                                                                                                                    "query": "intsInRange",
                                                                                                                    "min": 2,
                                                                                                                    "max": 14
                                                                                                                  },
                                                                                                                  "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank",
                                                                                                                  "valueExpr": {
                                                                                                                    "if": {
                                                                                                                      "when": {
                                                                                                                        "op": "==",
                                                                                                                        "left": {
                                                                                                                          "aggregate": {
                                                                                                                            "op": "sum",
                                                                                                                            "query": {
                                                                                                                              "query": "binding",
                                                                                                                              "name": "$subset"
                                                                                                                            },
                                                                                                                            "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                                            "valueExpr": {
                                                                                                                              "if": {
                                                                                                                                "when": {
                                                                                                                                  "op": "==",
                                                                                                                                  "left": {
                                                                                                                                    "ref": "tokenProp",
                                                                                                                                    "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                                                    "prop": "rank"
                                                                                                                                  },
                                                                                                                                  "right": {
                                                                                                                                    "ref": "binding",
                                                                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                                  }
                                                                                                                                },
                                                                                                                                "then": 1,
                                                                                                                                "else": 0
                                                                                                                              }
                                                                                                                            }
                                                                                                                          }
                                                                                                                        },
                                                                                                                        "right": 1
                                                                                                                      },
                                                                                                                      "then": {
                                                                                                                        "ref": "binding",
                                                                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                      },
                                                                                                                      "else": 0
                                                                                                                    }
                                                                                                                  }
                                                                                                                }
                                                                                                              },
                                                                                                              "in": [
                                                                                                                {
                                                                                                                  "let": {
                                                                                                                    "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single2",
                                                                                                                    "value": {
                                                                                                                      "aggregate": {
                                                                                                                        "op": "max",
                                                                                                                        "query": {
                                                                                                                          "query": "intsInRange",
                                                                                                                          "min": 2,
                                                                                                                          "max": 14
                                                                                                                        },
                                                                                                                        "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank",
                                                                                                                        "valueExpr": {
                                                                                                                          "if": {
                                                                                                                            "when": {
                                                                                                                              "op": "and",
                                                                                                                              "args": [
                                                                                                                                {
                                                                                                                                  "op": "==",
                                                                                                                                  "left": {
                                                                                                                                    "aggregate": {
                                                                                                                                      "op": "sum",
                                                                                                                                      "query": {
                                                                                                                                        "query": "binding",
                                                                                                                                        "name": "$subset"
                                                                                                                                      },
                                                                                                                                      "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                                                      "valueExpr": {
                                                                                                                                        "if": {
                                                                                                                                          "when": {
                                                                                                                                            "op": "==",
                                                                                                                                            "left": {
                                                                                                                                              "ref": "tokenProp",
                                                                                                                                              "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                                                              "prop": "rank"
                                                                                                                                            },
                                                                                                                                            "right": {
                                                                                                                                              "ref": "binding",
                                                                                                                                              "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                                            }
                                                                                                                                          },
                                                                                                                                          "then": 1,
                                                                                                                                          "else": 0
                                                                                                                                        }
                                                                                                                                      }
                                                                                                                                    }
                                                                                                                                  },
                                                                                                                                  "right": 1
                                                                                                                                },
                                                                                                                                {
                                                                                                                                  "op": "<",
                                                                                                                                  "left": {
                                                                                                                                    "ref": "binding",
                                                                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                                  },
                                                                                                                                  "right": {
                                                                                                                                    "ref": "binding",
                                                                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single1"
                                                                                                                                  }
                                                                                                                                }
                                                                                                                              ]
                                                                                                                            },
                                                                                                                            "then": {
                                                                                                                              "ref": "binding",
                                                                                                                              "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                            },
                                                                                                                            "else": 0
                                                                                                                          }
                                                                                                                        }
                                                                                                                      }
                                                                                                                    },
                                                                                                                    "in": [
                                                                                                                      {
                                                                                                                        "let": {
                                                                                                                          "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single3",
                                                                                                                          "value": {
                                                                                                                            "aggregate": {
                                                                                                                              "op": "max",
                                                                                                                              "query": {
                                                                                                                                "query": "intsInRange",
                                                                                                                                "min": 2,
                                                                                                                                "max": 14
                                                                                                                              },
                                                                                                                              "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank",
                                                                                                                              "valueExpr": {
                                                                                                                                "if": {
                                                                                                                                  "when": {
                                                                                                                                    "op": "and",
                                                                                                                                    "args": [
                                                                                                                                      {
                                                                                                                                        "op": "==",
                                                                                                                                        "left": {
                                                                                                                                          "aggregate": {
                                                                                                                                            "op": "sum",
                                                                                                                                            "query": {
                                                                                                                                              "query": "binding",
                                                                                                                                              "name": "$subset"
                                                                                                                                            },
                                                                                                                                            "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                                                            "valueExpr": {
                                                                                                                                              "if": {
                                                                                                                                                "when": {
                                                                                                                                                  "op": "==",
                                                                                                                                                  "left": {
                                                                                                                                                    "ref": "tokenProp",
                                                                                                                                                    "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                                                                    "prop": "rank"
                                                                                                                                                  },
                                                                                                                                                  "right": {
                                                                                                                                                    "ref": "binding",
                                                                                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                                                  }
                                                                                                                                                },
                                                                                                                                                "then": 1,
                                                                                                                                                "else": 0
                                                                                                                                              }
                                                                                                                                            }
                                                                                                                                          }
                                                                                                                                        },
                                                                                                                                        "right": 1
                                                                                                                                      },
                                                                                                                                      {
                                                                                                                                        "op": "<",
                                                                                                                                        "left": {
                                                                                                                                          "ref": "binding",
                                                                                                                                          "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                                        },
                                                                                                                                        "right": {
                                                                                                                                          "ref": "binding",
                                                                                                                                          "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single2"
                                                                                                                                        }
                                                                                                                                      }
                                                                                                                                    ]
                                                                                                                                  },
                                                                                                                                  "then": {
                                                                                                                                    "ref": "binding",
                                                                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                                  },
                                                                                                                                  "else": 0
                                                                                                                                }
                                                                                                                              }
                                                                                                                            }
                                                                                                                          },
                                                                                                                          "in": [
                                                                                                                            {
                                                                                                                              "let": {
                                                                                                                                "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single4",
                                                                                                                                "value": {
                                                                                                                                  "aggregate": {
                                                                                                                                    "op": "max",
                                                                                                                                    "query": {
                                                                                                                                      "query": "intsInRange",
                                                                                                                                      "min": 2,
                                                                                                                                      "max": 14
                                                                                                                                    },
                                                                                                                                    "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank",
                                                                                                                                    "valueExpr": {
                                                                                                                                      "if": {
                                                                                                                                        "when": {
                                                                                                                                          "op": "and",
                                                                                                                                          "args": [
                                                                                                                                            {
                                                                                                                                              "op": "==",
                                                                                                                                              "left": {
                                                                                                                                                "aggregate": {
                                                                                                                                                  "op": "sum",
                                                                                                                                                  "query": {
                                                                                                                                                    "query": "binding",
                                                                                                                                                    "name": "$subset"
                                                                                                                                                  },
                                                                                                                                                  "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                                                                  "valueExpr": {
                                                                                                                                                    "if": {
                                                                                                                                                      "when": {
                                                                                                                                                        "op": "==",
                                                                                                                                                        "left": {
                                                                                                                                                          "ref": "tokenProp",
                                                                                                                                                          "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                                                                          "prop": "rank"
                                                                                                                                                        },
                                                                                                                                                        "right": {
                                                                                                                                                          "ref": "binding",
                                                                                                                                                          "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                                                        }
                                                                                                                                                      },
                                                                                                                                                      "then": 1,
                                                                                                                                                      "else": 0
                                                                                                                                                    }
                                                                                                                                                  }
                                                                                                                                                }
                                                                                                                                              },
                                                                                                                                              "right": 1
                                                                                                                                            },
                                                                                                                                            {
                                                                                                                                              "op": "<",
                                                                                                                                              "left": {
                                                                                                                                                "ref": "binding",
                                                                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                                              },
                                                                                                                                              "right": {
                                                                                                                                                "ref": "binding",
                                                                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single3"
                                                                                                                                              }
                                                                                                                                            }
                                                                                                                                          ]
                                                                                                                                        },
                                                                                                                                        "then": {
                                                                                                                                          "ref": "binding",
                                                                                                                                          "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                                        },
                                                                                                                                        "else": 0
                                                                                                                                      }
                                                                                                                                    }
                                                                                                                                  }
                                                                                                                                },
                                                                                                                                "in": [
                                                                                                                                  {
                                                                                                                                    "let": {
                                                                                                                                      "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single5",
                                                                                                                                      "value": {
                                                                                                                                        "aggregate": {
                                                                                                                                          "op": "max",
                                                                                                                                          "query": {
                                                                                                                                            "query": "intsInRange",
                                                                                                                                            "min": 2,
                                                                                                                                            "max": 14
                                                                                                                                          },
                                                                                                                                          "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank",
                                                                                                                                          "valueExpr": {
                                                                                                                                            "if": {
                                                                                                                                              "when": {
                                                                                                                                                "op": "and",
                                                                                                                                                "args": [
                                                                                                                                                  {
                                                                                                                                                    "op": "==",
                                                                                                                                                    "left": {
                                                                                                                                                      "aggregate": {
                                                                                                                                                        "op": "sum",
                                                                                                                                                        "query": {
                                                                                                                                                          "query": "binding",
                                                                                                                                                          "name": "$subset"
                                                                                                                                                        },
                                                                                                                                                        "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                                                                        "valueExpr": {
                                                                                                                                                          "if": {
                                                                                                                                                            "when": {
                                                                                                                                                              "op": "==",
                                                                                                                                                              "left": {
                                                                                                                                                                "ref": "tokenProp",
                                                                                                                                                                "token": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__card",
                                                                                                                                                                "prop": "rank"
                                                                                                                                                              },
                                                                                                                                                              "right": {
                                                                                                                                                                "ref": "binding",
                                                                                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                                                              }
                                                                                                                                                            },
                                                                                                                                                            "then": 1,
                                                                                                                                                            "else": 0
                                                                                                                                                          }
                                                                                                                                                        }
                                                                                                                                                      }
                                                                                                                                                    },
                                                                                                                                                    "right": 1
                                                                                                                                                  },
                                                                                                                                                  {
                                                                                                                                                    "op": "<",
                                                                                                                                                    "left": {
                                                                                                                                                      "ref": "binding",
                                                                                                                                                      "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                                                    },
                                                                                                                                                    "right": {
                                                                                                                                                      "ref": "binding",
                                                                                                                                                      "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single4"
                                                                                                                                                    }
                                                                                                                                                  }
                                                                                                                                                ]
                                                                                                                                              },
                                                                                                                                              "then": {
                                                                                                                                                "ref": "binding",
                                                                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__rank"
                                                                                                                                              },
                                                                                                                                              "else": 0
                                                                                                                                            }
                                                                                                                                          }
                                                                                                                                        }
                                                                                                                                      },
                                                                                                                                      "in": [
                                                                                                                                        {
                                                                                                                                          "let": {
                                                                                                                                            "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType",
                                                                                                                                            "value": {
                                                                                                                                              "if": {
                                                                                                                                                "when": {
                                                                                                                                                  "op": "and",
                                                                                                                                                  "args": [
                                                                                                                                                    {
                                                                                                                                                      "op": "==",
                                                                                                                                                      "left": {
                                                                                                                                                        "ref": "binding",
                                                                                                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__isFlush"
                                                                                                                                                      },
                                                                                                                                                      "right": true
                                                                                                                                                    },
                                                                                                                                                    {
                                                                                                                                                      "op": ">",
                                                                                                                                                      "left": {
                                                                                                                                                        "ref": "binding",
                                                                                                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__straightHighAdj"
                                                                                                                                                      },
                                                                                                                                                      "right": 0
                                                                                                                                                    }
                                                                                                                                                  ]
                                                                                                                                                },
                                                                                                                                                "then": 9,
                                                                                                                                                "else": {
                                                                                                                                                  "if": {
                                                                                                                                                    "when": {
                                                                                                                                                      "op": "==",
                                                                                                                                                      "left": {
                                                                                                                                                        "ref": "binding",
                                                                                                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__quadCount"
                                                                                                                                                      },
                                                                                                                                                      "right": 1
                                                                                                                                                    },
                                                                                                                                                    "then": 8,
                                                                                                                                                    "else": {
                                                                                                                                                      "if": {
                                                                                                                                                        "when": {
                                                                                                                                                          "op": "and",
                                                                                                                                                          "args": [
                                                                                                                                                            {
                                                                                                                                                              "op": "==",
                                                                                                                                                              "left": {
                                                                                                                                                                "ref": "binding",
                                                                                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__tripCount"
                                                                                                                                                              },
                                                                                                                                                              "right": 1
                                                                                                                                                            },
                                                                                                                                                            {
                                                                                                                                                              "op": "==",
                                                                                                                                                              "left": {
                                                                                                                                                                "ref": "binding",
                                                                                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__pairCount"
                                                                                                                                                              },
                                                                                                                                                              "right": 1
                                                                                                                                                            }
                                                                                                                                                          ]
                                                                                                                                                        },
                                                                                                                                                        "then": 7,
                                                                                                                                                        "else": {
                                                                                                                                                          "if": {
                                                                                                                                                            "when": {
                                                                                                                                                              "op": "==",
                                                                                                                                                              "left": {
                                                                                                                                                                "ref": "binding",
                                                                                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__isFlush"
                                                                                                                                                              },
                                                                                                                                                              "right": true
                                                                                                                                                            },
                                                                                                                                                            "then": 6,
                                                                                                                                                            "else": {
                                                                                                                                                              "if": {
                                                                                                                                                                "when": {
                                                                                                                                                                  "op": ">",
                                                                                                                                                                  "left": {
                                                                                                                                                                    "ref": "binding",
                                                                                                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__straightHighAdj"
                                                                                                                                                                  },
                                                                                                                                                                  "right": 0
                                                                                                                                                                },
                                                                                                                                                                "then": 5,
                                                                                                                                                                "else": {
                                                                                                                                                                  "if": {
                                                                                                                                                                    "when": {
                                                                                                                                                                      "op": "==",
                                                                                                                                                                      "left": {
                                                                                                                                                                        "ref": "binding",
                                                                                                                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__tripCount"
                                                                                                                                                                      },
                                                                                                                                                                      "right": 1
                                                                                                                                                                    },
                                                                                                                                                                    "then": 4,
                                                                                                                                                                    "else": {
                                                                                                                                                                      "if": {
                                                                                                                                                                        "when": {
                                                                                                                                                                          "op": "==",
                                                                                                                                                                          "left": {
                                                                                                                                                                            "ref": "binding",
                                                                                                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__pairCount"
                                                                                                                                                                          },
                                                                                                                                                                          "right": 2
                                                                                                                                                                        },
                                                                                                                                                                        "then": 3,
                                                                                                                                                                        "else": {
                                                                                                                                                                          "if": {
                                                                                                                                                                            "when": {
                                                                                                                                                                              "op": "==",
                                                                                                                                                                              "left": {
                                                                                                                                                                                "ref": "binding",
                                                                                                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__pairCount"
                                                                                                                                                                              },
                                                                                                                                                                              "right": 1
                                                                                                                                                                            },
                                                                                                                                                                            "then": 2,
                                                                                                                                                                            "else": 1
                                                                                                                                                                          }
                                                                                                                                                                        }
                                                                                                                                                                      }
                                                                                                                                                                    }
                                                                                                                                                                  }
                                                                                                                                                                }
                                                                                                                                                              }
                                                                                                                                                            }
                                                                                                                                                          }
                                                                                                                                                        }
                                                                                                                                                      }
                                                                                                                                                    }
                                                                                                                                                  }
                                                                                                                                                }
                                                                                                                                              }
                                                                                                                                            },
                                                                                                                                            "in": [
                                                                                                                                              {
                                                                                                                                                "let": {
                                                                                                                                                  "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__c1",
                                                                                                                                                  "value": {
                                                                                                                                                    "if": {
                                                                                                                                                      "when": {
                                                                                                                                                        "op": "==",
                                                                                                                                                        "left": {
                                                                                                                                                          "ref": "binding",
                                                                                                                                                          "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                        },
                                                                                                                                                        "right": 9
                                                                                                                                                      },
                                                                                                                                                      "then": {
                                                                                                                                                        "ref": "binding",
                                                                                                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__straightHighAdj"
                                                                                                                                                      },
                                                                                                                                                      "else": {
                                                                                                                                                        "if": {
                                                                                                                                                          "when": {
                                                                                                                                                            "op": "==",
                                                                                                                                                            "left": {
                                                                                                                                                              "ref": "binding",
                                                                                                                                                              "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                            },
                                                                                                                                                            "right": 8
                                                                                                                                                          },
                                                                                                                                                          "then": {
                                                                                                                                                            "ref": "binding",
                                                                                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__quadRank"
                                                                                                                                                          },
                                                                                                                                                          "else": {
                                                                                                                                                            "if": {
                                                                                                                                                              "when": {
                                                                                                                                                                "op": "==",
                                                                                                                                                                "left": {
                                                                                                                                                                  "ref": "binding",
                                                                                                                                                                  "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                },
                                                                                                                                                                "right": 7
                                                                                                                                                              },
                                                                                                                                                              "then": {
                                                                                                                                                                "ref": "binding",
                                                                                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__tripRank"
                                                                                                                                                              },
                                                                                                                                                              "else": {
                                                                                                                                                                "if": {
                                                                                                                                                                  "when": {
                                                                                                                                                                    "op": "==",
                                                                                                                                                                    "left": {
                                                                                                                                                                      "ref": "binding",
                                                                                                                                                                      "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                    },
                                                                                                                                                                    "right": 6
                                                                                                                                                                  },
                                                                                                                                                                  "then": {
                                                                                                                                                                    "ref": "binding",
                                                                                                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single1"
                                                                                                                                                                  },
                                                                                                                                                                  "else": {
                                                                                                                                                                    "if": {
                                                                                                                                                                      "when": {
                                                                                                                                                                        "op": "==",
                                                                                                                                                                        "left": {
                                                                                                                                                                          "ref": "binding",
                                                                                                                                                                          "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                        },
                                                                                                                                                                        "right": 5
                                                                                                                                                                      },
                                                                                                                                                                      "then": {
                                                                                                                                                                        "ref": "binding",
                                                                                                                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__straightHighAdj"
                                                                                                                                                                      },
                                                                                                                                                                      "else": {
                                                                                                                                                                        "if": {
                                                                                                                                                                          "when": {
                                                                                                                                                                            "op": "==",
                                                                                                                                                                            "left": {
                                                                                                                                                                              "ref": "binding",
                                                                                                                                                                              "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                            },
                                                                                                                                                                            "right": 4
                                                                                                                                                                          },
                                                                                                                                                                          "then": {
                                                                                                                                                                            "ref": "binding",
                                                                                                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__tripRank"
                                                                                                                                                                          },
                                                                                                                                                                          "else": {
                                                                                                                                                                            "if": {
                                                                                                                                                                              "when": {
                                                                                                                                                                                "op": "==",
                                                                                                                                                                                "left": {
                                                                                                                                                                                  "ref": "binding",
                                                                                                                                                                                  "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                                },
                                                                                                                                                                                "right": 3
                                                                                                                                                                              },
                                                                                                                                                                              "then": {
                                                                                                                                                                                "ref": "binding",
                                                                                                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__pairHigh"
                                                                                                                                                                              },
                                                                                                                                                                              "else": {
                                                                                                                                                                                "if": {
                                                                                                                                                                                  "when": {
                                                                                                                                                                                    "op": "==",
                                                                                                                                                                                    "left": {
                                                                                                                                                                                      "ref": "binding",
                                                                                                                                                                                      "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                                    },
                                                                                                                                                                                    "right": 2
                                                                                                                                                                                  },
                                                                                                                                                                                  "then": {
                                                                                                                                                                                    "ref": "binding",
                                                                                                                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__pairHigh"
                                                                                                                                                                                  },
                                                                                                                                                                                  "else": {
                                                                                                                                                                                    "ref": "binding",
                                                                                                                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single1"
                                                                                                                                                                                  }
                                                                                                                                                                                }
                                                                                                                                                                              }
                                                                                                                                                                            }
                                                                                                                                                                          }
                                                                                                                                                                        }
                                                                                                                                                                      }
                                                                                                                                                                    }
                                                                                                                                                                  }
                                                                                                                                                                }
                                                                                                                                                              }
                                                                                                                                                            }
                                                                                                                                                          }
                                                                                                                                                        }
                                                                                                                                                      }
                                                                                                                                                    }
                                                                                                                                                  },
                                                                                                                                                  "in": [
                                                                                                                                                    {
                                                                                                                                                      "let": {
                                                                                                                                                        "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__c2",
                                                                                                                                                        "value": {
                                                                                                                                                          "if": {
                                                                                                                                                            "when": {
                                                                                                                                                              "op": "==",
                                                                                                                                                              "left": {
                                                                                                                                                                "ref": "binding",
                                                                                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                              },
                                                                                                                                                              "right": 8
                                                                                                                                                            },
                                                                                                                                                            "then": {
                                                                                                                                                              "ref": "binding",
                                                                                                                                                              "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single1"
                                                                                                                                                            },
                                                                                                                                                            "else": {
                                                                                                                                                              "if": {
                                                                                                                                                                "when": {
                                                                                                                                                                  "op": "==",
                                                                                                                                                                  "left": {
                                                                                                                                                                    "ref": "binding",
                                                                                                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                  },
                                                                                                                                                                  "right": 7
                                                                                                                                                                },
                                                                                                                                                                "then": {
                                                                                                                                                                  "ref": "binding",
                                                                                                                                                                  "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__pairHigh"
                                                                                                                                                                },
                                                                                                                                                                "else": {
                                                                                                                                                                  "if": {
                                                                                                                                                                    "when": {
                                                                                                                                                                      "op": "==",
                                                                                                                                                                      "left": {
                                                                                                                                                                        "ref": "binding",
                                                                                                                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                      },
                                                                                                                                                                      "right": 6
                                                                                                                                                                    },
                                                                                                                                                                    "then": {
                                                                                                                                                                      "ref": "binding",
                                                                                                                                                                      "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single2"
                                                                                                                                                                    },
                                                                                                                                                                    "else": {
                                                                                                                                                                      "if": {
                                                                                                                                                                        "when": {
                                                                                                                                                                          "op": "==",
                                                                                                                                                                          "left": {
                                                                                                                                                                            "ref": "binding",
                                                                                                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                          },
                                                                                                                                                                          "right": 4
                                                                                                                                                                        },
                                                                                                                                                                        "then": {
                                                                                                                                                                          "ref": "binding",
                                                                                                                                                                          "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single1"
                                                                                                                                                                        },
                                                                                                                                                                        "else": {
                                                                                                                                                                          "if": {
                                                                                                                                                                            "when": {
                                                                                                                                                                              "op": "==",
                                                                                                                                                                              "left": {
                                                                                                                                                                                "ref": "binding",
                                                                                                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                              },
                                                                                                                                                                              "right": 3
                                                                                                                                                                            },
                                                                                                                                                                            "then": {
                                                                                                                                                                              "ref": "binding",
                                                                                                                                                                              "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__pairLow"
                                                                                                                                                                            },
                                                                                                                                                                            "else": {
                                                                                                                                                                              "if": {
                                                                                                                                                                                "when": {
                                                                                                                                                                                  "op": "==",
                                                                                                                                                                                  "left": {
                                                                                                                                                                                    "ref": "binding",
                                                                                                                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                                  },
                                                                                                                                                                                  "right": 2
                                                                                                                                                                                },
                                                                                                                                                                                "then": {
                                                                                                                                                                                  "ref": "binding",
                                                                                                                                                                                  "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single1"
                                                                                                                                                                                },
                                                                                                                                                                                "else": {
                                                                                                                                                                                  "if": {
                                                                                                                                                                                    "when": {
                                                                                                                                                                                      "op": "==",
                                                                                                                                                                                      "left": {
                                                                                                                                                                                        "ref": "binding",
                                                                                                                                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                                      },
                                                                                                                                                                                      "right": 1
                                                                                                                                                                                    },
                                                                                                                                                                                    "then": {
                                                                                                                                                                                      "ref": "binding",
                                                                                                                                                                                      "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single2"
                                                                                                                                                                                    },
                                                                                                                                                                                    "else": 0
                                                                                                                                                                                  }
                                                                                                                                                                                }
                                                                                                                                                                              }
                                                                                                                                                                            }
                                                                                                                                                                          }
                                                                                                                                                                        }
                                                                                                                                                                      }
                                                                                                                                                                    }
                                                                                                                                                                  }
                                                                                                                                                                }
                                                                                                                                                              }
                                                                                                                                                            }
                                                                                                                                                          }
                                                                                                                                                        },
                                                                                                                                                        "in": [
                                                                                                                                                          {
                                                                                                                                                            "let": {
                                                                                                                                                              "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__c3",
                                                                                                                                                              "value": {
                                                                                                                                                                "if": {
                                                                                                                                                                  "when": {
                                                                                                                                                                    "op": "==",
                                                                                                                                                                    "left": {
                                                                                                                                                                      "ref": "binding",
                                                                                                                                                                      "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                    },
                                                                                                                                                                    "right": 6
                                                                                                                                                                  },
                                                                                                                                                                  "then": {
                                                                                                                                                                    "ref": "binding",
                                                                                                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single3"
                                                                                                                                                                  },
                                                                                                                                                                  "else": {
                                                                                                                                                                    "if": {
                                                                                                                                                                      "when": {
                                                                                                                                                                        "op": "==",
                                                                                                                                                                        "left": {
                                                                                                                                                                          "ref": "binding",
                                                                                                                                                                          "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                        },
                                                                                                                                                                        "right": 4
                                                                                                                                                                      },
                                                                                                                                                                      "then": {
                                                                                                                                                                        "ref": "binding",
                                                                                                                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single2"
                                                                                                                                                                      },
                                                                                                                                                                      "else": {
                                                                                                                                                                        "if": {
                                                                                                                                                                          "when": {
                                                                                                                                                                            "op": "==",
                                                                                                                                                                            "left": {
                                                                                                                                                                              "ref": "binding",
                                                                                                                                                                              "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                            },
                                                                                                                                                                            "right": 3
                                                                                                                                                                          },
                                                                                                                                                                          "then": {
                                                                                                                                                                            "ref": "binding",
                                                                                                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single1"
                                                                                                                                                                          },
                                                                                                                                                                          "else": {
                                                                                                                                                                            "if": {
                                                                                                                                                                              "when": {
                                                                                                                                                                                "op": "==",
                                                                                                                                                                                "left": {
                                                                                                                                                                                  "ref": "binding",
                                                                                                                                                                                  "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                                },
                                                                                                                                                                                "right": 2
                                                                                                                                                                              },
                                                                                                                                                                              "then": {
                                                                                                                                                                                "ref": "binding",
                                                                                                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single2"
                                                                                                                                                                              },
                                                                                                                                                                              "else": {
                                                                                                                                                                                "if": {
                                                                                                                                                                                  "when": {
                                                                                                                                                                                    "op": "==",
                                                                                                                                                                                    "left": {
                                                                                                                                                                                      "ref": "binding",
                                                                                                                                                                                      "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                                    },
                                                                                                                                                                                    "right": 1
                                                                                                                                                                                  },
                                                                                                                                                                                  "then": {
                                                                                                                                                                                    "ref": "binding",
                                                                                                                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single3"
                                                                                                                                                                                  },
                                                                                                                                                                                  "else": 0
                                                                                                                                                                                }
                                                                                                                                                                              }
                                                                                                                                                                            }
                                                                                                                                                                          }
                                                                                                                                                                        }
                                                                                                                                                                      }
                                                                                                                                                                    }
                                                                                                                                                                  }
                                                                                                                                                                }
                                                                                                                                                              },
                                                                                                                                                              "in": [
                                                                                                                                                                {
                                                                                                                                                                  "let": {
                                                                                                                                                                    "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__c4",
                                                                                                                                                                    "value": {
                                                                                                                                                                      "if": {
                                                                                                                                                                        "when": {
                                                                                                                                                                          "op": "==",
                                                                                                                                                                          "left": {
                                                                                                                                                                            "ref": "binding",
                                                                                                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                          },
                                                                                                                                                                          "right": 6
                                                                                                                                                                        },
                                                                                                                                                                        "then": {
                                                                                                                                                                          "ref": "binding",
                                                                                                                                                                          "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single4"
                                                                                                                                                                        },
                                                                                                                                                                        "else": {
                                                                                                                                                                          "if": {
                                                                                                                                                                            "when": {
                                                                                                                                                                              "op": "==",
                                                                                                                                                                              "left": {
                                                                                                                                                                                "ref": "binding",
                                                                                                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                              },
                                                                                                                                                                              "right": 2
                                                                                                                                                                            },
                                                                                                                                                                            "then": {
                                                                                                                                                                              "ref": "binding",
                                                                                                                                                                              "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single3"
                                                                                                                                                                            },
                                                                                                                                                                            "else": {
                                                                                                                                                                              "if": {
                                                                                                                                                                                "when": {
                                                                                                                                                                                  "op": "==",
                                                                                                                                                                                  "left": {
                                                                                                                                                                                    "ref": "binding",
                                                                                                                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                                  },
                                                                                                                                                                                  "right": 1
                                                                                                                                                                                },
                                                                                                                                                                                "then": {
                                                                                                                                                                                  "ref": "binding",
                                                                                                                                                                                  "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single4"
                                                                                                                                                                                },
                                                                                                                                                                                "else": 0
                                                                                                                                                                              }
                                                                                                                                                                            }
                                                                                                                                                                          }
                                                                                                                                                                        }
                                                                                                                                                                      }
                                                                                                                                                                    },
                                                                                                                                                                    "in": [
                                                                                                                                                                      {
                                                                                                                                                                        "let": {
                                                                                                                                                                          "bind": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__c5",
                                                                                                                                                                          "value": {
                                                                                                                                                                            "if": {
                                                                                                                                                                              "when": {
                                                                                                                                                                                "op": "==",
                                                                                                                                                                                "left": {
                                                                                                                                                                                  "ref": "binding",
                                                                                                                                                                                  "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                                },
                                                                                                                                                                                "right": 6
                                                                                                                                                                              },
                                                                                                                                                                              "then": {
                                                                                                                                                                                "ref": "binding",
                                                                                                                                                                                "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single5"
                                                                                                                                                                              },
                                                                                                                                                                              "else": {
                                                                                                                                                                                "if": {
                                                                                                                                                                                  "when": {
                                                                                                                                                                                    "op": "==",
                                                                                                                                                                                    "left": {
                                                                                                                                                                                      "ref": "binding",
                                                                                                                                                                                      "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                                    },
                                                                                                                                                                                    "right": 2
                                                                                                                                                                                  },
                                                                                                                                                                                  "then": {
                                                                                                                                                                                    "ref": "binding",
                                                                                                                                                                                    "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single4"
                                                                                                                                                                                  },
                                                                                                                                                                                  "else": {
                                                                                                                                                                                    "if": {
                                                                                                                                                                                      "when": {
                                                                                                                                                                                        "op": "==",
                                                                                                                                                                                        "left": {
                                                                                                                                                                                          "ref": "binding",
                                                                                                                                                                                          "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                                        },
                                                                                                                                                                                        "right": 1
                                                                                                                                                                                      },
                                                                                                                                                                                      "then": {
                                                                                                                                                                                        "ref": "binding",
                                                                                                                                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__single5"
                                                                                                                                                                                      },
                                                                                                                                                                                      "else": 0
                                                                                                                                                                                    }
                                                                                                                                                                                  }
                                                                                                                                                                                }
                                                                                                                                                                              }
                                                                                                                                                                            }
                                                                                                                                                                          },
                                                                                                                                                                          "in": [
                                                                                                                                                                            {
                                                                                                                                                                              "bindValue": {
                                                                                                                                                                                "bind": "$handScore",
                                                                                                                                                                                "value": {
                                                                                                                                                                                  "op": "+",
                                                                                                                                                                                  "left": {
                                                                                                                                                                                    "op": "*",
                                                                                                                                                                                    "left": {
                                                                                                                                                                                      "ref": "binding",
                                                                                                                                                                                      "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__handType"
                                                                                                                                                                                    },
                                                                                                                                                                                    "right": 10000000000
                                                                                                                                                                                  },
                                                                                                                                                                                  "right": {
                                                                                                                                                                                    "op": "+",
                                                                                                                                                                                    "left": {
                                                                                                                                                                                      "op": "*",
                                                                                                                                                                                      "left": {
                                                                                                                                                                                        "ref": "binding",
                                                                                                                                                                                        "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__c1"
                                                                                                                                                                                      },
                                                                                                                                                                                      "right": 100000000
                                                                                                                                                                                    },
                                                                                                                                                                                    "right": {
                                                                                                                                                                                      "op": "+",
                                                                                                                                                                                      "left": {
                                                                                                                                                                                        "op": "*",
                                                                                                                                                                                        "left": {
                                                                                                                                                                                          "ref": "binding",
                                                                                                                                                                                          "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__c2"
                                                                                                                                                                                        },
                                                                                                                                                                                        "right": 1000000
                                                                                                                                                                                      },
                                                                                                                                                                                      "right": {
                                                                                                                                                                                        "op": "+",
                                                                                                                                                                                        "left": {
                                                                                                                                                                                          "op": "*",
                                                                                                                                                                                          "left": {
                                                                                                                                                                                            "ref": "binding",
                                                                                                                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__c3"
                                                                                                                                                                                          },
                                                                                                                                                                                          "right": 10000
                                                                                                                                                                                        },
                                                                                                                                                                                        "right": {
                                                                                                                                                                                          "op": "+",
                                                                                                                                                                                          "left": {
                                                                                                                                                                                            "op": "*",
                                                                                                                                                                                            "left": {
                                                                                                                                                                                              "ref": "binding",
                                                                                                                                                                                              "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__c4"
                                                                                                                                                                                            },
                                                                                                                                                                                            "right": 100
                                                                                                                                                                                          },
                                                                                                                                                                                          "right": {
                                                                                                                                                                                            "ref": "binding",
                                                                                                                                                                                            "name": "$__macro_hand_rank_score_turnStructure_phases_5__onEnter_1__forEach_effects_0__if_then_1__evaluateSubset_compute_0__c5"
                                                                                                                                                                                          }
                                                                                                                                                                                        }
                                                                                                                                                                                      }
                                                                                                                                                                                    }
                                                                                                                                                                                  }
                                                                                                                                                                                }
                                                                                                                                                                              }
                                                                                                                                                                            }
                                                                                                                                                                          ]
                                                                                                                                                                        }
                                                                                                                                                                      }
                                                                                                                                                                    ]
                                                                                                                                                                  }
                                                                                                                                                                }
                                                                                                                                                              ]
                                                                                                                                                            }
                                                                                                                                                          }
                                                                                                                                                        ]
                                                                                                                                                      }
                                                                                                                                                    }
                                                                                                                                                  ]
                                                                                                                                                }
                                                                                                                                              }
                                                                                                                                            ]
                                                                                                                                          }
                                                                                                                                        }
                                                                                                                                      ]
                                                                                                                                    }
                                                                                                                                  }
                                                                                                                                ]
                                                                                                                              }
                                                                                                                            }
                                                                                                                          ]
                                                                                                                        }
                                                                                                                      }
                                                                                                                    ]
                                                                                                                  }
                                                                                                                }
                                                                                                              ]
                                                                                                            }
                                                                                                          }
                                                                                                        ]
                                                                                                      }
                                                                                                    }
                                                                                                  ]
                                                                                                }
                                                                                              }
                                                                                            ]
                                                                                          }
                                                                                        }
                                                                                      ]
                                                                                    }
                                                                                  }
                                                                                ]
                                                                              }
                                                                            }
                                                                          ]
                                                                        }
                                                                      }
                                                                    ]
                                                                  }
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      ]
                                    }
                                  }
                                ]
                              }
                            }
                          ],
                          "scoreExpr": {
                            "ref": "binding",
                            "name": "$handScore"
                          },
                          "resultBind": "$bestScore",
                          "in": [
                            {
                              "setVar": {
                                "scope": "pvar",
                                "player": {
                                  "chosen": "$player"
                                },
                                "var": "showdownScore",
                                "value": {
                                  "ref": "binding",
                                  "name": "$bestScore"
                                }
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            "if": {
              "when": {
                "op": "<=",
                "left": {
                  "aggregate": {
                    "op": "sum",
                    "query": {
                      "query": "players"
                    },
                    "bind": "$player",
                    "valueExpr": {
                      "if": {
                        "when": {
                          "op": "and",
                          "args": [
                            {
                              "op": "==",
                              "left": {
                                "ref": "pvar",
                                "player": {
                                  "chosen": "$player"
                                },
                                "var": "handActive"
                              },
                              "right": true
                            },
                            {
                              "op": "==",
                              "left": {
                                "ref": "pvar",
                                "player": {
                                  "chosen": "$player"
                                },
                                "var": "eliminated"
                              },
                              "right": false
                            }
                          ]
                        },
                        "then": 1,
                        "else": 0
                      }
                    }
                  }
                },
                "right": 1
              },
              "then": [
                {
                  "setVar": {
                    "scope": "global",
                    "var": "oddChipRemainder",
                    "value": {
                      "ref": "gvar",
                      "var": "pot"
                    }
                  }
                },
                {
                  "forEach": {
                    "bind": "$__macro_award_uncontested_pot_turnStructure_phases_5__onEnter_2__if_then_0__player",
                    "over": {
                      "query": "players"
                    },
                    "effects": [
                      {
                        "if": {
                          "when": {
                            "op": "and",
                            "args": [
                              {
                                "op": ">",
                                "left": {
                                  "ref": "gvar",
                                  "var": "oddChipRemainder"
                                },
                                "right": 0
                              },
                              {
                                "op": "==",
                                "left": {
                                  "ref": "pvar",
                                  "player": {
                                    "chosen": "$__macro_award_uncontested_pot_turnStructure_phases_5__onEnter_2__if_then_0__player"
                                  },
                                  "var": "handActive"
                                },
                                "right": true
                              },
                              {
                                "op": "==",
                                "left": {
                                  "ref": "pvar",
                                  "player": {
                                    "chosen": "$__macro_award_uncontested_pot_turnStructure_phases_5__onEnter_2__if_then_0__player"
                                  },
                                  "var": "eliminated"
                                },
                                "right": false
                              }
                            ]
                          },
                          "then": [
                            {
                              "addVar": {
                                "scope": "pvar",
                                "player": {
                                  "chosen": "$__macro_award_uncontested_pot_turnStructure_phases_5__onEnter_2__if_then_0__player"
                                },
                                "var": "chipStack",
                                "delta": {
                                  "ref": "gvar",
                                  "var": "oddChipRemainder"
                                }
                              }
                            },
                            {
                              "setVar": {
                                "scope": "global",
                                "var": "oddChipRemainder",
                                "value": 0
                              }
                            }
                          ]
                        }
                      },
                      {
                        "setVar": {
                          "scope": "pvar",
                          "player": {
                            "chosen": "$__macro_award_uncontested_pot_turnStructure_phases_5__onEnter_2__if_then_0__player"
                          },
                          "var": "totalBet",
                          "value": 0
                        }
                      }
                    ]
                  }
                },
                {
                  "setVar": {
                    "scope": "global",
                    "var": "pot",
                    "value": 0
                  }
                }
              ],
              "else": [
                {
                  "forEach": {
                    "bind": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__tier",
                    "over": {
                      "query": "intsInRange",
                      "min": 1,
                      "max": {
                        "ref": "gvar",
                        "var": "activePlayers"
                      }
                    },
                    "effects": [
                      {
                        "let": {
                          "bind": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__minContribution",
                          "value": {
                            "aggregate": {
                              "op": "min",
                              "query": {
                                "query": "players"
                              },
                              "bind": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player",
                              "valueExpr": {
                                "if": {
                                  "when": {
                                    "op": ">",
                                    "left": {
                                      "ref": "pvar",
                                      "player": {
                                        "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                      },
                                      "var": "totalBet"
                                    },
                                    "right": 0
                                  },
                                  "then": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                    },
                                    "var": "totalBet"
                                  },
                                  "else": 1000000000
                                }
                              }
                            }
                          },
                          "in": [
                            {
                              "if": {
                                "when": {
                                  "op": "<",
                                  "left": {
                                    "ref": "binding",
                                    "name": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__minContribution"
                                  },
                                  "right": 1000000000
                                },
                                "then": [
                                  {
                                    "let": {
                                      "bind": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__contributors",
                                      "value": {
                                        "aggregate": {
                                          "op": "sum",
                                          "query": {
                                            "query": "players"
                                          },
                                          "bind": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player",
                                          "valueExpr": {
                                            "if": {
                                              "when": {
                                                "op": ">",
                                                "left": {
                                                  "ref": "pvar",
                                                  "player": {
                                                    "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                  },
                                                  "var": "totalBet"
                                                },
                                                "right": 0
                                              },
                                              "then": 1,
                                              "else": 0
                                            }
                                          }
                                        }
                                      },
                                      "in": [
                                        {
                                          "let": {
                                            "bind": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__layerAmount",
                                            "value": {
                                              "op": "*",
                                              "left": {
                                                "ref": "binding",
                                                "name": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__minContribution"
                                              },
                                              "right": {
                                                "ref": "binding",
                                                "name": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__contributors"
                                              }
                                            },
                                            "in": [
                                              {
                                                "let": {
                                                  "bind": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__bestScore",
                                                  "value": {
                                                    "aggregate": {
                                                      "op": "max",
                                                      "query": {
                                                        "query": "players"
                                                      },
                                                      "bind": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player",
                                                      "valueExpr": {
                                                        "if": {
                                                          "when": {
                                                            "op": "and",
                                                            "args": [
                                                              {
                                                                "op": "==",
                                                                "left": {
                                                                  "ref": "pvar",
                                                                  "player": {
                                                                    "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                                  },
                                                                  "var": "handActive"
                                                                },
                                                                "right": true
                                                              },
                                                              {
                                                                "op": ">",
                                                                "left": {
                                                                  "ref": "pvar",
                                                                  "player": {
                                                                    "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                                  },
                                                                  "var": "totalBet"
                                                                },
                                                                "right": 0
                                                              }
                                                            ]
                                                          },
                                                          "then": {
                                                            "ref": "pvar",
                                                            "player": {
                                                              "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                            },
                                                            "var": "showdownScore"
                                                          },
                                                          "else": -1
                                                        }
                                                      }
                                                    }
                                                  },
                                                  "in": [
                                                    {
                                                      "let": {
                                                        "bind": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__winnerCount",
                                                        "value": {
                                                          "aggregate": {
                                                            "op": "sum",
                                                            "query": {
                                                              "query": "players"
                                                            },
                                                            "bind": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player",
                                                            "valueExpr": {
                                                              "if": {
                                                                "when": {
                                                                  "op": "and",
                                                                  "args": [
                                                                    {
                                                                      "op": "==",
                                                                      "left": {
                                                                        "ref": "pvar",
                                                                        "player": {
                                                                          "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                                        },
                                                                        "var": "handActive"
                                                                      },
                                                                      "right": true
                                                                    },
                                                                    {
                                                                      "op": ">",
                                                                      "left": {
                                                                        "ref": "pvar",
                                                                        "player": {
                                                                          "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                                        },
                                                                        "var": "totalBet"
                                                                      },
                                                                      "right": 0
                                                                    },
                                                                    {
                                                                      "op": "==",
                                                                      "left": {
                                                                        "ref": "pvar",
                                                                        "player": {
                                                                          "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                                        },
                                                                        "var": "showdownScore"
                                                                      },
                                                                      "right": {
                                                                        "ref": "binding",
                                                                        "name": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__bestScore"
                                                                      }
                                                                    }
                                                                  ]
                                                                },
                                                                "then": 1,
                                                                "else": 0
                                                              }
                                                            }
                                                          }
                                                        },
                                                        "in": [
                                                          {
                                                            "if": {
                                                              "when": {
                                                                "op": ">",
                                                                "left": {
                                                                  "ref": "binding",
                                                                  "name": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__winnerCount"
                                                                },
                                                                "right": 0
                                                              },
                                                              "then": [
                                                                {
                                                                  "let": {
                                                                    "bind": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__baseShare",
                                                                    "value": {
                                                                      "op": "floorDiv",
                                                                      "left": {
                                                                        "ref": "binding",
                                                                        "name": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__layerAmount"
                                                                      },
                                                                      "right": {
                                                                        "ref": "binding",
                                                                        "name": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__winnerCount"
                                                                      }
                                                                    },
                                                                    "in": [
                                                                      {
                                                                        "forEach": {
                                                                          "bind": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player",
                                                                          "over": {
                                                                            "query": "players"
                                                                          },
                                                                          "effects": [
                                                                            {
                                                                              "if": {
                                                                                "when": {
                                                                                  "op": "and",
                                                                                  "args": [
                                                                                    {
                                                                                      "op": "==",
                                                                                      "left": {
                                                                                        "ref": "pvar",
                                                                                        "player": {
                                                                                          "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                                                        },
                                                                                        "var": "handActive"
                                                                                      },
                                                                                      "right": true
                                                                                    },
                                                                                    {
                                                                                      "op": ">",
                                                                                      "left": {
                                                                                        "ref": "pvar",
                                                                                        "player": {
                                                                                          "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                                                        },
                                                                                        "var": "totalBet"
                                                                                      },
                                                                                      "right": 0
                                                                                    },
                                                                                    {
                                                                                      "op": "==",
                                                                                      "left": {
                                                                                        "ref": "pvar",
                                                                                        "player": {
                                                                                          "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                                                        },
                                                                                        "var": "showdownScore"
                                                                                      },
                                                                                      "right": {
                                                                                        "ref": "binding",
                                                                                        "name": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__bestScore"
                                                                                      }
                                                                                    }
                                                                                  ]
                                                                                },
                                                                                "then": [
                                                                                  {
                                                                                    "addVar": {
                                                                                      "scope": "pvar",
                                                                                      "player": {
                                                                                        "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                                                      },
                                                                                      "var": "chipStack",
                                                                                      "delta": {
                                                                                        "ref": "binding",
                                                                                        "name": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__baseShare"
                                                                                      }
                                                                                    }
                                                                                  }
                                                                                ]
                                                                              }
                                                                            }
                                                                          ]
                                                                        }
                                                                      },
                                                                      {
                                                                        "setVar": {
                                                                          "scope": "global",
                                                                          "var": "oddChipRemainder",
                                                                          "value": {
                                                                            "op": "-",
                                                                            "left": {
                                                                              "ref": "binding",
                                                                              "name": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__layerAmount"
                                                                            },
                                                                            "right": {
                                                                              "op": "*",
                                                                              "left": {
                                                                                "ref": "binding",
                                                                                "name": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__baseShare"
                                                                              },
                                                                              "right": {
                                                                                "ref": "binding",
                                                                                "name": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__winnerCount"
                                                                              }
                                                                            }
                                                                          }
                                                                        }
                                                                      },
                                                                      {
                                                                        "forEach": {
                                                                          "bind": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player",
                                                                          "over": {
                                                                            "query": "players"
                                                                          },
                                                                          "effects": [
                                                                            {
                                                                              "if": {
                                                                                "when": {
                                                                                  "op": "and",
                                                                                  "args": [
                                                                                    {
                                                                                      "op": ">",
                                                                                      "left": {
                                                                                        "ref": "gvar",
                                                                                        "var": "oddChipRemainder"
                                                                                      },
                                                                                      "right": 0
                                                                                    },
                                                                                    {
                                                                                      "op": "==",
                                                                                      "left": {
                                                                                        "ref": "pvar",
                                                                                        "player": {
                                                                                          "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                                                        },
                                                                                        "var": "handActive"
                                                                                      },
                                                                                      "right": true
                                                                                    },
                                                                                    {
                                                                                      "op": ">",
                                                                                      "left": {
                                                                                        "ref": "pvar",
                                                                                        "player": {
                                                                                          "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                                                        },
                                                                                        "var": "totalBet"
                                                                                      },
                                                                                      "right": 0
                                                                                    },
                                                                                    {
                                                                                      "op": "==",
                                                                                      "left": {
                                                                                        "ref": "pvar",
                                                                                        "player": {
                                                                                          "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                                                        },
                                                                                        "var": "showdownScore"
                                                                                      },
                                                                                      "right": {
                                                                                        "ref": "binding",
                                                                                        "name": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__bestScore"
                                                                                      }
                                                                                    }
                                                                                  ]
                                                                                },
                                                                                "then": [
                                                                                  {
                                                                                    "addVar": {
                                                                                      "scope": "pvar",
                                                                                      "player": {
                                                                                        "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                                                      },
                                                                                      "var": "chipStack",
                                                                                      "delta": 1
                                                                                    }
                                                                                  },
                                                                                  {
                                                                                    "addVar": {
                                                                                      "scope": "global",
                                                                                      "var": "oddChipRemainder",
                                                                                      "delta": -1
                                                                                    }
                                                                                  }
                                                                                ]
                                                                              }
                                                                            }
                                                                          ]
                                                                        }
                                                                      }
                                                                    ]
                                                                  }
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              {
                                                "forEach": {
                                                  "bind": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player",
                                                  "over": {
                                                    "query": "players"
                                                  },
                                                  "effects": [
                                                    {
                                                      "if": {
                                                        "when": {
                                                          "op": ">",
                                                          "left": {
                                                            "ref": "pvar",
                                                            "player": {
                                                              "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                            },
                                                            "var": "totalBet"
                                                          },
                                                          "right": 0
                                                        },
                                                        "then": [
                                                          {
                                                            "addVar": {
                                                              "scope": "pvar",
                                                              "player": {
                                                                "chosen": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__player"
                                                              },
                                                              "var": "totalBet",
                                                              "delta": {
                                                                "op": "-",
                                                                "left": 0,
                                                                "right": {
                                                                  "ref": "binding",
                                                                  "name": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__minContribution"
                                                                }
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              {
                                                "addVar": {
                                                  "scope": "global",
                                                  "var": "pot",
                                                  "delta": {
                                                    "op": "-",
                                                    "left": 0,
                                                    "right": {
                                                      "ref": "binding",
                                                      "name": "$__macro_distribute_contested_pots_turnStructure_phases_5__onEnter_2__if_else_0__layerAmount"
                                                    }
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      ]
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
      },
      {
        "id": "hand-cleanup",
        "onEnter": [
          {
            "moveAll": {
              "from": "community:none",
              "to": "muck:none"
            }
          },
          {
            "moveAll": {
              "from": "burn:none",
              "to": "muck:none"
            }
          },
          {
            "forEach": {
              "bind": "$player",
              "over": {
                "query": "players"
              },
              "effects": [
                {
                  "moveAll": {
                    "from": {
                      "zoneExpr": {
                        "concat": [
                          "hand:",
                          {
                            "ref": "binding",
                            "name": "$player"
                          }
                        ]
                      }
                    },
                    "to": "muck:none"
                  }
                }
              ]
            }
          },
          {
            "forEach": {
              "bind": "$__macro_eliminate_busted_players_turnStructure_phases_6__onEnter_3__player",
              "over": {
                "query": "players"
              },
              "effects": [
                {
                  "if": {
                    "when": {
                      "op": "and",
                      "args": [
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$__macro_eliminate_busted_players_turnStructure_phases_6__onEnter_3__player"
                            },
                            "var": "eliminated"
                          },
                          "right": false
                        },
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$__macro_eliminate_busted_players_turnStructure_phases_6__onEnter_3__player"
                            },
                            "var": "chipStack"
                          },
                          "right": 0
                        }
                      ]
                    },
                    "then": [
                      {
                        "setVar": {
                          "scope": "pvar",
                          "player": {
                            "chosen": "$__macro_eliminate_busted_players_turnStructure_phases_6__onEnter_3__player"
                          },
                          "var": "eliminated",
                          "value": true
                        }
                      },
                      {
                        "addVar": {
                          "scope": "global",
                          "var": "activePlayers",
                          "delta": -1
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            "addVar": {
              "scope": "global",
              "var": "handsPlayed",
              "delta": 1
            }
          },
          {
            "let": {
              "bind": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__nextBlindLevel",
              "value": {
                "op": "+",
                "left": {
                  "ref": "gvar",
                  "var": "blindLevel"
                },
                "right": 1
              },
              "in": [
                {
                  "let": {
                    "bind": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__maxBlindLevel",
                    "value": {
                      "aggregate": {
                        "op": "max",
                        "query": {
                          "query": "assetRows",
                          "tableId": "tournament-standard::settings.blindSchedule"
                        },
                        "bind": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__row",
                        "valueExpr": {
                          "ref": "assetField",
                          "row": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__row",
                          "tableId": "tournament-standard::settings.blindSchedule",
                          "field": "level"
                        }
                      }
                    },
                    "in": [
                      {
                        "if": {
                          "when": {
                            "op": "<=",
                            "left": {
                              "ref": "binding",
                              "name": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__nextBlindLevel"
                            },
                            "right": {
                              "ref": "binding",
                              "name": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__maxBlindLevel"
                            }
                          },
                          "then": [
                            {
                              "let": {
                                "bind": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__handsRequiredForNextLevel",
                                "value": {
                                  "aggregate": {
                                    "op": "sum",
                                    "query": {
                                      "query": "assetRows",
                                      "tableId": "tournament-standard::settings.blindSchedule"
                                    },
                                    "bind": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__row",
                                    "valueExpr": {
                                      "if": {
                                        "when": {
                                          "op": "<",
                                          "left": {
                                            "ref": "assetField",
                                            "row": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__row",
                                            "tableId": "tournament-standard::settings.blindSchedule",
                                            "field": "level"
                                          },
                                          "right": {
                                            "ref": "binding",
                                            "name": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__nextBlindLevel"
                                          }
                                        },
                                        "then": {
                                          "ref": "assetField",
                                          "row": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__row",
                                          "tableId": "tournament-standard::settings.blindSchedule",
                                          "field": "handsUntilNext"
                                        },
                                        "else": 0
                                      }
                                    }
                                  }
                                },
                                "in": [
                                  {
                                    "if": {
                                      "when": {
                                        "op": ">=",
                                        "left": {
                                          "ref": "gvar",
                                          "var": "handsPlayed"
                                        },
                                        "right": {
                                          "ref": "binding",
                                          "name": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__handsRequiredForNextLevel"
                                        }
                                      },
                                      "then": [
                                        {
                                          "forEach": {
                                            "bind": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__blindRow",
                                            "over": {
                                              "query": "assetRows",
                                              "tableId": "tournament-standard::settings.blindSchedule",
                                              "where": [
                                                {
                                                  "field": "level",
                                                  "op": "eq",
                                                  "value": {
                                                    "ref": "binding",
                                                    "name": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__nextBlindLevel"
                                                  }
                                                }
                                              ],
                                              "cardinality": "exactlyOne"
                                            },
                                            "effects": [
                                              {
                                                "setVar": {
                                                  "scope": "global",
                                                  "var": "blindLevel",
                                                  "value": {
                                                    "ref": "assetField",
                                                    "row": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__blindRow",
                                                    "tableId": "tournament-standard::settings.blindSchedule",
                                                    "field": "level"
                                                  }
                                                }
                                              },
                                              {
                                                "setVar": {
                                                  "scope": "global",
                                                  "var": "smallBlind",
                                                  "value": {
                                                    "ref": "assetField",
                                                    "row": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__blindRow",
                                                    "tableId": "tournament-standard::settings.blindSchedule",
                                                    "field": "sb"
                                                  }
                                                }
                                              },
                                              {
                                                "setVar": {
                                                  "scope": "global",
                                                  "var": "bigBlind",
                                                  "value": {
                                                    "ref": "assetField",
                                                    "row": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__blindRow",
                                                    "tableId": "tournament-standard::settings.blindSchedule",
                                                    "field": "bb"
                                                  }
                                                }
                                              },
                                              {
                                                "setVar": {
                                                  "scope": "global",
                                                  "var": "ante",
                                                  "value": {
                                                    "ref": "assetField",
                                                    "row": "$__macro_escalate_blinds_turnStructure_phases_6__onEnter_5__blindRow",
                                                    "tableId": "tournament-standard::settings.blindSchedule",
                                                    "field": "ante"
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      ]
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
      }
    ]
  },
  "turnOrder": {
    "type": "roundRobin"
  },
  "actions": [
    {
      "id": "fold",
      "actor": "active",
      "executor": "actor",
      "phase": [
        "preflop",
        "flop",
        "turn",
        "river"
      ],
      "params": [],
      "pre": {
        "op": "and",
        "args": [
          {
            "op": "==",
            "left": {
              "ref": "pvar",
              "player": "actor",
              "var": "handActive"
            },
            "right": true
          },
          {
            "op": "==",
            "left": {
              "ref": "pvar",
              "player": "actor",
              "var": "allIn"
            },
            "right": false
          }
        ]
      },
      "cost": [],
      "effects": [
        {
          "setVar": {
            "scope": "pvar",
            "player": "actor",
            "var": "handActive",
            "value": false
          }
        },
        {
          "moveAll": {
            "from": {
              "zoneExpr": {
                "concat": [
                  "hand:",
                  {
                    "ref": "activePlayer"
                  }
                ]
              }
            },
            "to": "muck:none"
          }
        },
        {
          "setVar": {
            "scope": "pvar",
            "player": "actor",
            "var": "actedSinceLastFullRaise",
            "value": true
          }
        },
        {
          "if": {
            "when": {
              "op": "and",
              "args": [
                {
                  "op": "==",
                  "left": {
                    "ref": "gvar",
                    "var": "handPhase"
                  },
                  "right": 0
                },
                {
                  "op": "==",
                  "left": {
                    "ref": "activePlayer"
                  },
                  "right": {
                    "ref": "gvar",
                    "var": "preflopBigBlindSeat"
                  }
                }
              ]
            },
            "then": [
              {
                "setVar": {
                  "scope": "global",
                  "var": "preflopBigBlindOptionOpen",
                  "value": false
                }
              }
            ]
          }
        },
        {
          "setVar": {
            "scope": "global",
            "var": "bettingClosed",
            "value": true
          }
        },
        {
          "forEach": {
            "bind": "$__macro_betting_round_completion_actions_0__effects_4__player",
            "over": {
              "query": "players"
            },
            "effects": [
              {
                "if": {
                  "when": {
                    "op": "and",
                    "args": [
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_0__effects_4__player"
                          },
                          "var": "eliminated"
                        },
                        "right": false
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_0__effects_4__player"
                          },
                          "var": "handActive"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_0__effects_4__player"
                          },
                          "var": "allIn"
                        },
                        "right": false
                      },
                      {
                        "op": "!=",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_0__effects_4__player"
                          },
                          "var": "streetBet"
                        },
                        "right": {
                          "ref": "gvar",
                          "var": "currentBet"
                        }
                      }
                    ]
                  },
                  "then": [
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "bettingClosed",
                        "value": false
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "let": {
            "bind": "$__macro_betting_round_completion_actions_0__effects_4__bbSeatFromState",
            "value": {
              "ref": "gvar",
              "var": "preflopBigBlindSeat"
            },
            "in": [
              {
                "if": {
                  "when": {
                    "op": "and",
                    "args": [
                      {
                        "op": "==",
                        "left": {
                          "ref": "gvar",
                          "var": "handPhase"
                        },
                        "right": 0
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "gvar",
                          "var": "preflopBigBlindOptionOpen"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "gvar",
                          "var": "currentBet"
                        },
                        "right": {
                          "ref": "gvar",
                          "var": "bigBlind"
                        }
                      },
                      {
                        "op": "not",
                        "arg": {
                          "op": "<=",
                          "left": {
                            "aggregate": {
                              "op": "sum",
                              "query": {
                                "query": "players"
                              },
                              "bind": "$__macro_betting_round_completion_actions_0__effects_4__player",
                              "valueExpr": {
                                "if": {
                                  "when": {
                                    "op": "and",
                                    "args": [
                                      {
                                        "op": "==",
                                        "left": {
                                          "ref": "pvar",
                                          "player": {
                                            "chosen": "$__macro_betting_round_completion_actions_0__effects_4__player"
                                          },
                                          "var": "handActive"
                                        },
                                        "right": true
                                      },
                                      {
                                        "op": "==",
                                        "left": {
                                          "ref": "pvar",
                                          "player": {
                                            "chosen": "$__macro_betting_round_completion_actions_0__effects_4__player"
                                          },
                                          "var": "eliminated"
                                        },
                                        "right": false
                                      }
                                    ]
                                  },
                                  "then": 1,
                                  "else": 0
                                }
                              }
                            }
                          },
                          "right": 1
                        }
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_0__effects_4__bbSeatFromState"
                          },
                          "var": "handActive"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_0__effects_4__bbSeatFromState"
                          },
                          "var": "allIn"
                        },
                        "right": false
                      }
                    ]
                  },
                  "then": [
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "bettingClosed",
                        "value": false
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "==",
              "left": {
                "ref": "gvar",
                "var": "bettingClosed"
              },
              "right": false
            },
            "then": [
              {
                "setVar": {
                  "scope": "global",
                  "var": "bettingClosed",
                  "value": true
                }
              },
              {
                "forEach": {
                  "bind": "$__macro_find_next_to_act_actions_0__effects_5__macro_advance_after_betting__0__if_then_0__nextSeat",
                  "over": {
                    "query": "nextInOrderByCondition",
                    "source": {
                      "query": "players"
                    },
                    "from": {
                      "ref": "gvar",
                      "var": "actingPosition"
                    },
                    "bind": "$seatCandidate",
                    "where": {
                      "op": "and",
                      "args": [
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$seatCandidate"
                            },
                            "var": "eliminated"
                          },
                          "right": false
                        },
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$seatCandidate"
                            },
                            "var": "handActive"
                          },
                          "right": true
                        },
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$seatCandidate"
                            },
                            "var": "allIn"
                          },
                          "right": false
                        }
                      ]
                    }
                  },
                  "effects": [
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "bettingClosed",
                        "value": false
                      }
                    },
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "actingPosition",
                        "value": {
                          "ref": "binding",
                          "name": "$__macro_find_next_to_act_actions_0__effects_5__macro_advance_after_betting__0__if_then_0__nextSeat"
                        }
                      }
                    },
                    {
                      "setActivePlayer": {
                        "player": {
                          "chosen": "$__macro_find_next_to_act_actions_0__effects_5__macro_advance_after_betting__0__if_then_0__nextSeat"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "<=",
              "left": {
                "aggregate": {
                  "op": "sum",
                  "query": {
                    "query": "players"
                  },
                  "bind": "$__macro_advance_after_betting_actions_0__effects_5__player",
                  "valueExpr": {
                    "if": {
                      "when": {
                        "op": "and",
                        "args": [
                          {
                            "op": "==",
                            "left": {
                              "ref": "pvar",
                              "player": {
                                "chosen": "$__macro_advance_after_betting_actions_0__effects_5__player"
                              },
                              "var": "handActive"
                            },
                            "right": true
                          },
                          {
                            "op": "==",
                            "left": {
                              "ref": "pvar",
                              "player": {
                                "chosen": "$__macro_advance_after_betting_actions_0__effects_5__player"
                              },
                              "var": "eliminated"
                            },
                            "right": false
                          }
                        ]
                      },
                      "then": 1,
                      "else": 0
                    }
                  }
                }
              },
              "right": 1
            },
            "then": [
              {
                "gotoPhaseExact": {
                  "phase": "showdown"
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "and",
              "args": [
                {
                  "op": "==",
                  "left": {
                    "ref": "gvar",
                    "var": "bettingClosed"
                  },
                  "right": true
                },
                {
                  "op": "not",
                  "arg": {
                    "op": "<=",
                    "left": {
                      "aggregate": {
                        "op": "sum",
                        "query": {
                          "query": "players"
                        },
                        "bind": "$__macro_advance_after_betting_actions_0__effects_5__player",
                        "valueExpr": {
                          "if": {
                            "when": {
                              "op": "and",
                              "args": [
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$__macro_advance_after_betting_actions_0__effects_5__player"
                                    },
                                    "var": "handActive"
                                  },
                                  "right": true
                                },
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$__macro_advance_after_betting_actions_0__effects_5__player"
                                    },
                                    "var": "eliminated"
                                  },
                                  "right": false
                                }
                              ]
                            },
                            "then": 1,
                            "else": 0
                          }
                        }
                      }
                    },
                    "right": 1
                  }
                }
              ]
            },
            "then": [
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 0
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "flop"
                      }
                    }
                  ]
                }
              },
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 1
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "turn"
                      }
                    }
                  ]
                }
              },
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 2
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "river"
                      }
                    }
                  ]
                }
              },
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 3
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "showdown"
                      }
                    }
                  ]
                }
              }
            ]
          }
        }
      ],
      "limits": []
    },
    {
      "id": "check",
      "actor": "active",
      "executor": "actor",
      "phase": [
        "preflop",
        "flop",
        "turn",
        "river"
      ],
      "params": [],
      "pre": {
        "op": "and",
        "args": [
          {
            "op": "==",
            "left": {
              "ref": "pvar",
              "player": "actor",
              "var": "handActive"
            },
            "right": true
          },
          {
            "op": "==",
            "left": {
              "ref": "pvar",
              "player": "actor",
              "var": "allIn"
            },
            "right": false
          },
          {
            "op": "==",
            "left": {
              "ref": "pvar",
              "player": "actor",
              "var": "streetBet"
            },
            "right": {
              "ref": "gvar",
              "var": "currentBet"
            }
          }
        ]
      },
      "cost": [],
      "effects": [
        {
          "setVar": {
            "scope": "pvar",
            "player": "actor",
            "var": "actedSinceLastFullRaise",
            "value": true
          }
        },
        {
          "if": {
            "when": {
              "op": "and",
              "args": [
                {
                  "op": "==",
                  "left": {
                    "ref": "gvar",
                    "var": "handPhase"
                  },
                  "right": 0
                },
                {
                  "op": "==",
                  "left": {
                    "ref": "activePlayer"
                  },
                  "right": {
                    "ref": "gvar",
                    "var": "preflopBigBlindSeat"
                  }
                }
              ]
            },
            "then": [
              {
                "setVar": {
                  "scope": "global",
                  "var": "preflopBigBlindOptionOpen",
                  "value": false
                }
              }
            ]
          }
        },
        {
          "setVar": {
            "scope": "global",
            "var": "bettingClosed",
            "value": true
          }
        },
        {
          "forEach": {
            "bind": "$__macro_betting_round_completion_actions_1__effects_2__player",
            "over": {
              "query": "players"
            },
            "effects": [
              {
                "if": {
                  "when": {
                    "op": "and",
                    "args": [
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_1__effects_2__player"
                          },
                          "var": "eliminated"
                        },
                        "right": false
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_1__effects_2__player"
                          },
                          "var": "handActive"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_1__effects_2__player"
                          },
                          "var": "allIn"
                        },
                        "right": false
                      },
                      {
                        "op": "!=",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_1__effects_2__player"
                          },
                          "var": "streetBet"
                        },
                        "right": {
                          "ref": "gvar",
                          "var": "currentBet"
                        }
                      }
                    ]
                  },
                  "then": [
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "bettingClosed",
                        "value": false
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "let": {
            "bind": "$__macro_betting_round_completion_actions_1__effects_2__bbSeatFromState",
            "value": {
              "ref": "gvar",
              "var": "preflopBigBlindSeat"
            },
            "in": [
              {
                "if": {
                  "when": {
                    "op": "and",
                    "args": [
                      {
                        "op": "==",
                        "left": {
                          "ref": "gvar",
                          "var": "handPhase"
                        },
                        "right": 0
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "gvar",
                          "var": "preflopBigBlindOptionOpen"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "gvar",
                          "var": "currentBet"
                        },
                        "right": {
                          "ref": "gvar",
                          "var": "bigBlind"
                        }
                      },
                      {
                        "op": "not",
                        "arg": {
                          "op": "<=",
                          "left": {
                            "aggregate": {
                              "op": "sum",
                              "query": {
                                "query": "players"
                              },
                              "bind": "$__macro_betting_round_completion_actions_1__effects_2__player",
                              "valueExpr": {
                                "if": {
                                  "when": {
                                    "op": "and",
                                    "args": [
                                      {
                                        "op": "==",
                                        "left": {
                                          "ref": "pvar",
                                          "player": {
                                            "chosen": "$__macro_betting_round_completion_actions_1__effects_2__player"
                                          },
                                          "var": "handActive"
                                        },
                                        "right": true
                                      },
                                      {
                                        "op": "==",
                                        "left": {
                                          "ref": "pvar",
                                          "player": {
                                            "chosen": "$__macro_betting_round_completion_actions_1__effects_2__player"
                                          },
                                          "var": "eliminated"
                                        },
                                        "right": false
                                      }
                                    ]
                                  },
                                  "then": 1,
                                  "else": 0
                                }
                              }
                            }
                          },
                          "right": 1
                        }
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_1__effects_2__bbSeatFromState"
                          },
                          "var": "handActive"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_1__effects_2__bbSeatFromState"
                          },
                          "var": "allIn"
                        },
                        "right": false
                      }
                    ]
                  },
                  "then": [
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "bettingClosed",
                        "value": false
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "==",
              "left": {
                "ref": "gvar",
                "var": "bettingClosed"
              },
              "right": false
            },
            "then": [
              {
                "setVar": {
                  "scope": "global",
                  "var": "bettingClosed",
                  "value": true
                }
              },
              {
                "forEach": {
                  "bind": "$__macro_find_next_to_act_actions_1__effects_3__macro_advance_after_betting__0__if_then_0__nextSeat",
                  "over": {
                    "query": "nextInOrderByCondition",
                    "source": {
                      "query": "players"
                    },
                    "from": {
                      "ref": "gvar",
                      "var": "actingPosition"
                    },
                    "bind": "$seatCandidate",
                    "where": {
                      "op": "and",
                      "args": [
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$seatCandidate"
                            },
                            "var": "eliminated"
                          },
                          "right": false
                        },
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$seatCandidate"
                            },
                            "var": "handActive"
                          },
                          "right": true
                        },
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$seatCandidate"
                            },
                            "var": "allIn"
                          },
                          "right": false
                        }
                      ]
                    }
                  },
                  "effects": [
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "bettingClosed",
                        "value": false
                      }
                    },
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "actingPosition",
                        "value": {
                          "ref": "binding",
                          "name": "$__macro_find_next_to_act_actions_1__effects_3__macro_advance_after_betting__0__if_then_0__nextSeat"
                        }
                      }
                    },
                    {
                      "setActivePlayer": {
                        "player": {
                          "chosen": "$__macro_find_next_to_act_actions_1__effects_3__macro_advance_after_betting__0__if_then_0__nextSeat"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "<=",
              "left": {
                "aggregate": {
                  "op": "sum",
                  "query": {
                    "query": "players"
                  },
                  "bind": "$__macro_advance_after_betting_actions_1__effects_3__player",
                  "valueExpr": {
                    "if": {
                      "when": {
                        "op": "and",
                        "args": [
                          {
                            "op": "==",
                            "left": {
                              "ref": "pvar",
                              "player": {
                                "chosen": "$__macro_advance_after_betting_actions_1__effects_3__player"
                              },
                              "var": "handActive"
                            },
                            "right": true
                          },
                          {
                            "op": "==",
                            "left": {
                              "ref": "pvar",
                              "player": {
                                "chosen": "$__macro_advance_after_betting_actions_1__effects_3__player"
                              },
                              "var": "eliminated"
                            },
                            "right": false
                          }
                        ]
                      },
                      "then": 1,
                      "else": 0
                    }
                  }
                }
              },
              "right": 1
            },
            "then": [
              {
                "gotoPhaseExact": {
                  "phase": "showdown"
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "and",
              "args": [
                {
                  "op": "==",
                  "left": {
                    "ref": "gvar",
                    "var": "bettingClosed"
                  },
                  "right": true
                },
                {
                  "op": "not",
                  "arg": {
                    "op": "<=",
                    "left": {
                      "aggregate": {
                        "op": "sum",
                        "query": {
                          "query": "players"
                        },
                        "bind": "$__macro_advance_after_betting_actions_1__effects_3__player",
                        "valueExpr": {
                          "if": {
                            "when": {
                              "op": "and",
                              "args": [
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$__macro_advance_after_betting_actions_1__effects_3__player"
                                    },
                                    "var": "handActive"
                                  },
                                  "right": true
                                },
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$__macro_advance_after_betting_actions_1__effects_3__player"
                                    },
                                    "var": "eliminated"
                                  },
                                  "right": false
                                }
                              ]
                            },
                            "then": 1,
                            "else": 0
                          }
                        }
                      }
                    },
                    "right": 1
                  }
                }
              ]
            },
            "then": [
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 0
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "flop"
                      }
                    }
                  ]
                }
              },
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 1
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "turn"
                      }
                    }
                  ]
                }
              },
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 2
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "river"
                      }
                    }
                  ]
                }
              },
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 3
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "showdown"
                      }
                    }
                  ]
                }
              }
            ]
          }
        }
      ],
      "limits": []
    },
    {
      "id": "call",
      "actor": "active",
      "executor": "actor",
      "phase": [
        "preflop",
        "flop",
        "turn",
        "river"
      ],
      "params": [],
      "pre": {
        "op": "and",
        "args": [
          {
            "op": "==",
            "left": {
              "ref": "pvar",
              "player": "actor",
              "var": "handActive"
            },
            "right": true
          },
          {
            "op": "==",
            "left": {
              "ref": "pvar",
              "player": "actor",
              "var": "allIn"
            },
            "right": false
          },
          {
            "op": ">",
            "left": {
              "ref": "gvar",
              "var": "currentBet"
            },
            "right": {
              "ref": "pvar",
              "player": "actor",
              "var": "streetBet"
            }
          }
        ]
      },
      "cost": [],
      "effects": [
        {
          "transferVar": {
            "from": {
              "scope": "pvar",
              "var": "chipStack",
              "player": "actor"
            },
            "to": {
              "scope": "global",
              "var": "pot"
            },
            "amount": {
              "op": "-",
              "left": {
                "ref": "gvar",
                "var": "currentBet"
              },
              "right": {
                "ref": "pvar",
                "player": "actor",
                "var": "streetBet"
              }
            },
            "actualBind": "$callPaid"
          }
        },
        {
          "addVar": {
            "scope": "pvar",
            "player": "actor",
            "var": "streetBet",
            "delta": {
              "ref": "binding",
              "name": "$callPaid"
            }
          }
        },
        {
          "addVar": {
            "scope": "pvar",
            "player": "actor",
            "var": "totalBet",
            "delta": {
              "ref": "binding",
              "name": "$callPaid"
            }
          }
        },
        {
          "if": {
            "when": {
              "op": "==",
              "left": {
                "ref": "pvar",
                "player": "actor",
                "var": "chipStack"
              },
              "right": 0
            },
            "then": [
              {
                "setVar": {
                  "scope": "pvar",
                  "player": "actor",
                  "var": "allIn",
                  "value": true
                }
              }
            ]
          }
        },
        {
          "setVar": {
            "scope": "pvar",
            "player": "actor",
            "var": "actedSinceLastFullRaise",
            "value": true
          }
        },
        {
          "if": {
            "when": {
              "op": "and",
              "args": [
                {
                  "op": "==",
                  "left": {
                    "ref": "gvar",
                    "var": "handPhase"
                  },
                  "right": 0
                },
                {
                  "op": "==",
                  "left": {
                    "ref": "activePlayer"
                  },
                  "right": {
                    "ref": "gvar",
                    "var": "preflopBigBlindSeat"
                  }
                }
              ]
            },
            "then": [
              {
                "setVar": {
                  "scope": "global",
                  "var": "preflopBigBlindOptionOpen",
                  "value": false
                }
              }
            ]
          }
        },
        {
          "setVar": {
            "scope": "global",
            "var": "bettingClosed",
            "value": true
          }
        },
        {
          "forEach": {
            "bind": "$__macro_betting_round_completion_actions_2__effects_6__player",
            "over": {
              "query": "players"
            },
            "effects": [
              {
                "if": {
                  "when": {
                    "op": "and",
                    "args": [
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_2__effects_6__player"
                          },
                          "var": "eliminated"
                        },
                        "right": false
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_2__effects_6__player"
                          },
                          "var": "handActive"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_2__effects_6__player"
                          },
                          "var": "allIn"
                        },
                        "right": false
                      },
                      {
                        "op": "!=",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_2__effects_6__player"
                          },
                          "var": "streetBet"
                        },
                        "right": {
                          "ref": "gvar",
                          "var": "currentBet"
                        }
                      }
                    ]
                  },
                  "then": [
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "bettingClosed",
                        "value": false
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "let": {
            "bind": "$__macro_betting_round_completion_actions_2__effects_6__bbSeatFromState",
            "value": {
              "ref": "gvar",
              "var": "preflopBigBlindSeat"
            },
            "in": [
              {
                "if": {
                  "when": {
                    "op": "and",
                    "args": [
                      {
                        "op": "==",
                        "left": {
                          "ref": "gvar",
                          "var": "handPhase"
                        },
                        "right": 0
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "gvar",
                          "var": "preflopBigBlindOptionOpen"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "gvar",
                          "var": "currentBet"
                        },
                        "right": {
                          "ref": "gvar",
                          "var": "bigBlind"
                        }
                      },
                      {
                        "op": "not",
                        "arg": {
                          "op": "<=",
                          "left": {
                            "aggregate": {
                              "op": "sum",
                              "query": {
                                "query": "players"
                              },
                              "bind": "$__macro_betting_round_completion_actions_2__effects_6__player",
                              "valueExpr": {
                                "if": {
                                  "when": {
                                    "op": "and",
                                    "args": [
                                      {
                                        "op": "==",
                                        "left": {
                                          "ref": "pvar",
                                          "player": {
                                            "chosen": "$__macro_betting_round_completion_actions_2__effects_6__player"
                                          },
                                          "var": "handActive"
                                        },
                                        "right": true
                                      },
                                      {
                                        "op": "==",
                                        "left": {
                                          "ref": "pvar",
                                          "player": {
                                            "chosen": "$__macro_betting_round_completion_actions_2__effects_6__player"
                                          },
                                          "var": "eliminated"
                                        },
                                        "right": false
                                      }
                                    ]
                                  },
                                  "then": 1,
                                  "else": 0
                                }
                              }
                            }
                          },
                          "right": 1
                        }
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_2__effects_6__bbSeatFromState"
                          },
                          "var": "handActive"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_2__effects_6__bbSeatFromState"
                          },
                          "var": "allIn"
                        },
                        "right": false
                      }
                    ]
                  },
                  "then": [
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "bettingClosed",
                        "value": false
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "==",
              "left": {
                "ref": "gvar",
                "var": "bettingClosed"
              },
              "right": false
            },
            "then": [
              {
                "setVar": {
                  "scope": "global",
                  "var": "bettingClosed",
                  "value": true
                }
              },
              {
                "forEach": {
                  "bind": "$__macro_find_next_to_act_actions_2__effects_7__macro_advance_after_betting__0__if_then_0__nextSeat",
                  "over": {
                    "query": "nextInOrderByCondition",
                    "source": {
                      "query": "players"
                    },
                    "from": {
                      "ref": "gvar",
                      "var": "actingPosition"
                    },
                    "bind": "$seatCandidate",
                    "where": {
                      "op": "and",
                      "args": [
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$seatCandidate"
                            },
                            "var": "eliminated"
                          },
                          "right": false
                        },
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$seatCandidate"
                            },
                            "var": "handActive"
                          },
                          "right": true
                        },
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$seatCandidate"
                            },
                            "var": "allIn"
                          },
                          "right": false
                        }
                      ]
                    }
                  },
                  "effects": [
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "bettingClosed",
                        "value": false
                      }
                    },
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "actingPosition",
                        "value": {
                          "ref": "binding",
                          "name": "$__macro_find_next_to_act_actions_2__effects_7__macro_advance_after_betting__0__if_then_0__nextSeat"
                        }
                      }
                    },
                    {
                      "setActivePlayer": {
                        "player": {
                          "chosen": "$__macro_find_next_to_act_actions_2__effects_7__macro_advance_after_betting__0__if_then_0__nextSeat"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "<=",
              "left": {
                "aggregate": {
                  "op": "sum",
                  "query": {
                    "query": "players"
                  },
                  "bind": "$__macro_advance_after_betting_actions_2__effects_7__player",
                  "valueExpr": {
                    "if": {
                      "when": {
                        "op": "and",
                        "args": [
                          {
                            "op": "==",
                            "left": {
                              "ref": "pvar",
                              "player": {
                                "chosen": "$__macro_advance_after_betting_actions_2__effects_7__player"
                              },
                              "var": "handActive"
                            },
                            "right": true
                          },
                          {
                            "op": "==",
                            "left": {
                              "ref": "pvar",
                              "player": {
                                "chosen": "$__macro_advance_after_betting_actions_2__effects_7__player"
                              },
                              "var": "eliminated"
                            },
                            "right": false
                          }
                        ]
                      },
                      "then": 1,
                      "else": 0
                    }
                  }
                }
              },
              "right": 1
            },
            "then": [
              {
                "gotoPhaseExact": {
                  "phase": "showdown"
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "and",
              "args": [
                {
                  "op": "==",
                  "left": {
                    "ref": "gvar",
                    "var": "bettingClosed"
                  },
                  "right": true
                },
                {
                  "op": "not",
                  "arg": {
                    "op": "<=",
                    "left": {
                      "aggregate": {
                        "op": "sum",
                        "query": {
                          "query": "players"
                        },
                        "bind": "$__macro_advance_after_betting_actions_2__effects_7__player",
                        "valueExpr": {
                          "if": {
                            "when": {
                              "op": "and",
                              "args": [
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$__macro_advance_after_betting_actions_2__effects_7__player"
                                    },
                                    "var": "handActive"
                                  },
                                  "right": true
                                },
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$__macro_advance_after_betting_actions_2__effects_7__player"
                                    },
                                    "var": "eliminated"
                                  },
                                  "right": false
                                }
                              ]
                            },
                            "then": 1,
                            "else": 0
                          }
                        }
                      }
                    },
                    "right": 1
                  }
                }
              ]
            },
            "then": [
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 0
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "flop"
                      }
                    }
                  ]
                }
              },
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 1
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "turn"
                      }
                    }
                  ]
                }
              },
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 2
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "river"
                      }
                    }
                  ]
                }
              },
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 3
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "showdown"
                      }
                    }
                  ]
                }
              }
            ]
          }
        }
      ],
      "limits": []
    },
    {
      "id": "raise",
      "actor": "active",
      "executor": "actor",
      "phase": [
        "preflop",
        "flop",
        "turn",
        "river"
      ],
      "params": [
        {
          "name": "raiseAmount",
          "domain": {
            "query": "intsInRange",
            "min": {
              "op": "+",
              "left": {
                "ref": "gvar",
                "var": "currentBet"
              },
              "right": {
                "ref": "gvar",
                "var": "lastRaiseSize"
              }
            },
            "max": {
              "op": "+",
              "left": {
                "ref": "pvar",
                "player": "actor",
                "var": "streetBet"
              },
              "right": {
                "ref": "pvar",
                "player": "actor",
                "var": "chipStack"
              }
            },
            "step": 1,
            "alwaysInclude": [
              {
                "op": "+",
                "left": {
                  "ref": "gvar",
                  "var": "currentBet"
                },
                "right": {
                  "op": "*",
                  "left": {
                    "ref": "gvar",
                    "var": "bigBlind"
                  },
                  "right": 2
                }
              },
              {
                "op": "+",
                "left": {
                  "ref": "gvar",
                  "var": "currentBet"
                },
                "right": {
                  "op": "*",
                  "left": {
                    "ref": "gvar",
                    "var": "bigBlind"
                  },
                  "right": 3
                }
              },
              {
                "op": "+",
                "left": {
                  "ref": "gvar",
                  "var": "currentBet"
                },
                "right": {
                  "op": "*",
                  "left": {
                    "ref": "gvar",
                    "var": "bigBlind"
                  },
                  "right": 5
                }
              }
            ],
            "maxResults": 10
          }
        }
      ],
      "pre": {
        "op": "and",
        "args": [
          {
            "op": "==",
            "left": {
              "ref": "pvar",
              "player": "actor",
              "var": "handActive"
            },
            "right": true
          },
          {
            "op": "==",
            "left": {
              "ref": "pvar",
              "player": "actor",
              "var": "allIn"
            },
            "right": false
          },
          {
            "op": ">",
            "left": {
              "ref": "pvar",
              "player": "actor",
              "var": "chipStack"
            },
            "right": 0
          },
          {
            "op": "==",
            "left": {
              "ref": "pvar",
              "player": "actor",
              "var": "actedSinceLastFullRaise"
            },
            "right": false
          }
        ]
      },
      "cost": [],
      "effects": [
        {
          "let": {
            "bind": "$prevCurrentBet",
            "value": {
              "ref": "gvar",
              "var": "currentBet"
            },
            "in": [
              {
                "transferVar": {
                  "from": {
                    "scope": "pvar",
                    "var": "chipStack",
                    "player": "actor"
                  },
                  "to": {
                    "scope": "global",
                    "var": "pot"
                  },
                  "amount": {
                    "op": "-",
                    "left": {
                      "ref": "binding",
                      "name": "raiseAmount"
                    },
                    "right": {
                      "ref": "pvar",
                      "player": "actor",
                      "var": "streetBet"
                    }
                  },
                  "actualBind": "$raisePaid"
                }
              },
              {
                "addVar": {
                  "scope": "pvar",
                  "player": "actor",
                  "var": "streetBet",
                  "delta": {
                    "ref": "binding",
                    "name": "$raisePaid"
                  }
                }
              },
              {
                "addVar": {
                  "scope": "pvar",
                  "player": "actor",
                  "var": "totalBet",
                  "delta": {
                    "ref": "binding",
                    "name": "$raisePaid"
                  }
                }
              },
              {
                "setVar": {
                  "scope": "global",
                  "var": "currentBet",
                  "value": {
                    "ref": "pvar",
                    "player": "actor",
                    "var": "streetBet"
                  }
                }
              },
              {
                "setVar": {
                  "scope": "global",
                  "var": "lastRaiseSize",
                  "value": {
                    "op": "-",
                    "left": {
                      "ref": "pvar",
                      "player": "actor",
                      "var": "streetBet"
                    },
                    "right": {
                      "ref": "binding",
                      "name": "$prevCurrentBet"
                    }
                  }
                }
              }
            ]
          }
        },
        {
          "forEach": {
            "bind": "$__macro_reset_reopen_state_for_eligible_actors_actions_3__effects_1__player",
            "over": {
              "query": "players"
            },
            "effects": [
              {
                "if": {
                  "when": {
                    "op": "and",
                    "args": [
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_reset_reopen_state_for_eligible_actors_actions_3__effects_1__player"
                          },
                          "var": "eliminated"
                        },
                        "right": false
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_reset_reopen_state_for_eligible_actors_actions_3__effects_1__player"
                          },
                          "var": "handActive"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_reset_reopen_state_for_eligible_actors_actions_3__effects_1__player"
                          },
                          "var": "allIn"
                        },
                        "right": false
                      }
                    ]
                  },
                  "then": [
                    {
                      "setVar": {
                        "scope": "pvar",
                        "player": {
                          "chosen": "$__macro_reset_reopen_state_for_eligible_actors_actions_3__effects_1__player"
                        },
                        "var": "actedSinceLastFullRaise",
                        "value": false
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "==",
              "left": {
                "ref": "pvar",
                "player": "actor",
                "var": "chipStack"
              },
              "right": 0
            },
            "then": [
              {
                "setVar": {
                  "scope": "pvar",
                  "player": "actor",
                  "var": "allIn",
                  "value": true
                }
              }
            ]
          }
        },
        {
          "setVar": {
            "scope": "pvar",
            "player": "actor",
            "var": "actedSinceLastFullRaise",
            "value": true
          }
        },
        {
          "if": {
            "when": {
              "op": "and",
              "args": [
                {
                  "op": "==",
                  "left": {
                    "ref": "gvar",
                    "var": "handPhase"
                  },
                  "right": 0
                },
                {
                  "op": "==",
                  "left": {
                    "ref": "activePlayer"
                  },
                  "right": {
                    "ref": "gvar",
                    "var": "preflopBigBlindSeat"
                  }
                }
              ]
            },
            "then": [
              {
                "setVar": {
                  "scope": "global",
                  "var": "preflopBigBlindOptionOpen",
                  "value": false
                }
              }
            ]
          }
        },
        {
          "setVar": {
            "scope": "global",
            "var": "bettingClosed",
            "value": true
          }
        },
        {
          "forEach": {
            "bind": "$__macro_betting_round_completion_actions_3__effects_5__player",
            "over": {
              "query": "players"
            },
            "effects": [
              {
                "if": {
                  "when": {
                    "op": "and",
                    "args": [
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_3__effects_5__player"
                          },
                          "var": "eliminated"
                        },
                        "right": false
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_3__effects_5__player"
                          },
                          "var": "handActive"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_3__effects_5__player"
                          },
                          "var": "allIn"
                        },
                        "right": false
                      },
                      {
                        "op": "!=",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_3__effects_5__player"
                          },
                          "var": "streetBet"
                        },
                        "right": {
                          "ref": "gvar",
                          "var": "currentBet"
                        }
                      }
                    ]
                  },
                  "then": [
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "bettingClosed",
                        "value": false
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "let": {
            "bind": "$__macro_betting_round_completion_actions_3__effects_5__bbSeatFromState",
            "value": {
              "ref": "gvar",
              "var": "preflopBigBlindSeat"
            },
            "in": [
              {
                "if": {
                  "when": {
                    "op": "and",
                    "args": [
                      {
                        "op": "==",
                        "left": {
                          "ref": "gvar",
                          "var": "handPhase"
                        },
                        "right": 0
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "gvar",
                          "var": "preflopBigBlindOptionOpen"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "gvar",
                          "var": "currentBet"
                        },
                        "right": {
                          "ref": "gvar",
                          "var": "bigBlind"
                        }
                      },
                      {
                        "op": "not",
                        "arg": {
                          "op": "<=",
                          "left": {
                            "aggregate": {
                              "op": "sum",
                              "query": {
                                "query": "players"
                              },
                              "bind": "$__macro_betting_round_completion_actions_3__effects_5__player",
                              "valueExpr": {
                                "if": {
                                  "when": {
                                    "op": "and",
                                    "args": [
                                      {
                                        "op": "==",
                                        "left": {
                                          "ref": "pvar",
                                          "player": {
                                            "chosen": "$__macro_betting_round_completion_actions_3__effects_5__player"
                                          },
                                          "var": "handActive"
                                        },
                                        "right": true
                                      },
                                      {
                                        "op": "==",
                                        "left": {
                                          "ref": "pvar",
                                          "player": {
                                            "chosen": "$__macro_betting_round_completion_actions_3__effects_5__player"
                                          },
                                          "var": "eliminated"
                                        },
                                        "right": false
                                      }
                                    ]
                                  },
                                  "then": 1,
                                  "else": 0
                                }
                              }
                            }
                          },
                          "right": 1
                        }
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_3__effects_5__bbSeatFromState"
                          },
                          "var": "handActive"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_3__effects_5__bbSeatFromState"
                          },
                          "var": "allIn"
                        },
                        "right": false
                      }
                    ]
                  },
                  "then": [
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "bettingClosed",
                        "value": false
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "==",
              "left": {
                "ref": "gvar",
                "var": "bettingClosed"
              },
              "right": false
            },
            "then": [
              {
                "setVar": {
                  "scope": "global",
                  "var": "bettingClosed",
                  "value": true
                }
              },
              {
                "forEach": {
                  "bind": "$__macro_find_next_to_act_actions_3__effects_6__macro_advance_after_betting__0__if_then_0__nextSeat",
                  "over": {
                    "query": "nextInOrderByCondition",
                    "source": {
                      "query": "players"
                    },
                    "from": {
                      "ref": "gvar",
                      "var": "actingPosition"
                    },
                    "bind": "$seatCandidate",
                    "where": {
                      "op": "and",
                      "args": [
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$seatCandidate"
                            },
                            "var": "eliminated"
                          },
                          "right": false
                        },
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$seatCandidate"
                            },
                            "var": "handActive"
                          },
                          "right": true
                        },
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$seatCandidate"
                            },
                            "var": "allIn"
                          },
                          "right": false
                        }
                      ]
                    }
                  },
                  "effects": [
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "bettingClosed",
                        "value": false
                      }
                    },
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "actingPosition",
                        "value": {
                          "ref": "binding",
                          "name": "$__macro_find_next_to_act_actions_3__effects_6__macro_advance_after_betting__0__if_then_0__nextSeat"
                        }
                      }
                    },
                    {
                      "setActivePlayer": {
                        "player": {
                          "chosen": "$__macro_find_next_to_act_actions_3__effects_6__macro_advance_after_betting__0__if_then_0__nextSeat"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "<=",
              "left": {
                "aggregate": {
                  "op": "sum",
                  "query": {
                    "query": "players"
                  },
                  "bind": "$__macro_advance_after_betting_actions_3__effects_6__player",
                  "valueExpr": {
                    "if": {
                      "when": {
                        "op": "and",
                        "args": [
                          {
                            "op": "==",
                            "left": {
                              "ref": "pvar",
                              "player": {
                                "chosen": "$__macro_advance_after_betting_actions_3__effects_6__player"
                              },
                              "var": "handActive"
                            },
                            "right": true
                          },
                          {
                            "op": "==",
                            "left": {
                              "ref": "pvar",
                              "player": {
                                "chosen": "$__macro_advance_after_betting_actions_3__effects_6__player"
                              },
                              "var": "eliminated"
                            },
                            "right": false
                          }
                        ]
                      },
                      "then": 1,
                      "else": 0
                    }
                  }
                }
              },
              "right": 1
            },
            "then": [
              {
                "gotoPhaseExact": {
                  "phase": "showdown"
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "and",
              "args": [
                {
                  "op": "==",
                  "left": {
                    "ref": "gvar",
                    "var": "bettingClosed"
                  },
                  "right": true
                },
                {
                  "op": "not",
                  "arg": {
                    "op": "<=",
                    "left": {
                      "aggregate": {
                        "op": "sum",
                        "query": {
                          "query": "players"
                        },
                        "bind": "$__macro_advance_after_betting_actions_3__effects_6__player",
                        "valueExpr": {
                          "if": {
                            "when": {
                              "op": "and",
                              "args": [
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$__macro_advance_after_betting_actions_3__effects_6__player"
                                    },
                                    "var": "handActive"
                                  },
                                  "right": true
                                },
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$__macro_advance_after_betting_actions_3__effects_6__player"
                                    },
                                    "var": "eliminated"
                                  },
                                  "right": false
                                }
                              ]
                            },
                            "then": 1,
                            "else": 0
                          }
                        }
                      }
                    },
                    "right": 1
                  }
                }
              ]
            },
            "then": [
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 0
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "flop"
                      }
                    }
                  ]
                }
              },
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 1
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "turn"
                      }
                    }
                  ]
                }
              },
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 2
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "river"
                      }
                    }
                  ]
                }
              },
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 3
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "showdown"
                      }
                    }
                  ]
                }
              }
            ]
          }
        }
      ],
      "limits": []
    },
    {
      "id": "allIn",
      "actor": "active",
      "executor": "actor",
      "phase": [
        "preflop",
        "flop",
        "turn",
        "river"
      ],
      "params": [],
      "pre": {
        "op": "and",
        "args": [
          {
            "op": "==",
            "left": {
              "ref": "pvar",
              "player": "actor",
              "var": "handActive"
            },
            "right": true
          },
          {
            "op": "==",
            "left": {
              "ref": "pvar",
              "player": "actor",
              "var": "allIn"
            },
            "right": false
          },
          {
            "op": ">",
            "left": {
              "ref": "pvar",
              "player": "actor",
              "var": "chipStack"
            },
            "right": 0
          },
          {
            "op": "==",
            "left": {
              "ref": "pvar",
              "player": "actor",
              "var": "actedSinceLastFullRaise"
            },
            "right": false
          }
        ]
      },
      "cost": [],
      "effects": [
        {
          "let": {
            "bind": "$prevCurrentBet",
            "value": {
              "ref": "gvar",
              "var": "currentBet"
            },
            "in": [
              {
                "let": {
                  "bind": "$prevLastRaiseSize",
                  "value": {
                    "ref": "gvar",
                    "var": "lastRaiseSize"
                  },
                  "in": [
                    {
                      "transferVar": {
                        "from": {
                          "scope": "pvar",
                          "var": "chipStack",
                          "player": "actor"
                        },
                        "to": {
                          "scope": "global",
                          "var": "pot"
                        },
                        "amount": {
                          "ref": "pvar",
                          "player": "actor",
                          "var": "chipStack"
                        },
                        "actualBind": "$allInPaid"
                      }
                    },
                    {
                      "addVar": {
                        "scope": "pvar",
                        "player": "actor",
                        "var": "streetBet",
                        "delta": {
                          "ref": "binding",
                          "name": "$allInPaid"
                        }
                      }
                    },
                    {
                      "addVar": {
                        "scope": "pvar",
                        "player": "actor",
                        "var": "totalBet",
                        "delta": {
                          "ref": "binding",
                          "name": "$allInPaid"
                        }
                      }
                    },
                    {
                      "setVar": {
                        "scope": "pvar",
                        "player": "actor",
                        "var": "allIn",
                        "value": true
                      }
                    },
                    {
                      "if": {
                        "when": {
                          "op": ">",
                          "left": {
                            "ref": "pvar",
                            "player": "actor",
                            "var": "streetBet"
                          },
                          "right": {
                            "ref": "binding",
                            "name": "$prevCurrentBet"
                          }
                        },
                        "then": [
                          {
                            "setVar": {
                              "scope": "global",
                              "var": "currentBet",
                              "value": {
                                "ref": "pvar",
                                "player": "actor",
                                "var": "streetBet"
                              }
                            }
                          },
                          {
                            "if": {
                              "when": {
                                "op": ">=",
                                "left": {
                                  "op": "-",
                                  "left": {
                                    "ref": "pvar",
                                    "player": "actor",
                                    "var": "streetBet"
                                  },
                                  "right": {
                                    "ref": "binding",
                                    "name": "$prevCurrentBet"
                                  }
                                },
                                "right": {
                                  "ref": "binding",
                                  "name": "$prevLastRaiseSize"
                                }
                              },
                              "then": [
                                {
                                  "setVar": {
                                    "scope": "global",
                                    "var": "lastRaiseSize",
                                    "value": {
                                      "op": "-",
                                      "left": {
                                        "ref": "pvar",
                                        "player": "actor",
                                        "var": "streetBet"
                                      },
                                      "right": {
                                        "ref": "binding",
                                        "name": "$prevCurrentBet"
                                      }
                                    }
                                  }
                                },
                                {
                                  "forEach": {
                                    "bind": "$__macro_reset_reopen_state_for_eligible_actors_actions_4__effects_0__let_in_0__let_in_4__if_then_1__if_then_1__player",
                                    "over": {
                                      "query": "players"
                                    },
                                    "effects": [
                                      {
                                        "if": {
                                          "when": {
                                            "op": "and",
                                            "args": [
                                              {
                                                "op": "==",
                                                "left": {
                                                  "ref": "pvar",
                                                  "player": {
                                                    "chosen": "$__macro_reset_reopen_state_for_eligible_actors_actions_4__effects_0__let_in_0__let_in_4__if_then_1__if_then_1__player"
                                                  },
                                                  "var": "eliminated"
                                                },
                                                "right": false
                                              },
                                              {
                                                "op": "==",
                                                "left": {
                                                  "ref": "pvar",
                                                  "player": {
                                                    "chosen": "$__macro_reset_reopen_state_for_eligible_actors_actions_4__effects_0__let_in_0__let_in_4__if_then_1__if_then_1__player"
                                                  },
                                                  "var": "handActive"
                                                },
                                                "right": true
                                              },
                                              {
                                                "op": "==",
                                                "left": {
                                                  "ref": "pvar",
                                                  "player": {
                                                    "chosen": "$__macro_reset_reopen_state_for_eligible_actors_actions_4__effects_0__let_in_0__let_in_4__if_then_1__if_then_1__player"
                                                  },
                                                  "var": "allIn"
                                                },
                                                "right": false
                                              }
                                            ]
                                          },
                                          "then": [
                                            {
                                              "setVar": {
                                                "scope": "pvar",
                                                "player": {
                                                  "chosen": "$__macro_reset_reopen_state_for_eligible_actors_actions_4__effects_0__let_in_0__let_in_4__if_then_1__if_then_1__player"
                                                },
                                                "var": "actedSinceLastFullRaise",
                                                "value": false
                                              }
                                            }
                                          ]
                                        }
                                      }
                                    ]
                                  }
                                }
                              ]
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "setVar": {
            "scope": "pvar",
            "player": "actor",
            "var": "actedSinceLastFullRaise",
            "value": true
          }
        },
        {
          "if": {
            "when": {
              "op": "and",
              "args": [
                {
                  "op": "==",
                  "left": {
                    "ref": "gvar",
                    "var": "handPhase"
                  },
                  "right": 0
                },
                {
                  "op": "==",
                  "left": {
                    "ref": "activePlayer"
                  },
                  "right": {
                    "ref": "gvar",
                    "var": "preflopBigBlindSeat"
                  }
                }
              ]
            },
            "then": [
              {
                "setVar": {
                  "scope": "global",
                  "var": "preflopBigBlindOptionOpen",
                  "value": false
                }
              }
            ]
          }
        },
        {
          "setVar": {
            "scope": "global",
            "var": "bettingClosed",
            "value": true
          }
        },
        {
          "forEach": {
            "bind": "$__macro_betting_round_completion_actions_4__effects_3__player",
            "over": {
              "query": "players"
            },
            "effects": [
              {
                "if": {
                  "when": {
                    "op": "and",
                    "args": [
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_4__effects_3__player"
                          },
                          "var": "eliminated"
                        },
                        "right": false
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_4__effects_3__player"
                          },
                          "var": "handActive"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_4__effects_3__player"
                          },
                          "var": "allIn"
                        },
                        "right": false
                      },
                      {
                        "op": "!=",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_4__effects_3__player"
                          },
                          "var": "streetBet"
                        },
                        "right": {
                          "ref": "gvar",
                          "var": "currentBet"
                        }
                      }
                    ]
                  },
                  "then": [
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "bettingClosed",
                        "value": false
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "let": {
            "bind": "$__macro_betting_round_completion_actions_4__effects_3__bbSeatFromState",
            "value": {
              "ref": "gvar",
              "var": "preflopBigBlindSeat"
            },
            "in": [
              {
                "if": {
                  "when": {
                    "op": "and",
                    "args": [
                      {
                        "op": "==",
                        "left": {
                          "ref": "gvar",
                          "var": "handPhase"
                        },
                        "right": 0
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "gvar",
                          "var": "preflopBigBlindOptionOpen"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "gvar",
                          "var": "currentBet"
                        },
                        "right": {
                          "ref": "gvar",
                          "var": "bigBlind"
                        }
                      },
                      {
                        "op": "not",
                        "arg": {
                          "op": "<=",
                          "left": {
                            "aggregate": {
                              "op": "sum",
                              "query": {
                                "query": "players"
                              },
                              "bind": "$__macro_betting_round_completion_actions_4__effects_3__player",
                              "valueExpr": {
                                "if": {
                                  "when": {
                                    "op": "and",
                                    "args": [
                                      {
                                        "op": "==",
                                        "left": {
                                          "ref": "pvar",
                                          "player": {
                                            "chosen": "$__macro_betting_round_completion_actions_4__effects_3__player"
                                          },
                                          "var": "handActive"
                                        },
                                        "right": true
                                      },
                                      {
                                        "op": "==",
                                        "left": {
                                          "ref": "pvar",
                                          "player": {
                                            "chosen": "$__macro_betting_round_completion_actions_4__effects_3__player"
                                          },
                                          "var": "eliminated"
                                        },
                                        "right": false
                                      }
                                    ]
                                  },
                                  "then": 1,
                                  "else": 0
                                }
                              }
                            }
                          },
                          "right": 1
                        }
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_4__effects_3__bbSeatFromState"
                          },
                          "var": "handActive"
                        },
                        "right": true
                      },
                      {
                        "op": "==",
                        "left": {
                          "ref": "pvar",
                          "player": {
                            "chosen": "$__macro_betting_round_completion_actions_4__effects_3__bbSeatFromState"
                          },
                          "var": "allIn"
                        },
                        "right": false
                      }
                    ]
                  },
                  "then": [
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "bettingClosed",
                        "value": false
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "==",
              "left": {
                "ref": "gvar",
                "var": "bettingClosed"
              },
              "right": false
            },
            "then": [
              {
                "setVar": {
                  "scope": "global",
                  "var": "bettingClosed",
                  "value": true
                }
              },
              {
                "forEach": {
                  "bind": "$__macro_find_next_to_act_actions_4__effects_4__macro_advance_after_betting__0__if_then_0__nextSeat",
                  "over": {
                    "query": "nextInOrderByCondition",
                    "source": {
                      "query": "players"
                    },
                    "from": {
                      "ref": "gvar",
                      "var": "actingPosition"
                    },
                    "bind": "$seatCandidate",
                    "where": {
                      "op": "and",
                      "args": [
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$seatCandidate"
                            },
                            "var": "eliminated"
                          },
                          "right": false
                        },
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$seatCandidate"
                            },
                            "var": "handActive"
                          },
                          "right": true
                        },
                        {
                          "op": "==",
                          "left": {
                            "ref": "pvar",
                            "player": {
                              "chosen": "$seatCandidate"
                            },
                            "var": "allIn"
                          },
                          "right": false
                        }
                      ]
                    }
                  },
                  "effects": [
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "bettingClosed",
                        "value": false
                      }
                    },
                    {
                      "setVar": {
                        "scope": "global",
                        "var": "actingPosition",
                        "value": {
                          "ref": "binding",
                          "name": "$__macro_find_next_to_act_actions_4__effects_4__macro_advance_after_betting__0__if_then_0__nextSeat"
                        }
                      }
                    },
                    {
                      "setActivePlayer": {
                        "player": {
                          "chosen": "$__macro_find_next_to_act_actions_4__effects_4__macro_advance_after_betting__0__if_then_0__nextSeat"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "<=",
              "left": {
                "aggregate": {
                  "op": "sum",
                  "query": {
                    "query": "players"
                  },
                  "bind": "$__macro_advance_after_betting_actions_4__effects_4__player",
                  "valueExpr": {
                    "if": {
                      "when": {
                        "op": "and",
                        "args": [
                          {
                            "op": "==",
                            "left": {
                              "ref": "pvar",
                              "player": {
                                "chosen": "$__macro_advance_after_betting_actions_4__effects_4__player"
                              },
                              "var": "handActive"
                            },
                            "right": true
                          },
                          {
                            "op": "==",
                            "left": {
                              "ref": "pvar",
                              "player": {
                                "chosen": "$__macro_advance_after_betting_actions_4__effects_4__player"
                              },
                              "var": "eliminated"
                            },
                            "right": false
                          }
                        ]
                      },
                      "then": 1,
                      "else": 0
                    }
                  }
                }
              },
              "right": 1
            },
            "then": [
              {
                "gotoPhaseExact": {
                  "phase": "showdown"
                }
              }
            ]
          }
        },
        {
          "if": {
            "when": {
              "op": "and",
              "args": [
                {
                  "op": "==",
                  "left": {
                    "ref": "gvar",
                    "var": "bettingClosed"
                  },
                  "right": true
                },
                {
                  "op": "not",
                  "arg": {
                    "op": "<=",
                    "left": {
                      "aggregate": {
                        "op": "sum",
                        "query": {
                          "query": "players"
                        },
                        "bind": "$__macro_advance_after_betting_actions_4__effects_4__player",
                        "valueExpr": {
                          "if": {
                            "when": {
                              "op": "and",
                              "args": [
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$__macro_advance_after_betting_actions_4__effects_4__player"
                                    },
                                    "var": "handActive"
                                  },
                                  "right": true
                                },
                                {
                                  "op": "==",
                                  "left": {
                                    "ref": "pvar",
                                    "player": {
                                      "chosen": "$__macro_advance_after_betting_actions_4__effects_4__player"
                                    },
                                    "var": "eliminated"
                                  },
                                  "right": false
                                }
                              ]
                            },
                            "then": 1,
                            "else": 0
                          }
                        }
                      }
                    },
                    "right": 1
                  }
                }
              ]
            },
            "then": [
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 0
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "flop"
                      }
                    }
                  ]
                }
              },
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 1
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "turn"
                      }
                    }
                  ]
                }
              },
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 2
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "river"
                      }
                    }
                  ]
                }
              },
              {
                "if": {
                  "when": {
                    "op": "==",
                    "left": {
                      "ref": "gvar",
                      "var": "handPhase"
                    },
                    "right": 3
                  },
                  "then": [
                    {
                      "gotoPhaseExact": {
                        "phase": "showdown"
                      }
                    }
                  ]
                }
              }
            ]
          }
        }
      ],
      "limits": []
    }
  ],
  "triggers": [],
  "terminal": {
    "conditions": [
      {
        "when": {
          "op": "==",
          "left": {
            "ref": "gvar",
            "var": "activePlayers"
          },
          "right": 1
        },
        "result": {
          "type": "score"
        }
      }
    ],
    "scoring": {
      "method": "highest",
      "value": {
        "ref": "pvar",
        "player": "active",
        "var": "chipStack"
      }
    }
  }
}
