{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "metadata": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "players": {
          "type": "object",
          "properties": {
            "min": {
              "type": "number"
            },
            "max": {
              "type": "number"
            }
          },
          "required": [
            "min",
            "max"
          ],
          "additionalProperties": false
        },
        "maxTriggerDepth": {
          "type": "number"
        }
      },
      "required": [
        "id",
        "players"
      ],
      "additionalProperties": false
    },
    "constants": {
      "type": "object",
      "propertyNames": {
        "type": "string"
      },
      "additionalProperties": {
        "type": "number"
      }
    },
    "globalVars": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "type": "object",
            "properties": {
              "name": { "type": "string" },
              "type": { "type": "string", "const": "int" },
              "init": { "type": "number" },
              "min": { "type": "number" },
              "max": { "type": "number" }
            },
            "required": ["name", "type", "init", "min", "max"],
            "additionalProperties": false
          },
          {
            "type": "object",
            "properties": {
              "name": { "type": "string" },
              "type": { "type": "string", "const": "boolean" },
              "init": { "type": "boolean" }
            },
            "required": ["name", "type", "init"],
            "additionalProperties": false
          }
        ]
      }
    },
    "perPlayerVars": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "type": "object",
            "properties": {
              "name": { "type": "string" },
              "type": { "type": "string", "const": "int" },
              "init": { "type": "number" },
              "min": { "type": "number" },
              "max": { "type": "number" }
            },
            "required": ["name", "type", "init", "min", "max"],
            "additionalProperties": false
          },
          {
            "type": "object",
            "properties": {
              "name": { "type": "string" },
              "type": { "type": "string", "const": "boolean" },
              "init": { "type": "boolean" }
            },
            "required": ["name", "type", "init"],
            "additionalProperties": false
          }
        ]
      }
    },
    "zones": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "owner": {
            "anyOf": [
              {
                "type": "string",
                "const": "none"
              },
              {
                "type": "string",
                "const": "player"
              }
            ]
          },
          "visibility": {
            "anyOf": [
              {
                "type": "string",
                "const": "public"
              },
              {
                "type": "string",
                "const": "owner"
              },
              {
                "type": "string",
                "const": "hidden"
              }
            ]
          },
          "ordering": {
            "anyOf": [
              {
                "type": "string",
                "const": "stack"
              },
              {
                "type": "string",
                "const": "queue"
              },
              {
                "type": "string",
                "const": "set"
              }
            ]
          },
          "adjacentTo": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "id",
          "owner",
          "visibility",
          "ordering"
        ],
        "additionalProperties": false
      }
    },
    "mapSpaces": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "minLength": 1
          },
          "spaceType": {
            "type": "string",
            "minLength": 1
          },
          "population": {
            "type": "integer",
            "minimum": 0
          },
          "econ": {
            "type": "integer",
            "minimum": 0
          },
          "terrainTags": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1
            }
          },
          "country": {
            "type": "string",
            "minLength": 1
          },
          "coastal": {
            "type": "boolean"
          },
          "adjacentTo": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1
            }
          }
        },
        "required": [
          "id",
          "spaceType",
          "population",
          "econ",
          "terrainTags",
          "country",
          "coastal",
          "adjacentTo"
        ],
        "additionalProperties": false
      }
    },
    "tokenTypes": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "props": {
            "type": "object",
            "propertyNames": {
              "type": "string"
            },
            "additionalProperties": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "int"
                },
                {
                  "type": "string",
                  "const": "string"
                },
                {
                  "type": "string",
                  "const": "boolean"
                }
              ]
            }
          },
          "transitions": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "prop": {
                  "type": "string"
                },
                "from": {
                  "type": "string"
                },
                "to": {
                  "type": "string"
                }
              },
              "required": [
                "prop",
                "from",
                "to"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "id",
          "props"
        ],
        "additionalProperties": false
      }
    },
    "setup": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/__schema0"
      }
    },
    "turnStructure": {
      "type": "object",
      "properties": {
        "phases": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "onEnter": {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/__schema0"
                }
              },
              "onExit": {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/__schema0"
                }
              }
            },
            "required": [
              "id"
            ],
            "additionalProperties": false
          }
        }
      },
      "required": [
        "phases"
      ],
      "additionalProperties": false
    },
    "turnOrder": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "roundRobin"
            }
          },
          "required": [
            "type"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "fixedOrder"
            },
            "order": {
              "minItems": 1,
              "type": "array",
              "items": {
                "type": "string",
                "minLength": 1
              }
            }
          },
          "required": [
            "type",
            "order"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "cardDriven"
            },
            "config": {
              "type": "object",
              "properties": {
                "turnFlow": {
                  "type": "object",
                  "properties": {
                    "cardLifecycle": {
                      "type": "object",
                      "properties": {
                        "played": {
                          "type": "string",
                          "minLength": 1
                        },
                        "lookahead": {
                          "type": "string",
                          "minLength": 1
                        },
                        "leader": {
                          "type": "string",
                          "minLength": 1
                        }
                      },
                      "required": [
                        "played",
                        "lookahead",
                        "leader"
                      ],
                      "additionalProperties": false
                    },
                    "eligibility": {
                      "type": "object",
                      "properties": {
                        "factions": {
                          "type": "array",
                          "items": {
                            "type": "string",
                            "minLength": 1
                          }
                        },
                        "overrideWindows": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "minLength": 1
                              },
                              "duration": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "const": "turn"
                                  },
                                  {
                                    "type": "string",
                                    "const": "nextTurn"
                                  },
                                  {
                                    "type": "string",
                                    "const": "round"
                                  },
                                  {
                                    "type": "string",
                                    "const": "cycle"
                                  }
                                ]
                              }
                            },
                            "required": [
                              "id",
                              "duration"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "factions",
                        "overrideWindows"
                      ],
                      "additionalProperties": false
                    },
                    "optionMatrix": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "first": {
                            "anyOf": [
                              {
                                "type": "string",
                                "const": "event"
                              },
                              {
                                "type": "string",
                                "const": "operation"
                              },
                              {
                                "type": "string",
                                "const": "operationPlusSpecialActivity"
                              }
                            ]
                          },
                          "second": {
                            "type": "array",
                            "items": {
                              "anyOf": [
                                {
                                  "type": "string",
                                  "const": "pass"
                                },
                                {
                                  "type": "string",
                                  "const": "event"
                                },
                                {
                                  "type": "string",
                                  "const": "operation"
                                },
                                {
                                  "type": "string",
                                  "const": "limitedOperation"
                                },
                                {
                                  "type": "string",
                                  "const": "operationPlusSpecialActivity"
                                }
                              ]
                            }
                          }
                        },
                        "required": [
                          "first",
                          "second"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "passRewards": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "factionClass": {
                            "type": "string",
                            "minLength": 1
                          },
                          "resource": {
                            "type": "string",
                            "minLength": 1
                          },
                          "amount": {
                            "type": "number"
                          }
                        },
                        "required": [
                          "factionClass",
                          "resource",
                          "amount"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "durationWindows": {
                      "type": "array",
                      "items": {
                        "anyOf": [
                          {
                            "type": "string",
                            "const": "turn"
                          },
                          {
                            "type": "string",
                            "const": "nextTurn"
                          },
                          {
                            "type": "string",
                            "const": "round"
                          },
                          {
                            "type": "string",
                            "const": "cycle"
                          }
                        ]
                      }
                    },
                    "monsoon": {
                      "type": "object",
                      "properties": {
                        "restrictedActions": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "actionId": {
                                "type": "string",
                                "minLength": 1
                              },
                              "maxParam": {
                                "type": "object",
                                "properties": {
                                  "name": {
                                    "type": "string",
                                    "minLength": 1
                                  },
                                  "max": {
                                    "type": "number"
                                  }
                                },
                                "required": [
                                  "name",
                                  "max"
                                ],
                                "additionalProperties": false
                              },
                              "overrideToken": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "required": [
                              "actionId"
                            ],
                            "additionalProperties": false
                          }
                        },
                        "blockPivotal": {
                          "type": "boolean"
                        },
                        "pivotalOverrideToken": {
                          "type": "string",
                          "minLength": 1
                        }
                      },
                      "required": [
                        "restrictedActions"
                      ],
                      "additionalProperties": false
                    },
                    "pivotal": {
                      "type": "object",
                      "properties": {
                        "actionIds": {
                          "type": "array",
                          "items": {
                            "type": "string",
                            "minLength": 1
                          }
                        },
                        "requirePreActionWindow": {
                          "type": "boolean"
                        },
                        "disallowWhenLookaheadIsCoup": {
                          "type": "boolean"
                        },
                        "interrupt": {
                          "type": "object",
                          "properties": {
                            "precedence": {
                              "type": "array",
                              "items": {
                                "type": "string",
                                "minLength": 1
                              }
                            },
                            "cancellation": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "winner": {
                                    "type": "object",
                                    "properties": {
                                      "actionId": {
                                        "type": "string",
                                        "minLength": 1
                                      },
                                      "actionClass": {
                                        "type": "string",
                                        "enum": [
                                          "pass",
                                          "event",
                                          "operation",
                                          "limitedOperation",
                                          "operationPlusSpecialActivity"
                                        ]
                                      },
                                      "eventCardId": {
                                        "type": "string",
                                        "minLength": 1
                                      },
                                      "eventCardTagsAll": {
                                        "type": "array",
                                        "items": {
                                          "type": "string",
                                          "minLength": 1
                                        }
                                      },
                                      "eventCardTagsAny": {
                                        "type": "array",
                                        "items": {
                                          "type": "string",
                                          "minLength": 1
                                        }
                                      },
                                      "paramEquals": {
                                        "type": "object",
                                        "propertyNames": {
                                          "type": "string"
                                        },
                                        "additionalProperties": {
                                          "type": [
                                            "string",
                                            "number",
                                            "boolean"
                                          ]
                                        }
                                      }
                                    },
                                    "required": [],
                                    "additionalProperties": false
                                  },
                                  "canceled": {
                                    "type": "object",
                                    "properties": {
                                      "actionId": {
                                        "type": "string",
                                        "minLength": 1
                                      },
                                      "actionClass": {
                                        "type": "string",
                                        "enum": [
                                          "pass",
                                          "event",
                                          "operation",
                                          "limitedOperation",
                                          "operationPlusSpecialActivity"
                                        ]
                                      },
                                      "eventCardId": {
                                        "type": "string",
                                        "minLength": 1
                                      },
                                      "eventCardTagsAll": {
                                        "type": "array",
                                        "items": {
                                          "type": "string",
                                          "minLength": 1
                                        }
                                      },
                                      "eventCardTagsAny": {
                                        "type": "array",
                                        "items": {
                                          "type": "string",
                                          "minLength": 1
                                        }
                                      },
                                      "paramEquals": {
                                        "type": "object",
                                        "propertyNames": {
                                          "type": "string"
                                        },
                                        "additionalProperties": {
                                          "type": [
                                            "string",
                                            "number",
                                            "boolean"
                                          ]
                                        }
                                      }
                                    },
                                    "required": [],
                                    "additionalProperties": false
                                  }
                                },
                                "required": [
                                  "winner",
                                  "canceled"
                                ],
                                "additionalProperties": false
                              }
                            }
                          },
                          "required": [
                            "precedence"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "actionIds"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "cardLifecycle",
                    "eligibility",
                    "optionMatrix",
                    "passRewards",
                    "durationWindows"
                  ],
                  "additionalProperties": false
                },
                "coupPlan": {
                  "type": "object",
                  "properties": {
                    "phases": {
                      "minItems": 1,
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "minLength": 1
                          },
                          "steps": {
                            "minItems": 1,
                            "type": "array",
                            "items": {
                              "type": "string",
                              "minLength": 1
                            }
                          }
                        },
                        "required": [
                          "id",
                          "steps"
                        ],
                        "additionalProperties": false
                      }
                    },
                    "finalRoundOmitPhases": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "minLength": 1
                      }
                    },
                    "maxConsecutiveRounds": {
                      "type": "integer",
                      "minimum": 1,
                      "maximum": 9007199254740991
                    }
                  },
                  "required": [
                    "phases"
                  ],
                  "additionalProperties": false
                }
              },
              "required": [
                "turnFlow"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "type",
            "config"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "simultaneous"
            }
          },
          "required": [
            "type"
          ],
          "additionalProperties": false
        }
      ]
    },
    "actionPipelines": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "minLength": 1
          },
          "actionId": {
            "type": "string",
            "minLength": 1
          },
          "applicability": {
            "allOf": [
              {
                "$ref": "#/definitions/__schema2"
              }
            ]
          },
          "accompanyingOps": {
            "anyOf": [
              {
                "type": "string",
                "const": "any"
              },
              {
                "type": "array",
                "items": {
                  "type": "string",
                  "minLength": 1
                }
              }
            ]
          },
          "compoundParamConstraints": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "relation": {
                  "type": "string",
                  "enum": [
                    "disjoint",
                    "subset"
                  ]
                },
                "operationParam": {
                  "type": "string",
                  "minLength": 1
                },
                "specialActivityParam": {
                  "type": "string",
                  "minLength": 1
                }
              },
              "required": [
                "relation",
                "operationParam",
                "specialActivityParam"
              ],
              "additionalProperties": false
            }
          },
          "legality": {
            "anyOf": [
              {
                "$ref": "#/definitions/__schema2"
              },
              {
                "type": "null"
              }
            ]
          },
          "costValidation": {
            "anyOf": [
              {
                "$ref": "#/definitions/__schema2"
              },
              {
                "type": "null"
              }
            ]
          },
          "costEffects": {
            "type": "array",
            "items": {
              "$ref": "#/definitions/__schema0"
            }
          },
          "targeting": {
            "type": "object",
            "properties": {
              "select": {
                "anyOf": [
                  {
                    "type": "string",
                    "const": "upToN"
                  },
                  {
                    "type": "string",
                    "const": "allEligible"
                  },
                  {
                    "type": "string",
                    "const": "exactN"
                  }
                ]
              },
              "max": {
                "type": "integer",
                "minimum": 1,
                "maximum": 9007199254740991
              },
              "filter": {
                "allOf": [
                  {
                    "$ref": "#/definitions/__schema2"
                  }
                ]
              },
              "order": {
                "type": "string"
              },
              "tieBreak": {
                "type": "string"
              }
            },
            "additionalProperties": false
          },
          "stages": {
            "minItems": 1,
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "stage": {
                  "type": "string"
                },
                "effects": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/__schema0"
                  }
                }
              },
              "required": [
                "effects"
              ],
              "additionalProperties": false
            }
          },
          "atomicity": {
            "anyOf": [
              {
                "type": "string",
                "const": "atomic"
              },
              {
                "type": "string",
                "const": "partial"
              }
            ]
          },
          "linkedWindows": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1
            }
          }
        },
        "required": [
          "id",
          "actionId",
          "legality",
          "costValidation",
          "costEffects",
          "targeting",
          "stages",
          "atomicity"
        ],
        "additionalProperties": false
      }
    },
    "actions": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "actor": {
            "anyOf": [
              {
                "type": "string",
                "const": "actor"
              },
              {
                "type": "string",
                "const": "active"
              },
              {
                "type": "string",
                "const": "all"
              },
              {
                "type": "string",
                "const": "allOther"
              },
              {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "integer",
                    "minimum": -9007199254740991,
                    "maximum": 9007199254740991
                  }
                },
                "required": [
                  "id"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "chosen": {
                    "type": "string"
                  }
                },
                "required": [
                  "chosen"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "relative": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "left"
                      },
                      {
                        "type": "string",
                        "const": "right"
                      }
                    ]
                  }
                },
                "required": [
                  "relative"
                ],
                "additionalProperties": false
              }
            ]
          },
          "phase": {
            "type": "string"
          },
          "params": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                },
                "domain": {
                  "anyOf": [
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "tokensInZone"
                        },
                        "zone": {
                          "type": "string"
                        },
                        "filter": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "prop": {
                                "type": "string"
                              },
                              "op": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "const": "eq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "neq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "in"
                                  },
                                  {
                                    "type": "string",
                                    "const": "notIn"
                                  }
                                ]
                              },
                              "value": {
                                "anyOf": [
                                  {
                                    "$ref": "#/definitions/__schema1"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    }
                                  }
                                ]
                              }
                            },
                            "required": [
                              "prop",
                              "op",
                              "value"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "intsInRange"
                        },
                        "min": {
                          "type": "number"
                        },
                        "max": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "query",
                        "min",
                        "max"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "enums"
                        },
                        "values": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "required": [
                        "query",
                        "values"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "players"
                        }
                      },
                      "required": [
                        "query"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "zones"
                        },
                        "filter": {
                          "type": "object",
                          "properties": {
                            "owner": {
                              "anyOf": [
                                {
                                  "type": "string",
                                  "const": "actor"
                                },
                                {
                                  "type": "string",
                                  "const": "active"
                                },
                                {
                                  "type": "string",
                                  "const": "all"
                                },
                                {
                                  "type": "string",
                                  "const": "allOther"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "integer",
                                      "minimum": -9007199254740991,
                                      "maximum": 9007199254740991
                                    }
                                  },
                                  "required": [
                                    "id"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "chosen": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "chosen"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "relative": {
                                      "anyOf": [
                                        {
                                          "type": "string",
                                          "const": "left"
                                        },
                                        {
                                          "type": "string",
                                          "const": "right"
                                        }
                                      ]
                                    }
                                  },
                                  "required": [
                                    "relative"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "condition": {
                              "allOf": [
                                {
                                  "$ref": "#/definitions/__schema2"
                                }
                              ]
                            }
                          },
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "query"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "adjacentZones"
                        },
                        "zone": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "tokensInAdjacentZones"
                        },
                        "zone": {
                          "type": "string"
                        },
                        "filter": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "prop": {
                                "type": "string"
                              },
                              "op": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "const": "eq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "neq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "in"
                                  },
                                  {
                                    "type": "string",
                                    "const": "notIn"
                                  }
                                ]
                              },
                              "value": {
                                "anyOf": [
                                  {
                                    "$ref": "#/definitions/__schema1"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    }
                                  }
                                ]
                              }
                            },
                            "required": [
                              "prop",
                              "op",
                              "value"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "connectedZones"
                        },
                        "zone": {
                          "type": "string"
                        },
                        "via": {
                          "allOf": [
                            {
                              "$ref": "#/definitions/__schema2"
                            }
                          ]
                        },
                        "includeStart": {
                          "type": "boolean"
                        },
                        "maxDepth": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "binding"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "query",
                        "name"
                      ],
                      "additionalProperties": false
                    }
                  ]
                }
              },
              "required": [
                "name",
                "domain"
              ],
              "additionalProperties": false
            }
          },
          "pre": {
            "anyOf": [
              {
                "$ref": "#/definitions/__schema2"
              },
              {
                "type": "null"
              }
            ]
          },
          "cost": {
            "type": "array",
            "items": {
              "$ref": "#/definitions/__schema0"
            }
          },
          "effects": {
            "type": "array",
            "items": {
              "$ref": "#/definitions/__schema0"
            }
          },
          "limits": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "scope": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "turn"
                    },
                    {
                      "type": "string",
                      "const": "phase"
                    },
                    {
                      "type": "string",
                      "const": "game"
                    }
                  ]
                },
                "max": {
                  "type": "number"
                }
              },
              "required": [
                "scope",
                "max"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "id",
          "actor",
          "phase",
          "params",
          "pre",
          "cost",
          "effects",
          "limits"
        ],
        "additionalProperties": false
      }
    },
    "triggers": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "event": {
            "anyOf": [
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "phaseEnter"
                  },
                  "phase": {
                    "type": "string"
                  }
                },
                "required": [
                  "type",
                  "phase"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "phaseExit"
                  },
                  "phase": {
                    "type": "string"
                  }
                },
                "required": [
                  "type",
                  "phase"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "turnStart"
                  }
                },
                "required": [
                  "type"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "turnEnd"
                  }
                },
                "required": [
                  "type"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "actionResolved"
                  },
                  "action": {
                    "type": "string"
                  }
                },
                "required": [
                  "type"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "tokenEntered"
                  },
                  "zone": {
                    "type": "string"
                  }
                },
                "required": [
                  "type"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "const": "varChanged"
                  },
                  "scope": {
                    "anyOf": [
                      {
                        "type": "string",
                        "const": "global"
                      },
                      {
                        "type": "string",
                        "const": "perPlayer"
                      }
                    ]
                  },
                  "var": {
                    "type": "string"
                  },
                  "player": {
                    "type": "integer",
                    "minimum": -9007199254740991,
                    "maximum": 9007199254740991
                  },
                  "oldValue": {
                    "anyOf": [
                      {
                        "type": "number"
                      },
                      {
                        "type": "boolean"
                      }
                    ]
                  },
                  "newValue": {
                    "anyOf": [
                      {
                        "type": "number"
                      },
                      {
                        "type": "boolean"
                      }
                    ]
                  }
                },
                "required": [
                  "type"
                ],
                "additionalProperties": false
              }
            ]
          },
          "match": {
            "allOf": [
              {
                "$ref": "#/definitions/__schema2"
              }
            ]
          },
          "when": {
            "allOf": [
              {
                "$ref": "#/definitions/__schema2"
              }
            ]
          },
          "effects": {
            "type": "array",
            "items": {
              "$ref": "#/definitions/__schema0"
            }
          }
        },
        "required": [
          "id",
          "event",
          "effects"
        ],
        "additionalProperties": false
      }
    },
    "terminal": {
      "type": "object",
      "properties": {
        "conditions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "when": {
                "$ref": "#/definitions/__schema2"
              },
              "result": {
                "anyOf": [
                  {
                    "type": "object",
                    "properties": {
                      "type": {
                        "type": "string",
                        "const": "win"
                      },
                      "player": {
                        "anyOf": [
                          {
                            "type": "string",
                            "const": "actor"
                          },
                          {
                            "type": "string",
                            "const": "active"
                          },
                          {
                            "type": "string",
                            "const": "all"
                          },
                          {
                            "type": "string",
                            "const": "allOther"
                          },
                          {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "integer",
                                "minimum": -9007199254740991,
                                "maximum": 9007199254740991
                              }
                            },
                            "required": [
                              "id"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "chosen": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "chosen"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "relative": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "const": "left"
                                  },
                                  {
                                    "type": "string",
                                    "const": "right"
                                  }
                                ]
                              }
                            },
                            "required": [
                              "relative"
                            ],
                            "additionalProperties": false
                          }
                        ]
                      }
                    },
                    "required": [
                      "type",
                      "player"
                    ],
                    "additionalProperties": false
                  },
                  {
                    "type": "object",
                    "properties": {
                      "type": {
                        "type": "string",
                        "const": "lossAll"
                      }
                    },
                    "required": [
                      "type"
                    ],
                    "additionalProperties": false
                  },
                  {
                    "type": "object",
                    "properties": {
                      "type": {
                        "type": "string",
                        "const": "draw"
                      }
                    },
                    "required": [
                      "type"
                    ],
                    "additionalProperties": false
                  },
                  {
                    "type": "object",
                    "properties": {
                      "type": {
                        "type": "string",
                        "const": "score"
                      }
                    },
                    "required": [
                      "type"
                    ],
                    "additionalProperties": false
                  }
                ]
              }
            },
            "required": [
              "when",
              "result"
            ],
            "additionalProperties": false
          }
        },
        "checkpoints": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "minLength": 1
              },
              "faction": {
                "type": "string",
                "minLength": 1
              },
              "timing": {
                "anyOf": [
                  {
                    "type": "string",
                    "const": "duringCoup"
                  },
                  {
                    "type": "string",
                    "const": "finalCoup"
                  }
                ]
              },
              "when": {
                "$ref": "#/definitions/__schema2"
              }
            },
            "required": [
              "id",
              "faction",
              "timing",
              "when"
            ],
            "additionalProperties": false
          }
        },
        "margins": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "faction": {
                "type": "string",
                "minLength": 1
              },
              "value": {
                "$ref": "#/definitions/__schema1"
              }
            },
            "required": [
              "faction",
              "value"
            ],
            "additionalProperties": false
          }
        },
        "ranking": {
          "type": "object",
          "properties": {
            "order": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "desc"
                },
                {
                  "type": "string",
                  "const": "asc"
                }
              ]
            }
          },
          "required": [
            "order"
          ],
          "additionalProperties": false
        },
        "scoring": {
          "type": "object",
          "properties": {
            "method": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "highest"
                },
                {
                  "type": "string",
                  "const": "lowest"
                }
              ]
            },
            "value": {
              "$ref": "#/definitions/__schema1"
            }
          },
          "required": [
            "method",
            "value"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "conditions"
      ],
      "additionalProperties": false
    },
    "stackingConstraints": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "minLength": 1
          },
          "description": {
            "type": "string"
          },
          "spaceFilter": {
            "type": "object",
            "properties": {
              "spaceIds": {
                "type": "array",
                "items": {
                  "type": "string",
                  "minLength": 1
                }
              },
              "spaceTypes": {
                "type": "array",
                "items": {
                  "type": "string",
                  "minLength": 1
                }
              },
              "country": {
                "type": "array",
                "items": {
                  "type": "string",
                  "minLength": 1
                }
              },
              "populationEquals": {
                "type": "integer",
                "minimum": 0,
                "maximum": 9007199254740991
              }
            },
            "additionalProperties": false
          },
          "pieceFilter": {
            "type": "object",
            "properties": {
              "pieceTypeIds": {
                "type": "array",
                "items": {
                  "type": "string",
                  "minLength": 1
                }
              },
              "factions": {
                "type": "array",
                "items": {
                  "type": "string",
                  "minLength": 1
                }
              }
            },
            "additionalProperties": false
          },
          "rule": {
            "anyOf": [
              {
                "type": "string",
                "const": "maxCount"
              },
              {
                "type": "string",
                "const": "prohibit"
              }
            ]
          },
          "maxCount": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9007199254740991
          }
        },
        "required": [
          "id",
          "description",
          "spaceFilter",
          "pieceFilter",
          "rule"
        ],
        "additionalProperties": false
      }
    },
    "markerLattices": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "minLength": 1
          },
          "states": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1
            }
          },
          "defaultState": {
            "type": "string",
            "minLength": 1
          },
          "constraints": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "spaceIds": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "spaceTypes": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "populationEquals": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 9007199254740991
                },
                "allowedStates": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "minLength": 1
                  }
                }
              },
              "required": [
                "allowedStates"
              ],
              "additionalProperties": false
            }
          }
        },
        "required": [
          "id",
          "states",
          "defaultState"
        ],
        "additionalProperties": false
      }
    },
    "eventDecks": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "minLength": 1 },
          "drawZone": { "type": "string", "minLength": 1 },
          "discardZone": { "type": "string", "minLength": 1 },
          "shuffleOnSetup": { "type": "boolean" },
          "cards": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string", "minLength": 1 },
                "title": { "type": "string", "minLength": 1 },
                "sideMode": {
                  "anyOf": [{ "type": "string", "const": "single" }, { "type": "string", "const": "dual" }]
                },
                "order": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 },
                "tags": {
                  "type": "array",
                  "items": { "type": "string", "minLength": 1 }
                },
                "metadata": {
                  "type": "object",
                  "propertyNames": { "type": "string" },
                  "additionalProperties": {
                    "anyOf": [
                      { "type": "string" },
                      { "type": "number" },
                      { "type": "boolean" },
                      { "type": "array", "items": { "type": "string" } }
                    ]
                  }
                },
                "playCondition": {
                  "type": "object",
                  "propertyNames": { "type": "string" },
                  "additionalProperties": {}
                },
                "unshaded": {
                  "type": "object",
                  "properties": {
                    "text": { "type": "string" },
                    "freeOperationGrants": {
                      "type": "array",
                      "minItems": 1,
                      "items": {
                        "type": "object",
                        "properties": {
                          "sequence": {
                            "type": "object",
                            "properties": {
                              "chain": { "type": "string", "minLength": 1 },
                              "step": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 }
                            },
                            "required": ["chain", "step"],
                            "additionalProperties": false
                          },
                          "id": { "type": "string", "minLength": 1 },
                          "faction": { "type": "string", "minLength": 1 },
                          "executeAsFaction": { "type": "string", "minLength": 1 },
                          "operationClass": {
                            "anyOf": [
                              { "type": "string", "const": "pass" },
                              { "type": "string", "const": "event" },
                              { "type": "string", "const": "operation" },
                              { "type": "string", "const": "limitedOperation" },
                              { "type": "string", "const": "operationPlusSpecialActivity" }
                            ]
                          },
                          "actionIds": {
                            "type": "array",
                            "minItems": 1,
                            "items": { "type": "string", "minLength": 1 }
                          },
                          "zoneFilter": {
                            "type": "object",
                            "propertyNames": { "type": "string" },
                            "additionalProperties": {}
                          },
                          "uses": { "type": "integer", "minimum": 1, "maximum": 9007199254740991 }
                        },
                        "required": ["sequence", "faction", "operationClass"],
                        "additionalProperties": false
                      }
                    },
                    "eligibilityOverrides": {
                      "type": "array",
                      "minItems": 1,
                      "items": {
                        "type": "object",
                        "properties": {
                          "target": {
                            "anyOf": [
                              {
                                "type": "object",
                                "properties": { "kind": { "type": "string", "const": "active" } },
                                "required": ["kind"],
                                "additionalProperties": false
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "kind": { "type": "string", "const": "faction" },
                                  "faction": { "type": "string", "minLength": 1 }
                                },
                                "required": ["kind", "faction"],
                                "additionalProperties": false
                              }
                            ]
                          },
                          "eligible": { "type": "boolean" },
                          "windowId": { "type": "string", "minLength": 1 }
                        },
                        "required": ["target", "eligible", "windowId"],
                        "additionalProperties": false
                      }
                    },
                    "effects": {
                      "type": "array",
                      "minItems": 1,
                      "items": {
                        "type": "object",
                        "propertyNames": { "type": "string" },
                        "additionalProperties": {}
                      }
                    },
                    "branches": {
                      "type": "array",
                      "minItems": 1,
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "string", "minLength": 1 },
                          "order": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 },
                          "freeOperationGrants": {
                            "type": "array",
                            "minItems": 1,
                            "items": {
                            "type": "object",
                            "properties": {
                                "sequence": {
                                  "type": "object",
                                  "properties": {
                                    "chain": { "type": "string", "minLength": 1 },
                                    "step": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 }
                                  },
                                  "required": ["chain", "step"],
                                  "additionalProperties": false
                                },
                                "id": { "type": "string", "minLength": 1 },
                                "faction": { "type": "string", "minLength": 1 },
                                "executeAsFaction": { "type": "string", "minLength": 1 },
                                "operationClass": {
                                  "anyOf": [
                                    { "type": "string", "const": "pass" },
                                    { "type": "string", "const": "event" },
                                    { "type": "string", "const": "operation" },
                                    { "type": "string", "const": "limitedOperation" },
                                    { "type": "string", "const": "operationPlusSpecialActivity" }
                                  ]
                                },
                                "actionIds": {
                                  "type": "array",
                                  "minItems": 1,
                                  "items": { "type": "string", "minLength": 1 }
                                },
                                "zoneFilter": {
                                  "type": "object",
                                  "propertyNames": { "type": "string" },
                                  "additionalProperties": {}
                                },
                                "uses": { "type": "integer", "minimum": 1, "maximum": 9007199254740991 }
                              },
                              "required": ["sequence", "faction", "operationClass"],
                              "additionalProperties": false
                            }
                          },
                          "eligibilityOverrides": {
                            "type": "array",
                            "minItems": 1,
                            "items": {
                              "type": "object",
                              "properties": {
                                "target": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": { "kind": { "type": "string", "const": "active" } },
                                      "required": ["kind"],
                                      "additionalProperties": false
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "kind": { "type": "string", "const": "faction" },
                                        "faction": { "type": "string", "minLength": 1 }
                                      },
                                      "required": ["kind", "faction"],
                                      "additionalProperties": false
                                    }
                                  ]
                                },
                                "eligible": { "type": "boolean" },
                                "windowId": { "type": "string", "minLength": 1 }
                              },
                              "required": ["target", "eligible", "windowId"],
                              "additionalProperties": false
                            }
                          },
                          "effects": {
                            "type": "array",
                            "minItems": 1,
                            "items": {
                              "type": "object",
                              "propertyNames": { "type": "string" },
                              "additionalProperties": {}
                            }
                          },
                          "targets": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": { "type": "string", "minLength": 1 },
                                "selector": {
                                  "type": "object",
                                  "propertyNames": { "type": "string" },
                                  "additionalProperties": {}
                                },
                                "cardinality": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "n": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 }
                                      },
                                      "required": ["n"],
                                      "additionalProperties": false
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "min": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 },
                                        "max": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 }
                                      },
                                      "required": ["max"],
                                      "additionalProperties": false
                                    }
                                  ]
                                }
                              },
                              "required": ["id", "selector", "cardinality"],
                              "additionalProperties": false
                            }
                          },
                          "lastingEffects": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": { "type": "string", "minLength": 1 },
                                "duration": {
                                  "anyOf": [
                                    { "type": "string", "const": "turn" },
                                    { "type": "string", "const": "nextTurn" },
                                    { "type": "string", "const": "round" },
                                    { "type": "string", "const": "cycle" }
                                  ]
                                },
                                "setupEffects": {
                                  "type": "array",
                                  "minItems": 1,
                                  "items": {
                                    "type": "object",
                                    "propertyNames": { "type": "string" },
                                    "additionalProperties": {}
                                  }
                                },
                                "teardownEffects": {
                                  "type": "array",
                                  "minItems": 1,
                                  "items": {
                                    "type": "object",
                                    "propertyNames": { "type": "string" },
                                    "additionalProperties": {}
                                  }
                                }
                              },
                              "required": ["id", "duration", "setupEffects"],
                              "additionalProperties": false
                            }
                          }
                        },
                        "required": ["id"],
                        "additionalProperties": false
                      }
                    },
                    "targets": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "string", "minLength": 1 },
                          "selector": {
                            "type": "object",
                            "propertyNames": { "type": "string" },
                            "additionalProperties": {}
                          },
                          "cardinality": {
                            "anyOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "n": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 }
                                },
                                "required": ["n"],
                                "additionalProperties": false
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "min": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 },
                                  "max": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 }
                                },
                                "required": ["max"],
                                "additionalProperties": false
                              }
                            ]
                          }
                        },
                        "required": ["id", "selector", "cardinality"],
                        "additionalProperties": false
                      }
                    },
                    "lastingEffects": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "string", "minLength": 1 },
                          "duration": {
                            "anyOf": [
                              { "type": "string", "const": "turn" },
                              { "type": "string", "const": "nextTurn" },
                              { "type": "string", "const": "round" },
                              { "type": "string", "const": "cycle" }
                            ]
                          },
                          "setupEffects": {
                            "type": "array",
                            "minItems": 1,
                            "items": {
                              "type": "object",
                              "propertyNames": { "type": "string" },
                              "additionalProperties": {}
                            }
                          },
                          "teardownEffects": {
                            "type": "array",
                            "minItems": 1,
                            "items": {
                              "type": "object",
                              "propertyNames": { "type": "string" },
                              "additionalProperties": {}
                            }
                          }
                        },
                        "required": ["id", "duration", "setupEffects"],
                        "additionalProperties": false
                      }
                    }
                  },
                  "additionalProperties": false
                },
                "shaded": {
                  "type": "object",
                  "properties": {
                    "text": { "type": "string" },
                    "freeOperationGrants": {
                      "type": "array",
                      "minItems": 1,
                      "items": {
                        "type": "object",
                        "properties": {
                          "sequence": {
                            "type": "object",
                            "properties": {
                              "chain": { "type": "string", "minLength": 1 },
                              "step": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 }
                            },
                            "required": ["chain", "step"],
                            "additionalProperties": false
                          },
                          "id": { "type": "string", "minLength": 1 },
                          "faction": { "type": "string", "minLength": 1 },
                          "executeAsFaction": { "type": "string", "minLength": 1 },
                          "operationClass": {
                            "anyOf": [
                              { "type": "string", "const": "pass" },
                              { "type": "string", "const": "event" },
                              { "type": "string", "const": "operation" },
                              { "type": "string", "const": "limitedOperation" },
                              { "type": "string", "const": "operationPlusSpecialActivity" }
                            ]
                          },
                          "actionIds": {
                            "type": "array",
                            "minItems": 1,
                            "items": { "type": "string", "minLength": 1 }
                          },
                          "zoneFilter": {
                            "type": "object",
                            "propertyNames": { "type": "string" },
                            "additionalProperties": {}
                          },
                          "uses": { "type": "integer", "minimum": 1, "maximum": 9007199254740991 }
                        },
                        "required": ["sequence", "faction", "operationClass"],
                        "additionalProperties": false
                      }
                    },
                    "eligibilityOverrides": {
                      "type": "array",
                      "minItems": 1,
                      "items": {
                        "type": "object",
                        "properties": {
                          "target": {
                            "anyOf": [
                              {
                                "type": "object",
                                "properties": { "kind": { "type": "string", "const": "active" } },
                                "required": ["kind"],
                                "additionalProperties": false
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "kind": { "type": "string", "const": "faction" },
                                  "faction": { "type": "string", "minLength": 1 }
                                },
                                "required": ["kind", "faction"],
                                "additionalProperties": false
                              }
                            ]
                          },
                          "eligible": { "type": "boolean" },
                          "windowId": { "type": "string", "minLength": 1 }
                        },
                        "required": ["target", "eligible", "windowId"],
                        "additionalProperties": false
                      }
                    },
                    "effects": {
                      "type": "array",
                      "minItems": 1,
                      "items": {
                        "type": "object",
                        "propertyNames": { "type": "string" },
                        "additionalProperties": {}
                      }
                    },
                    "branches": {
                      "type": "array",
                      "minItems": 1,
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "string", "minLength": 1 },
                          "order": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 },
                          "freeOperationGrants": {
                            "type": "array",
                            "minItems": 1,
                            "items": {
                            "type": "object",
                            "properties": {
                                "sequence": {
                                  "type": "object",
                                  "properties": {
                                    "chain": { "type": "string", "minLength": 1 },
                                    "step": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 }
                                  },
                                  "required": ["chain", "step"],
                                  "additionalProperties": false
                                },
                                "id": { "type": "string", "minLength": 1 },
                                "faction": { "type": "string", "minLength": 1 },
                                "executeAsFaction": { "type": "string", "minLength": 1 },
                                "operationClass": {
                                  "anyOf": [
                                    { "type": "string", "const": "pass" },
                                    { "type": "string", "const": "event" },
                                    { "type": "string", "const": "operation" },
                                    { "type": "string", "const": "limitedOperation" },
                                    { "type": "string", "const": "operationPlusSpecialActivity" }
                                  ]
                                },
                                "actionIds": {
                                  "type": "array",
                                  "minItems": 1,
                                  "items": { "type": "string", "minLength": 1 }
                                },
                                "zoneFilter": {
                                  "type": "object",
                                  "propertyNames": { "type": "string" },
                                  "additionalProperties": {}
                                },
                                "uses": { "type": "integer", "minimum": 1, "maximum": 9007199254740991 }
                              },
                              "required": ["sequence", "faction", "operationClass"],
                              "additionalProperties": false
                            }
                          },
                          "eligibilityOverrides": {
                            "type": "array",
                            "minItems": 1,
                            "items": {
                              "type": "object",
                              "properties": {
                                "target": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": { "kind": { "type": "string", "const": "active" } },
                                      "required": ["kind"],
                                      "additionalProperties": false
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "kind": { "type": "string", "const": "faction" },
                                        "faction": { "type": "string", "minLength": 1 }
                                      },
                                      "required": ["kind", "faction"],
                                      "additionalProperties": false
                                    }
                                  ]
                                },
                                "eligible": { "type": "boolean" },
                                "windowId": { "type": "string", "minLength": 1 }
                              },
                              "required": ["target", "eligible", "windowId"],
                              "additionalProperties": false
                            }
                          },
                          "effects": {
                            "type": "array",
                            "minItems": 1,
                            "items": {
                              "type": "object",
                              "propertyNames": { "type": "string" },
                              "additionalProperties": {}
                            }
                          },
                          "targets": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": { "type": "string", "minLength": 1 },
                                "selector": {
                                  "type": "object",
                                  "propertyNames": { "type": "string" },
                                  "additionalProperties": {}
                                },
                                "cardinality": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "n": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 }
                                      },
                                      "required": ["n"],
                                      "additionalProperties": false
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "min": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 },
                                        "max": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 }
                                      },
                                      "required": ["max"],
                                      "additionalProperties": false
                                    }
                                  ]
                                }
                              },
                              "required": ["id", "selector", "cardinality"],
                              "additionalProperties": false
                            }
                          },
                          "lastingEffects": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": { "type": "string", "minLength": 1 },
                                "duration": {
                                  "anyOf": [
                                    { "type": "string", "const": "turn" },
                                    { "type": "string", "const": "nextTurn" },
                                    { "type": "string", "const": "round" },
                                    { "type": "string", "const": "cycle" }
                                  ]
                                },
                                "setupEffects": {
                                  "type": "array",
                                  "minItems": 1,
                                  "items": {
                                    "type": "object",
                                    "propertyNames": { "type": "string" },
                                    "additionalProperties": {}
                                  }
                                },
                                "teardownEffects": {
                                  "type": "array",
                                  "minItems": 1,
                                  "items": {
                                    "type": "object",
                                    "propertyNames": { "type": "string" },
                                    "additionalProperties": {}
                                  }
                                }
                              },
                              "required": ["id", "duration", "setupEffects"],
                              "additionalProperties": false
                            }
                          }
                        },
                        "required": ["id"],
                        "additionalProperties": false
                      }
                    },
                    "targets": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "string", "minLength": 1 },
                          "selector": {
                            "type": "object",
                            "propertyNames": { "type": "string" },
                            "additionalProperties": {}
                          },
                          "cardinality": {
                            "anyOf": [
                              {
                                "type": "object",
                                "properties": {
                                  "n": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 }
                                },
                                "required": ["n"],
                                "additionalProperties": false
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "min": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 },
                                  "max": { "type": "integer", "minimum": 0, "maximum": 9007199254740991 }
                                },
                                "required": ["max"],
                                "additionalProperties": false
                              }
                            ]
                          }
                        },
                        "required": ["id", "selector", "cardinality"],
                        "additionalProperties": false
                      }
                    },
                    "lastingEffects": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "string", "minLength": 1 },
                          "duration": {
                            "anyOf": [
                              { "type": "string", "const": "turn" },
                              { "type": "string", "const": "nextTurn" },
                              { "type": "string", "const": "round" },
                              { "type": "string", "const": "cycle" }
                            ]
                          },
                          "setupEffects": {
                            "type": "array",
                            "minItems": 1,
                            "items": {
                              "type": "object",
                              "propertyNames": { "type": "string" },
                              "additionalProperties": {}
                            }
                          },
                          "teardownEffects": {
                            "type": "array",
                            "minItems": 1,
                            "items": {
                              "type": "object",
                              "propertyNames": { "type": "string" },
                              "additionalProperties": {}
                            }
                          }
                        },
                        "required": ["id", "duration", "setupEffects"],
                        "additionalProperties": false
                      }
                    }
                  },
                  "additionalProperties": false
                }
              },
              "required": ["id", "title", "sideMode"],
              "additionalProperties": false
            }
          }
        },
        "required": ["id", "drawZone", "discardZone", "cards"],
        "additionalProperties": false
      }
    }
  },
  "required": [
    "metadata",
    "constants",
    "globalVars",
    "perPlayerVars",
    "zones",
    "tokenTypes",
    "setup",
    "turnStructure",
    "actions",
    "triggers",
    "terminal"
  ],
  "additionalProperties": false,
  "definitions": {
    "__schema0": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "setVar": {
              "type": "object",
              "properties": {
                "scope": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "global"
                    },
                    {
                      "type": "string",
                      "const": "pvar"
                    }
                  ]
                },
                "player": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "actor"
                    },
                    {
                      "type": "string",
                      "const": "active"
                    },
                    {
                      "type": "string",
                      "const": "all"
                    },
                    {
                      "type": "string",
                      "const": "allOther"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": -9007199254740991,
                          "maximum": 9007199254740991
                        }
                      },
                      "required": [
                        "id"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "chosen": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "chosen"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "relative": {
                          "anyOf": [
                            {
                              "type": "string",
                              "const": "left"
                            },
                            {
                              "type": "string",
                              "const": "right"
                            }
                          ]
                        }
                      },
                      "required": [
                        "relative"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "var": {
                  "type": "string"
                },
                "value": {
                  "$ref": "#/definitions/__schema1"
                }
              },
              "required": [
                "scope",
                "var",
                "value"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "setVar"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "addVar": {
              "type": "object",
              "properties": {
                "scope": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "global"
                    },
                    {
                      "type": "string",
                      "const": "pvar"
                    }
                  ]
                },
                "player": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "actor"
                    },
                    {
                      "type": "string",
                      "const": "active"
                    },
                    {
                      "type": "string",
                      "const": "all"
                    },
                    {
                      "type": "string",
                      "const": "allOther"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": -9007199254740991,
                          "maximum": 9007199254740991
                        }
                      },
                      "required": [
                        "id"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "chosen": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "chosen"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "relative": {
                          "anyOf": [
                            {
                              "type": "string",
                              "const": "left"
                            },
                            {
                              "type": "string",
                              "const": "right"
                            }
                          ]
                        }
                      },
                      "required": [
                        "relative"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "var": {
                  "type": "string"
                },
                "delta": {
                  "$ref": "#/definitions/__schema1"
                }
              },
              "required": [
                "scope",
                "var",
                "delta"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "addVar"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "moveToken": {
              "type": "object",
              "properties": {
                "token": {
                  "type": "string"
                },
                "from": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "zoneExpr": {
                          "$ref": "#/definitions/__schema1"
                        }
                      },
                      "required": [
                        "zoneExpr"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "to": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "zoneExpr": {
                          "$ref": "#/definitions/__schema1"
                        }
                      },
                      "required": [
                        "zoneExpr"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "position": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "top"
                    },
                    {
                      "type": "string",
                      "const": "bottom"
                    },
                    {
                      "type": "string",
                      "const": "random"
                    }
                  ]
                }
              },
              "required": [
                "token",
                "from",
                "to"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "moveToken"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "moveAll": {
              "type": "object",
              "properties": {
                "from": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "zoneExpr": {
                          "$ref": "#/definitions/__schema1"
                        }
                      },
                      "required": [
                        "zoneExpr"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "to": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "zoneExpr": {
                          "$ref": "#/definitions/__schema1"
                        }
                      },
                      "required": [
                        "zoneExpr"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "filter": {
                  "allOf": [
                    {
                      "$ref": "#/definitions/__schema2"
                    }
                  ]
                }
              },
              "required": [
                "from",
                "to"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "moveAll"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "moveTokenAdjacent": {
              "type": "object",
              "properties": {
                "token": {
                  "type": "string"
                },
                "from": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "zoneExpr": {
                          "$ref": "#/definitions/__schema1"
                        }
                      },
                      "required": [
                        "zoneExpr"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "direction": {
                  "type": "string"
                }
              },
              "required": [
                "token",
                "from"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "moveTokenAdjacent"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "draw": {
              "type": "object",
              "properties": {
                "from": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "zoneExpr": {
                          "$ref": "#/definitions/__schema1"
                        }
                      },
                      "required": [
                        "zoneExpr"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "to": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "zoneExpr": {
                          "$ref": "#/definitions/__schema1"
                        }
                      },
                      "required": [
                        "zoneExpr"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "count": {
                  "type": "number"
                }
              },
              "required": [
                "from",
                "to",
                "count"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "draw"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "shuffle": {
              "type": "object",
              "properties": {
                "zone": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "zoneExpr": {
                          "$ref": "#/definitions/__schema1"
                        }
                      },
                      "required": [
                        "zoneExpr"
                      ],
                      "additionalProperties": false
                    }
                  ]
                }
              },
              "required": [
                "zone"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "shuffle"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "createToken": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string"
                },
                "zone": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "zoneExpr": {
                          "$ref": "#/definitions/__schema1"
                        }
                      },
                      "required": [
                        "zoneExpr"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "props": {
                  "type": "object",
                  "propertyNames": {
                    "type": "string"
                  },
                  "additionalProperties": {
                    "$ref": "#/definitions/__schema1"
                  }
                }
              },
              "required": [
                "type",
                "zone"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "createToken"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "destroyToken": {
              "type": "object",
              "properties": {
                "token": {
                  "type": "string"
                }
              },
              "required": [
                "token"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "destroyToken"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "setTokenProp": {
              "type": "object",
              "properties": {
                "token": {
                  "type": "string"
                },
                "prop": {
                  "type": "string"
                },
                "value": {
                  "$ref": "#/definitions/__schema1"
                }
              },
              "required": [
                "token",
                "prop",
                "value"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "setTokenProp"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "if": {
              "type": "object",
              "properties": {
                "when": {
                  "$ref": "#/definitions/__schema2"
                },
                "then": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/__schema0"
                  }
                },
                "else": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/__schema0"
                  }
                }
              },
              "required": [
                "when",
                "then"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "if"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "forEach": {
              "type": "object",
              "properties": {
                "bind": {
                  "type": "string"
                },
                "over": {
                  "anyOf": [
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "tokensInZone"
                        },
                        "zone": {
                          "type": "string"
                        },
                        "filter": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "prop": {
                                "type": "string"
                              },
                              "op": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "const": "eq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "neq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "in"
                                  },
                                  {
                                    "type": "string",
                                    "const": "notIn"
                                  }
                                ]
                              },
                              "value": {
                                "anyOf": [
                                  {
                                    "$ref": "#/definitions/__schema1"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    }
                                  }
                                ]
                              }
                            },
                            "required": [
                              "prop",
                              "op",
                              "value"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "intsInRange"
                        },
                        "min": {
                          "type": "number"
                        },
                        "max": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "query",
                        "min",
                        "max"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "enums"
                        },
                        "values": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "required": [
                        "query",
                        "values"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "players"
                        }
                      },
                      "required": [
                        "query"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "zones"
                        },
                        "filter": {
                          "type": "object",
                          "properties": {
                            "owner": {
                              "anyOf": [
                                {
                                  "type": "string",
                                  "const": "actor"
                                },
                                {
                                  "type": "string",
                                  "const": "active"
                                },
                                {
                                  "type": "string",
                                  "const": "all"
                                },
                                {
                                  "type": "string",
                                  "const": "allOther"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "integer",
                                      "minimum": -9007199254740991,
                                      "maximum": 9007199254740991
                                    }
                                  },
                                  "required": [
                                    "id"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "chosen": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "chosen"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "relative": {
                                      "anyOf": [
                                        {
                                          "type": "string",
                                          "const": "left"
                                        },
                                        {
                                          "type": "string",
                                          "const": "right"
                                        }
                                      ]
                                    }
                                  },
                                  "required": [
                                    "relative"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "condition": {
                              "allOf": [
                                {
                                  "$ref": "#/definitions/__schema2"
                                }
                              ]
                            }
                          },
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "query"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "adjacentZones"
                        },
                        "zone": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "tokensInAdjacentZones"
                        },
                        "zone": {
                          "type": "string"
                        },
                        "filter": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "prop": {
                                "type": "string"
                              },
                              "op": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "const": "eq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "neq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "in"
                                  },
                                  {
                                    "type": "string",
                                    "const": "notIn"
                                  }
                                ]
                              },
                              "value": {
                                "anyOf": [
                                  {
                                    "$ref": "#/definitions/__schema1"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    }
                                  }
                                ]
                              }
                            },
                            "required": [
                              "prop",
                              "op",
                              "value"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "connectedZones"
                        },
                        "zone": {
                          "type": "string"
                        },
                        "via": {
                          "allOf": [
                            {
                              "$ref": "#/definitions/__schema2"
                            }
                          ]
                        },
                        "includeStart": {
                          "type": "boolean"
                        },
                        "maxDepth": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "binding"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "query",
                        "name"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "effects": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/__schema0"
                  }
                },
                "limit": {
                  "allOf": [
                    {
                      "$ref": "#/definitions/__schema1"
                    }
                  ]
                },
                "countBind": {
                  "type": "string"
                },
                "in": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/__schema0"
                  }
                }
              },
              "required": [
                "bind",
                "over",
                "effects"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "forEach"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "removeByPriority": {
              "type": "object",
              "properties": {
                "budget": {
                  "$ref": "#/definitions/__schema1"
                },
                "groups": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "bind": {
                        "type": "string"
                      },
                      "over": {
                        "anyOf": [
                          {
                            "type": "object",
                            "properties": {
                              "query": {
                                "type": "string",
                                "const": "tokensInZone"
                              },
                              "zone": {
                                "type": "string"
                              },
                              "filter": {
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "prop": {
                                      "type": "string"
                                    },
                                    "op": {
                                      "anyOf": [
                                        {
                                          "type": "string",
                                          "const": "eq"
                                        },
                                        {
                                          "type": "string",
                                          "const": "neq"
                                        },
                                        {
                                          "type": "string",
                                          "const": "in"
                                        },
                                        {
                                          "type": "string",
                                          "const": "notIn"
                                        }
                                      ]
                                    },
                                    "value": {
                                      "anyOf": [
                                        {
                                          "$ref": "#/definitions/__schema1"
                                        },
                                        {
                                          "type": "array",
                                          "items": {
                                            "type": "string"
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  "required": [
                                    "prop",
                                    "op",
                                    "value"
                                  ],
                                  "additionalProperties": false
                                }
                              }
                            },
                            "required": [
                              "query",
                              "zone"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "query": {
                                "type": "string",
                                "const": "intsInRange"
                              },
                              "min": {
                                "type": "number"
                              },
                              "max": {
                                "type": "number"
                              }
                            },
                            "required": [
                              "query",
                              "min",
                              "max"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "query": {
                                "type": "string",
                                "const": "enums"
                              },
                              "values": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                }
                              }
                            },
                            "required": [
                              "query",
                              "values"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "query": {
                                "type": "string",
                                "const": "players"
                              }
                            },
                            "required": [
                              "query"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "query": {
                                "type": "string",
                                "const": "zones"
                              },
                              "filter": {
                                "type": "object",
                                "properties": {
                                  "owner": {
                                    "anyOf": [
                                      {
                                        "type": "string",
                                        "const": "actor"
                                      },
                                      {
                                        "type": "string",
                                        "const": "active"
                                      },
                                      {
                                        "type": "string",
                                        "const": "all"
                                      },
                                      {
                                        "type": "string",
                                        "const": "allOther"
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "id": {
                                            "type": "integer",
                                            "minimum": -9007199254740991,
                                            "maximum": 9007199254740991
                                          }
                                        },
                                        "required": [
                                          "id"
                                        ],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "chosen": {
                                            "type": "string"
                                          }
                                        },
                                        "required": [
                                          "chosen"
                                        ],
                                        "additionalProperties": false
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "relative": {
                                            "anyOf": [
                                              {
                                                "type": "string",
                                                "const": "left"
                                              },
                                              {
                                                "type": "string",
                                                "const": "right"
                                              }
                                            ]
                                          }
                                        },
                                        "required": [
                                          "relative"
                                        ],
                                        "additionalProperties": false
                                      }
                                    ]
                                  },
                                  "condition": {
                                    "allOf": [
                                      {
                                        "$ref": "#/definitions/__schema2"
                                      }
                                    ]
                                  }
                                },
                                "additionalProperties": false
                              }
                            },
                            "required": [
                              "query"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "query": {
                                "type": "string",
                                "const": "adjacentZones"
                              },
                              "zone": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "query",
                              "zone"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "query": {
                                "type": "string",
                                "const": "tokensInAdjacentZones"
                              },
                              "zone": {
                                "type": "string"
                              },
                              "filter": {
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "prop": {
                                      "type": "string"
                                    },
                                    "op": {
                                      "anyOf": [
                                        {
                                          "type": "string",
                                          "const": "eq"
                                        },
                                        {
                                          "type": "string",
                                          "const": "neq"
                                        },
                                        {
                                          "type": "string",
                                          "const": "in"
                                        },
                                        {
                                          "type": "string",
                                          "const": "notIn"
                                        }
                                      ]
                                    },
                                    "value": {
                                      "anyOf": [
                                        {
                                          "$ref": "#/definitions/__schema1"
                                        },
                                        {
                                          "type": "array",
                                          "items": {
                                            "type": "string"
                                          }
                                        }
                                      ]
                                    }
                                  },
                                  "required": [
                                    "prop",
                                    "op",
                                    "value"
                                  ],
                                  "additionalProperties": false
                                }
                              }
                            },
                            "required": [
                              "query",
                              "zone"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "query": {
                                "type": "string",
                                "const": "connectedZones"
                              },
                              "zone": {
                                "type": "string"
                              },
                              "via": {
                                "allOf": [
                                  {
                                    "$ref": "#/definitions/__schema2"
                                  }
                                ]
                              },
                              "includeStart": {
                                "type": "boolean"
                              },
                              "maxDepth": {
                                "type": "number"
                              }
                            },
                            "required": [
                              "query",
                              "zone"
                            ],
                            "additionalProperties": false
                          },
                          {
                            "type": "object",
                            "properties": {
                              "query": {
                                "type": "string",
                                "const": "binding"
                              },
                              "name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "query",
                              "name"
                            ],
                            "additionalProperties": false
                          }
                        ]
                      },
                      "to": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "object",
                            "properties": {
                              "zoneExpr": {
                                "$ref": "#/definitions/__schema1"
                              }
                            },
                            "required": [
                              "zoneExpr"
                            ],
                            "additionalProperties": false
                          }
                        ]
                      },
                      "from": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "object",
                            "properties": {
                              "zoneExpr": {
                                "$ref": "#/definitions/__schema1"
                              }
                            },
                            "required": [
                              "zoneExpr"
                            ],
                            "additionalProperties": false
                          }
                        ]
                      },
                      "countBind": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "bind",
                      "over",
                      "to"
                    ],
                    "additionalProperties": false
                  }
                },
                "remainingBind": {
                  "type": "string"
                },
                "in": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/__schema0"
                  }
                }
              },
              "required": [
                "budget",
                "groups"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "removeByPriority"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "let": {
              "type": "object",
              "properties": {
                "bind": {
                  "type": "string"
                },
                "value": {
                  "$ref": "#/definitions/__schema1"
                },
                "in": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/__schema0"
                  }
                }
              },
              "required": [
                "bind",
                "value",
                "in"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "let"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "chooseOne": {
              "type": "object",
              "properties": {
                "bind": {
                  "type": "string"
                },
                "options": {
                  "anyOf": [
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "tokensInZone"
                        },
                        "zone": {
                          "type": "string"
                        },
                        "filter": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "prop": {
                                "type": "string"
                              },
                              "op": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "const": "eq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "neq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "in"
                                  },
                                  {
                                    "type": "string",
                                    "const": "notIn"
                                  }
                                ]
                              },
                              "value": {
                                "anyOf": [
                                  {
                                    "$ref": "#/definitions/__schema1"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    }
                                  }
                                ]
                              }
                            },
                            "required": [
                              "prop",
                              "op",
                              "value"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "intsInRange"
                        },
                        "min": {
                          "type": "number"
                        },
                        "max": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "query",
                        "min",
                        "max"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "enums"
                        },
                        "values": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "required": [
                        "query",
                        "values"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "players"
                        }
                      },
                      "required": [
                        "query"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "zones"
                        },
                        "filter": {
                          "type": "object",
                          "properties": {
                            "owner": {
                              "anyOf": [
                                {
                                  "type": "string",
                                  "const": "actor"
                                },
                                {
                                  "type": "string",
                                  "const": "active"
                                },
                                {
                                  "type": "string",
                                  "const": "all"
                                },
                                {
                                  "type": "string",
                                  "const": "allOther"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "integer",
                                      "minimum": -9007199254740991,
                                      "maximum": 9007199254740991
                                    }
                                  },
                                  "required": [
                                    "id"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "chosen": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "chosen"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "relative": {
                                      "anyOf": [
                                        {
                                          "type": "string",
                                          "const": "left"
                                        },
                                        {
                                          "type": "string",
                                          "const": "right"
                                        }
                                      ]
                                    }
                                  },
                                  "required": [
                                    "relative"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "condition": {
                              "allOf": [
                                {
                                  "$ref": "#/definitions/__schema2"
                                }
                              ]
                            }
                          },
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "query"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "adjacentZones"
                        },
                        "zone": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "tokensInAdjacentZones"
                        },
                        "zone": {
                          "type": "string"
                        },
                        "filter": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "prop": {
                                "type": "string"
                              },
                              "op": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "const": "eq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "neq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "in"
                                  },
                                  {
                                    "type": "string",
                                    "const": "notIn"
                                  }
                                ]
                              },
                              "value": {
                                "anyOf": [
                                  {
                                    "$ref": "#/definitions/__schema1"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    }
                                  }
                                ]
                              }
                            },
                            "required": [
                              "prop",
                              "op",
                              "value"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "connectedZones"
                        },
                        "zone": {
                          "type": "string"
                        },
                        "via": {
                          "allOf": [
                            {
                              "$ref": "#/definitions/__schema2"
                            }
                          ]
                        },
                        "includeStart": {
                          "type": "boolean"
                        },
                        "maxDepth": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "binding"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "query",
                        "name"
                      ],
                      "additionalProperties": false
                    }
                  ]
                }
              },
              "required": [
                "bind",
                "options"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "chooseOne"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "chooseN": {
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "bind": {
                      "type": "string"
                    },
                    "options": {
                      "anyOf": [
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "tokensInZone"
                            },
                            "zone": {
                              "type": "string"
                            },
                            "filter": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "prop": {
                                    "type": "string"
                                  },
                                  "op": {
                                    "anyOf": [
                                      {
                                        "type": "string",
                                        "const": "eq"
                                      },
                                      {
                                        "type": "string",
                                        "const": "neq"
                                      },
                                      {
                                        "type": "string",
                                        "const": "in"
                                      },
                                      {
                                        "type": "string",
                                        "const": "notIn"
                                      }
                                    ]
                                  },
                                  "value": {
                                    "anyOf": [
                                      {
                                        "$ref": "#/definitions/__schema1"
                                      },
                                      {
                                        "type": "array",
                                        "items": {
                                          "type": "string"
                                        }
                                      }
                                    ]
                                  }
                                },
                                "required": [
                                  "prop",
                                  "op",
                                  "value"
                                ],
                                "additionalProperties": false
                              }
                            }
                          },
                          "required": [
                            "query",
                            "zone"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "intsInRange"
                            },
                            "min": {
                              "type": "number"
                            },
                            "max": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "query",
                            "min",
                            "max"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "enums"
                            },
                            "values": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            }
                          },
                          "required": [
                            "query",
                            "values"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "players"
                            }
                          },
                          "required": [
                            "query"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "zones"
                            },
                            "filter": {
                              "type": "object",
                              "properties": {
                                "owner": {
                                  "anyOf": [
                                    {
                                      "type": "string",
                                      "const": "actor"
                                    },
                                    {
                                      "type": "string",
                                      "const": "active"
                                    },
                                    {
                                      "type": "string",
                                      "const": "all"
                                    },
                                    {
                                      "type": "string",
                                      "const": "allOther"
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "id": {
                                          "type": "integer",
                                          "minimum": -9007199254740991,
                                          "maximum": 9007199254740991
                                        }
                                      },
                                      "required": [
                                        "id"
                                      ],
                                      "additionalProperties": false
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "chosen": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "chosen"
                                      ],
                                      "additionalProperties": false
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "relative": {
                                          "anyOf": [
                                            {
                                              "type": "string",
                                              "const": "left"
                                            },
                                            {
                                              "type": "string",
                                              "const": "right"
                                            }
                                          ]
                                        }
                                      },
                                      "required": [
                                        "relative"
                                      ],
                                      "additionalProperties": false
                                    }
                                  ]
                                },
                                "condition": {
                                  "allOf": [
                                    {
                                      "$ref": "#/definitions/__schema2"
                                    }
                                  ]
                                }
                              },
                              "additionalProperties": false
                            }
                          },
                          "required": [
                            "query"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "adjacentZones"
                            },
                            "zone": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "query",
                            "zone"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "tokensInAdjacentZones"
                            },
                            "zone": {
                              "type": "string"
                            },
                            "filter": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "prop": {
                                    "type": "string"
                                  },
                                  "op": {
                                    "anyOf": [
                                      {
                                        "type": "string",
                                        "const": "eq"
                                      },
                                      {
                                        "type": "string",
                                        "const": "neq"
                                      },
                                      {
                                        "type": "string",
                                        "const": "in"
                                      },
                                      {
                                        "type": "string",
                                        "const": "notIn"
                                      }
                                    ]
                                  },
                                  "value": {
                                    "anyOf": [
                                      {
                                        "$ref": "#/definitions/__schema1"
                                      },
                                      {
                                        "type": "array",
                                        "items": {
                                          "type": "string"
                                        }
                                      }
                                    ]
                                  }
                                },
                                "required": [
                                  "prop",
                                  "op",
                                  "value"
                                ],
                                "additionalProperties": false
                              }
                            }
                          },
                          "required": [
                            "query",
                            "zone"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "connectedZones"
                            },
                            "zone": {
                              "type": "string"
                            },
                            "via": {
                              "allOf": [
                                {
                                  "$ref": "#/definitions/__schema2"
                                }
                              ]
                            },
                            "includeStart": {
                              "type": "boolean"
                            },
                            "maxDepth": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "query",
                            "zone"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "binding"
                            },
                            "name": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "query",
                            "name"
                          ],
                          "additionalProperties": false
                        }
                      ]
                    },
                    "n": {
                      "type": "number"
                    }
                  },
                  "required": [
                    "bind",
                    "options",
                    "n"
                  ],
                  "additionalProperties": false
                },
                {
                  "type": "object",
                  "properties": {
                    "bind": {
                      "type": "string"
                    },
                    "options": {
                      "anyOf": [
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "tokensInZone"
                            },
                            "zone": {
                              "type": "string"
                            },
                            "filter": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "prop": {
                                    "type": "string"
                                  },
                                  "op": {
                                    "anyOf": [
                                      {
                                        "type": "string",
                                        "const": "eq"
                                      },
                                      {
                                        "type": "string",
                                        "const": "neq"
                                      },
                                      {
                                        "type": "string",
                                        "const": "in"
                                      },
                                      {
                                        "type": "string",
                                        "const": "notIn"
                                      }
                                    ]
                                  },
                                  "value": {
                                    "anyOf": [
                                      {
                                        "$ref": "#/definitions/__schema1"
                                      },
                                      {
                                        "type": "array",
                                        "items": {
                                          "type": "string"
                                        }
                                      }
                                    ]
                                  }
                                },
                                "required": [
                                  "prop",
                                  "op",
                                  "value"
                                ],
                                "additionalProperties": false
                              }
                            }
                          },
                          "required": [
                            "query",
                            "zone"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "intsInRange"
                            },
                            "min": {
                              "type": "number"
                            },
                            "max": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "query",
                            "min",
                            "max"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "enums"
                            },
                            "values": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            }
                          },
                          "required": [
                            "query",
                            "values"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "players"
                            }
                          },
                          "required": [
                            "query"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "zones"
                            },
                            "filter": {
                              "type": "object",
                              "properties": {
                                "owner": {
                                  "anyOf": [
                                    {
                                      "type": "string",
                                      "const": "actor"
                                    },
                                    {
                                      "type": "string",
                                      "const": "active"
                                    },
                                    {
                                      "type": "string",
                                      "const": "all"
                                    },
                                    {
                                      "type": "string",
                                      "const": "allOther"
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "id": {
                                          "type": "integer",
                                          "minimum": -9007199254740991,
                                          "maximum": 9007199254740991
                                        }
                                      },
                                      "required": [
                                        "id"
                                      ],
                                      "additionalProperties": false
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "chosen": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "chosen"
                                      ],
                                      "additionalProperties": false
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "relative": {
                                          "anyOf": [
                                            {
                                              "type": "string",
                                              "const": "left"
                                            },
                                            {
                                              "type": "string",
                                              "const": "right"
                                            }
                                          ]
                                        }
                                      },
                                      "required": [
                                        "relative"
                                      ],
                                      "additionalProperties": false
                                    }
                                  ]
                                },
                                "condition": {
                                  "allOf": [
                                    {
                                      "$ref": "#/definitions/__schema2"
                                    }
                                  ]
                                }
                              },
                              "additionalProperties": false
                            }
                          },
                          "required": [
                            "query"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "adjacentZones"
                            },
                            "zone": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "query",
                            "zone"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "tokensInAdjacentZones"
                            },
                            "zone": {
                              "type": "string"
                            },
                            "filter": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "prop": {
                                    "type": "string"
                                  },
                                  "op": {
                                    "anyOf": [
                                      {
                                        "type": "string",
                                        "const": "eq"
                                      },
                                      {
                                        "type": "string",
                                        "const": "neq"
                                      },
                                      {
                                        "type": "string",
                                        "const": "in"
                                      },
                                      {
                                        "type": "string",
                                        "const": "notIn"
                                      }
                                    ]
                                  },
                                  "value": {
                                    "anyOf": [
                                      {
                                        "$ref": "#/definitions/__schema1"
                                      },
                                      {
                                        "type": "array",
                                        "items": {
                                          "type": "string"
                                        }
                                      }
                                    ]
                                  }
                                },
                                "required": [
                                  "prop",
                                  "op",
                                  "value"
                                ],
                                "additionalProperties": false
                              }
                            }
                          },
                          "required": [
                            "query",
                            "zone"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "connectedZones"
                            },
                            "zone": {
                              "type": "string"
                            },
                            "via": {
                              "allOf": [
                                {
                                  "$ref": "#/definitions/__schema2"
                                }
                              ]
                            },
                            "includeStart": {
                              "type": "boolean"
                            },
                            "maxDepth": {
                              "type": "number"
                            }
                          },
                          "required": [
                            "query",
                            "zone"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "query": {
                              "type": "string",
                              "const": "binding"
                            },
                            "name": {
                              "type": "string"
                            }
                          },
                          "required": [
                            "query",
                            "name"
                          ],
                          "additionalProperties": false
                        }
                      ]
                    },
                    "min": {
                      "$ref": "#/definitions/__schema1"
                    },
                    "max": {
                      "$ref": "#/definitions/__schema1"
                    }
                  },
                  "required": [
                    "bind",
                    "options",
                    "max"
                  ],
                  "additionalProperties": false
                }
              ]
            }
          },
          "required": [
            "chooseN"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "rollRandom": {
              "type": "object",
              "properties": {
                "bind": {
                  "type": "string"
                },
                "min": {
                  "$ref": "#/definitions/__schema1"
                },
                "max": {
                  "$ref": "#/definitions/__schema1"
                },
                "in": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/__schema0"
                  }
                }
              },
              "required": [
                "bind",
                "min",
                "max",
                "in"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "rollRandom"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "setMarker": {
              "type": "object",
              "properties": {
                "space": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "zoneExpr": {
                          "$ref": "#/definitions/__schema1"
                        }
                      },
                      "required": [
                        "zoneExpr"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "marker": {
                  "type": "string"
                },
                "state": {
                  "$ref": "#/definitions/__schema1"
                }
              },
              "required": [
                "space",
                "marker",
                "state"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "setMarker"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "shiftMarker": {
              "type": "object",
              "properties": {
                "space": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "zoneExpr": {
                          "$ref": "#/definitions/__schema1"
                        }
                      },
                      "required": [
                        "zoneExpr"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "marker": {
                  "type": "string"
                },
                "delta": {
                  "$ref": "#/definitions/__schema1"
                }
              },
              "required": [
                "space",
                "marker",
                "delta"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "shiftMarker"
          ],
          "additionalProperties": false
        }
      ]
    },
    "__schema1": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "boolean"
        },
        {
          "type": "string"
        },
        {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "ref": {
                  "type": "string",
                  "const": "gvar"
                },
                "var": {
                  "type": "string"
                }
              },
              "required": [
                "ref",
                "var"
              ],
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "ref": {
                  "type": "string",
                  "const": "pvar"
                },
                "player": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "actor"
                    },
                    {
                      "type": "string",
                      "const": "active"
                    },
                    {
                      "type": "string",
                      "const": "all"
                    },
                    {
                      "type": "string",
                      "const": "allOther"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "minimum": -9007199254740991,
                          "maximum": 9007199254740991
                        }
                      },
                      "required": [
                        "id"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "chosen": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "chosen"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "relative": {
                          "anyOf": [
                            {
                              "type": "string",
                              "const": "left"
                            },
                            {
                              "type": "string",
                              "const": "right"
                            }
                          ]
                        }
                      },
                      "required": [
                        "relative"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "var": {
                  "type": "string"
                }
              },
              "required": [
                "ref",
                "player",
                "var"
              ],
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "ref": {
                  "type": "string",
                  "const": "zoneCount"
                },
                "zone": {
                  "type": "string"
                }
              },
              "required": [
                "ref",
                "zone"
              ],
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "ref": {
                  "type": "string",
                  "const": "tokenProp"
                },
                "token": {
                  "type": "string"
                },
                "prop": {
                  "type": "string"
                }
              },
              "required": [
                "ref",
                "token",
                "prop"
              ],
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "ref": {
                  "type": "string",
                  "const": "binding"
                },
                "name": {
                  "type": "string"
                }
              },
              "required": [
                "ref",
                "name"
              ],
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "ref": {
                  "type": "string",
                  "const": "markerState"
                },
                "space": {
                  "type": "string"
                },
                "marker": {
                  "type": "string"
                }
              },
              "required": [
                "ref",
                "space",
                "marker"
              ],
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "ref": {
                  "type": "string",
                  "const": "tokenZone"
                },
                "token": {
                  "type": "string"
                }
              },
              "required": [
                "ref",
                "token"
              ],
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "ref": {
                  "type": "string",
                  "const": "zoneProp"
                },
                "zone": {
                  "type": "string"
                },
                "prop": {
                  "type": "string"
                }
              },
              "required": [
                "ref",
                "zone",
                "prop"
              ],
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "ref": {
                  "type": "string",
                  "const": "activePlayer"
                }
              },
              "required": [
                "ref"
              ],
              "additionalProperties": false
            }
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "+"
                },
                {
                  "type": "string",
                  "const": "-"
                },
                {
                  "type": "string",
                  "const": "*"
                },
                {
                  "type": "string",
                  "const": "/"
                },
                {
                  "type": "string",
                  "const": "floorDiv"
                },
                {
                  "type": "string",
                  "const": "ceilDiv"
                }
              ]
            },
            "left": {
              "$ref": "#/definitions/__schema1"
            },
            "right": {
              "$ref": "#/definitions/__schema1"
            }
          },
          "required": [
            "op",
            "left",
            "right"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "aggregate": {
              "type": "object",
              "properties": {
                "op": {
                  "anyOf": [
                    {
                      "type": "string",
                      "const": "sum"
                    },
                    {
                      "type": "string",
                      "const": "count"
                    },
                    {
                      "type": "string",
                      "const": "min"
                    },
                    {
                      "type": "string",
                      "const": "max"
                    }
                  ]
                },
                "query": {
                  "anyOf": [
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "tokensInZone"
                        },
                        "zone": {
                          "type": "string"
                        },
                        "filter": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "prop": {
                                "type": "string"
                              },
                              "op": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "const": "eq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "neq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "in"
                                  },
                                  {
                                    "type": "string",
                                    "const": "notIn"
                                  }
                                ]
                              },
                              "value": {
                                "anyOf": [
                                  {
                                    "$ref": "#/definitions/__schema1"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    }
                                  }
                                ]
                              }
                            },
                            "required": [
                              "prop",
                              "op",
                              "value"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "intsInRange"
                        },
                        "min": {
                          "type": "number"
                        },
                        "max": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "query",
                        "min",
                        "max"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "enums"
                        },
                        "values": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "required": [
                        "query",
                        "values"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "players"
                        }
                      },
                      "required": [
                        "query"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "zones"
                        },
                        "filter": {
                          "type": "object",
                          "properties": {
                            "owner": {
                              "anyOf": [
                                {
                                  "type": "string",
                                  "const": "actor"
                                },
                                {
                                  "type": "string",
                                  "const": "active"
                                },
                                {
                                  "type": "string",
                                  "const": "all"
                                },
                                {
                                  "type": "string",
                                  "const": "allOther"
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "id": {
                                      "type": "integer",
                                      "minimum": -9007199254740991,
                                      "maximum": 9007199254740991
                                    }
                                  },
                                  "required": [
                                    "id"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "chosen": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "chosen"
                                  ],
                                  "additionalProperties": false
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "relative": {
                                      "anyOf": [
                                        {
                                          "type": "string",
                                          "const": "left"
                                        },
                                        {
                                          "type": "string",
                                          "const": "right"
                                        }
                                      ]
                                    }
                                  },
                                  "required": [
                                    "relative"
                                  ],
                                  "additionalProperties": false
                                }
                              ]
                            },
                            "condition": {
                              "allOf": [
                                {
                                  "$ref": "#/definitions/__schema2"
                                }
                              ]
                            }
                          },
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "query"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "adjacentZones"
                        },
                        "zone": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "tokensInAdjacentZones"
                        },
                        "zone": {
                          "type": "string"
                        },
                        "filter": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "prop": {
                                "type": "string"
                              },
                              "op": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "const": "eq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "neq"
                                  },
                                  {
                                    "type": "string",
                                    "const": "in"
                                  },
                                  {
                                    "type": "string",
                                    "const": "notIn"
                                  }
                                ]
                              },
                              "value": {
                                "anyOf": [
                                  {
                                    "$ref": "#/definitions/__schema1"
                                  },
                                  {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    }
                                  }
                                ]
                              }
                            },
                            "required": [
                              "prop",
                              "op",
                              "value"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "connectedZones"
                        },
                        "zone": {
                          "type": "string"
                        },
                        "via": {
                          "allOf": [
                            {
                              "$ref": "#/definitions/__schema2"
                            }
                          ]
                        },
                        "includeStart": {
                          "type": "boolean"
                        },
                        "maxDepth": {
                          "type": "number"
                        }
                      },
                      "required": [
                        "query",
                        "zone"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string",
                          "const": "binding"
                        },
                        "name": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "query",
                        "name"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "prop": {
                  "type": "string"
                }
              },
              "required": [
                "op",
                "query"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "aggregate"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "concat": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/__schema1"
              }
            }
          },
          "required": [
            "concat"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "if": {
              "type": "object",
              "properties": {
                "when": {
                  "$ref": "#/definitions/__schema2"
                },
                "then": {
                  "$ref": "#/definitions/__schema1"
                },
                "else": {
                  "$ref": "#/definitions/__schema1"
                }
              },
              "required": [
                "when",
                "then",
                "else"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "if"
          ],
          "additionalProperties": false
        }
      ]
    },
    "__schema2": {
      "anyOf": [
        {
          "type": "boolean"
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "and"
            },
            "args": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/__schema2"
              }
            }
          },
          "required": [
            "op",
            "args"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "or"
            },
            "args": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/__schema2"
              }
            }
          },
          "required": [
            "op",
            "args"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "not"
            },
            "arg": {
              "$ref": "#/definitions/__schema2"
            }
          },
          "required": [
            "op",
            "arg"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "anyOf": [
                {
                  "type": "string",
                  "const": "=="
                },
                {
                  "type": "string",
                  "const": "!="
                },
                {
                  "type": "string",
                  "const": "<"
                },
                {
                  "type": "string",
                  "const": "<="
                },
                {
                  "type": "string",
                  "const": ">"
                },
                {
                  "type": "string",
                  "const": ">="
                }
              ]
            },
            "left": {
              "$ref": "#/definitions/__schema1"
            },
            "right": {
              "$ref": "#/definitions/__schema1"
            }
          },
          "required": [
            "op",
            "left",
            "right"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "in"
            },
            "item": {
              "$ref": "#/definitions/__schema1"
            },
            "set": {
              "$ref": "#/definitions/__schema1"
            }
          },
          "required": [
            "op",
            "item",
            "set"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "adjacent"
            },
            "left": {
              "type": "string"
            },
            "right": {
              "type": "string"
            }
          },
          "required": [
            "op",
            "left",
            "right"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "connected"
            },
            "from": {
              "type": "string"
            },
            "to": {
              "type": "string"
            },
            "via": {
              "allOf": [
                {
                  "$ref": "#/definitions/__schema2"
                }
              ]
            },
            "maxDepth": {
              "type": "number"
            }
          },
          "required": [
            "op",
            "from",
            "to"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "zonePropIncludes"
            },
            "zone": {
              "type": "string"
            },
            "prop": {
              "type": "string"
            },
            "value": {
              "$ref": "#/definitions/__schema1"
            }
          },
          "required": [
            "op",
            "zone",
            "prop",
            "value"
          ],
          "additionalProperties": false
        }
      ]
    }
  }
}
