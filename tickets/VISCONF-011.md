# VISCONF-011: Update bootstrap JSON fixtures and regenerate schema artifacts

**Spec**: 42 (Per-Game Visual Config), D13
**Priority**: P1
**Depends on**: VISCONF-008 (engine types stripped — JSON must match new types)
**Blocks**: Nothing (can run in parallel with VISCONF-009, 010, 012)

---

## Summary

Strip visual fields from the runner's bootstrap GameDef JSON files (`fitl-game-def.json`, `texas-game-def.json`) and regenerate the engine's JSON Schema artifact (`GameDef.schema.json`). The bootstrap JSON is used by the runner's dev server to start without recompiling.

---

## Files to modify

| File | Change |
|------|--------|
| `packages/runner/src/bootstrap/fitl-game-def.json` | Remove all visual fields (see list below) |
| `packages/runner/src/bootstrap/texas-game-def.json` | Remove all visual fields (see list below) |

## Files regenerated (not hand-edited)

| File | Action |
|------|--------|
| `packages/engine/schemas/GameDef.schema.json` | Regenerated by `pnpm turbo schema:artifacts` |

---

## Detailed requirements

### fitl-game-def.json

Remove from every zone object:
- `"visual"` key (contains `{ shape, width, height, color, label }`)
- `"layoutRole"` key

Remove from every tokenType object:
- `"visual"` key (contains `{ shape?, color?, size?, symbol? }`)

Remove from every faction object:
- `"color"` key
- `"displayName"` key

Remove from `metadata`:
- `"layoutMode"` key

Remove from root:
- `"cardAnimation"` key (if present — FITL may not have one)

### texas-game-def.json

Remove from every zone object:
- `"layoutRole"` key

Remove from every faction object:
- `"color"` key
- `"displayName"` key

Remove from `metadata`:
- `"layoutMode"` key

Remove from root:
- `"cardAnimation"` key (with its entire `cardTokenTypeIds` and `zoneRoles` sub-object)

### Schema regeneration

After stripping bootstrap JSON and with engine types updated (VISCONF-008):

```bash
pnpm turbo schema:artifacts
```

This regenerates `packages/engine/schemas/GameDef.schema.json` from the Zod schemas. The regenerated schema should have:
- No `ZoneVisualHints` definition
- No `TokenVisualHints` definition
- No `CardAnimationMetadata` definition
- No `layoutMode` in metadata properties
- No `cardAnimation` in GameDef properties
- No `layoutRole` in zone properties
- No `visual` in zone or tokenType properties
- No `color` or `displayName` in faction properties

---

## Out of scope

- Engine type changes (VISCONF-008)
- Compiler changes (VISCONF-009)
- Game spec YAML changes (VISCONF-010)
- Engine test updates (VISCONF-012)
- Runner code changes

---

## Acceptance criteria

### Tests that must pass

**packages/runner/test/bootstrap/** tests:
1. `resolve-bootstrap-config.test.ts` passes with updated JSON (if it validates structure)

**packages/engine/test/unit/json-schema.test.ts**:
1. Regenerated schema validates a GameDef without visual fields
2. Schema does NOT accept visual fields (they should not be in `properties`)

**packages/engine/test/unit/schemas-top-level.test.ts**:
1. `GameDefSchema` validates a fixture without visual fields

### Verification

1. `grep -r '"visual"' packages/runner/src/bootstrap/*.json` returns zero hits
2. `grep -r '"layoutRole"' packages/runner/src/bootstrap/*.json` returns zero hits
3. `grep -r '"layoutMode"' packages/runner/src/bootstrap/*.json` returns zero hits
4. `grep -r '"cardAnimation"' packages/runner/src/bootstrap/*.json` returns zero hits
5. `grep -r '"displayName"' packages/runner/src/bootstrap/*.json` returns zero hits (in faction context)
6. `grep 'ZoneVisualHints\|TokenVisualHints\|CardAnimationMetadata' packages/engine/schemas/GameDef.schema.json` returns zero hits
7. `pnpm turbo schema:artifacts` runs without errors and the git diff shows only removals in GameDef.schema.json

### Invariants

- Bootstrap JSON is valid against the regenerated GameDef.schema.json
- Bootstrap JSON retains all game-rule data (zones, variables, tokenTypes, phases, actions, triggers, scenarios)
- `pnpm -F @ludoforge/runner dev` starts successfully with the updated bootstrap JSON
- Schema artifacts script runs cleanly
